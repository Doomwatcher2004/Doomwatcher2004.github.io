<!doctype html>
<html lang="cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Web/react" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">React 核心价值与前置知识 | 小冷の代码世界</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/docs/Web/react"><meta data-rh="true" property="og:locale" content="cn"><meta data-rh="true" name="docusaurus_locale" content="cn"><meta data-rh="true" name="docsearch:language" content="cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="React 核心价值与前置知识 | 小冷の代码世界"><meta data-rh="true" name="description" content="核心价值"><meta data-rh="true" property="og:description" content="核心价值"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/docs/Web/react"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/Web/react" hreflang="cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/Web/react" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.15cbc4ab.css">
<script src="/assets/js/runtime~main.41489e3b.js" defer="defer"></script>
<script src="/assets/js/main.53b12e53.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="小冷の代码世界" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="小冷の代码世界" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">小冷の代码世界</b></a><a class="navbar__item navbar__link" href="/docs/Java/Docker 快速入门">Java知识库</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Web/JavaScript 高级">前端知识库</a><a class="navbar__item navbar__link" sidebarid="GodotSidebar" href="/docs/Godot">Godot游戏开发</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Doomwatcher2004" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Web/JavaScript 高级">JavaScript 高级</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/Web/react">React 核心价值与前置知识</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Web/vue2.x">vue2.0</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Web/小满前端TS笔记">TypeScript 基础笔记(小满版本)</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">React 核心价值与前置知识</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>React 核心价值与前置知识</h1></header>
<blockquote>
<p>核心价值</p>
<ul>
<li>
<p>组件化（易开发易维护）</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241127191136578.png" alt="" class="img_ev3q"></p>
</li>
<li>
<p>数据驱动视图 ：定义好数据和 ui 的显示规则 即<code>UI=f(state)</code></p>
<ul>
<li>只关注业务数据修改，不在操作 DOM 增加开发效率</li>
</ul>
</li>
</ul>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="使用-vite-创建-recat-项目">使用 vite 创建 Recat 项目<a href="#使用-vite-创建-recat-项目" class="hash-link" aria-label="Direct link to 使用 vite 创建 Recat 项目" title="Direct link to 使用 vite 创建 Recat 项目">​</a></h2>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241127191701363.png" alt="image-20241127191701363" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="开发规范">开发规范<a href="#开发规范" class="hash-link" aria-label="Direct link to 开发规范" title="Direct link to 开发规范">​</a></h2>
<p>使用 <code>prettier  &amp; eslint</code> 规范开发</p>
<ul>
<li>eslint 检查语法语义</li>
<li>prettier 检查代码风格</li>
</ul>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#eslint :</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">npm install eslint@typescript-eslint/parser @typescript-eslint/eslint-plugin --save-dev</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">#prettier:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">npm install prettier eslint-config-prettier eslint-plugin-prettier --save-dev</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>vite 和 webpack 的区别</p>
<p><code>webpack</code>是一个非常流行的前端打包工具 比较经典 <code>Create-React-App</code> 是使用 webpack 作为打包工具的</p>
<p><code>vite</code> 既是构建工具 又是打包工具</p>
<p><code>vite</code>的特点：</p>
<ol>
<li>Vite 打包项目 在启动和代码更新时更快</li>
<li>vite 使用了 <code>es Module</code> 语法（仅开发环境）</li>
</ol>
<h1>React JSX 语法</h1>
<p>内容 ：</p>
<ol>
<li>JSX 语法</li>
<li>组件和 props</li>
<li>实战： 列表页</li>
</ol>
<p><code>JSX</code>特点:</p>
<ol>
<li>JSX 是 js 的扩展 写在 js 代码里面 组件的 ui 结构</li>
<li>语法和 html 很相似</li>
<li>不只是 React 独有</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="标签">标签<a href="#标签" class="hash-link" aria-label="Direct link to 标签" title="Direct link to 标签">​</a></h2>
<ul>
<li>首字母大小写的区别 ， 大写字母是自定义组件</li>
<li>标签必须闭合 如<code>&lt;input&gt;</code>在 jsx 是非法的</li>
<li>每段 JSX 中只有一个根节点</li>
</ul>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241127200934798.png" alt="image-20241127200934798" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="属性">属性<a href="#属性" class="hash-link" aria-label="Direct link to 属性" title="Direct link to 属性">​</a></h2>
<p>和 html 基本相似</p>
<ul>
<li>class 要改为 className</li>
<li>style 要使用 js 对象 不能是 string 而且 key 需要使用驼峰写法</li>
</ul>
<p>如下</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241127201256661.png" alt="image-20241127201256661" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="在-jsx-中插入-js-变量">在 JSX 中插入 js 变量<a href="#在-jsx-中插入-js-变量" class="hash-link" aria-label="Direct link to 在 JSX 中插入 js 变量" title="Direct link to 在 JSX 中插入 js 变量">​</a></h2>
<ul>
<li>使用<code>{}</code>可以插入 JS 变量 函数 表达式</li>
<li>可以插入文本 属性</li>
<li>可以用于注释</li>
</ul>
<blockquote>
<p>代码案例</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241127201542329.png" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="条件判断">条件判断<a href="#条件判断" class="hash-link" aria-label="Direct link to 条件判断" title="Direct link to 条件判断">​</a></h2>
<p>​ 常见的<code>if else</code> 可以通过{}的方式实现，但是在<code>JSX</code>中代码一多就显得不够实用了 以下三种方法可以解决：</p>
<ul>
<li>使用<code>&amp;&amp;</code></li>
<li>使用三元表达式</li>
<li>使用函数来判断</li>
</ul>
<p>比如这样：反之如果 flag 等于 false 就不会出现 hello</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205141921850.png" alt="image-20241205141921850" class="img_ev3q"></p>
<p>效果：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205142005694.png" alt="image-20241205142005694" class="img_ev3q"></p>
<p>三元运算符：flag 为判断条件 来控制标签的显示</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205142326966.png" alt="image-20241205142326966" class="img_ev3q"></p>
<p>效果：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205142357552.png" alt="image-20241205142357552" class="img_ev3q"></p>
<p>函数：</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">isShowHello</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">flag</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">show hello</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">defaultHello</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205142731794.png" alt="image-20241205142731794" class="img_ev3q"></p>
<p>效果 ：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205142625910.png" alt="image-20241205142625910" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="循环">循环<a href="#循环" class="hash-link" aria-label="Direct link to 循环" title="Direct link to 循环">​</a></h2>
<ul>
<li>使用 map 来循环</li>
<li>每一个循环项（item）都要有 key</li>
<li>key 需要具有唯一性</li>
</ul>
<blockquote>
<p>实现</p>
</blockquote>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> list </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">username</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;zhangsan&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;张三&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">username</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;shuangyue&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;双月&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">username</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;lisi&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;李四&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">/*循环*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">user</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> username</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> name </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> user</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">li</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">username</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">li</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>效果：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205143625839.png" alt="image-20241205143625839" class="img_ev3q"></p>
<p>PS ： 不建议使用 index 如 :</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205143728414.png" alt="image-20241205143728414" class="img_ev3q"></p>
<p>因为我们的 key 需要具有唯一性</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="小结实战-列表页">小结实战 列表页<a href="#小结实战-列表页" class="hash-link" aria-label="Direct link to 小结实战 列表页" title="Direct link to 小结实战 列表页">​</a></h2>
<p>开发一个列表页</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205144041914.png" alt="image-20241205144041914" class="img_ev3q"></p>
<p>调整一下显示的 jsx</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205144105516.png" alt="image-20241205144105516" class="img_ev3q"></p>
<p>保证这个代码结构简洁 ，然后就可以开始开发了</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./App1.css&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">App</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> questionList </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q1&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷1&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q2&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷2&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q3&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷3&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q4&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷4&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">edit</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;edit&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">h1</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">列表详情页</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">h1</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">questionList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">question</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> isPublished </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> question</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">list-item</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              &amp;nbsp;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">strong</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">title</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">strong</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              &amp;nbsp;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">isPublished </span><span class="token operator" style="color:#475569">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript literal-property property" style="color:#0ea5e9">color</span><span class="token tag script language-javascript operator" style="color:#475569">:</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript string" style="color:#64748b">&quot;green&quot;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">已发布</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">未发布</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              &amp;nbsp;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">edit</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">编辑问卷</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>css</p>
</blockquote>
<div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token selector class" style="color:#D7BA7D">.list-item</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token property">border</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token unit">px</span><span class="token plain"> solid </span><span class="token hexcode color">#ccc</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token property">padding</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">10</span><span class="token unit">px</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token property">margin-bottom</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">16</span><span class="token unit">px</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token property">display</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> flex</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token property">justify-content</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> center</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205150336004.png" alt="" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="组件">组件<a href="#组件" class="hash-link" aria-label="Direct link to 组件" title="Direct link to 组件">​</a></h2>
<p><code>react</code> 一切皆是组件</p>
<ul>
<li>组件拥有一个 ui 片段</li>
<li>拥有独立的逻辑和显示</li>
<li>可大可小 可以嵌套</li>
</ul>
<blockquote>
<p>组件拆分的价值和意义</p>
</blockquote>
<ul>
<li>组件嵌套来组织的 ui 结构 和 html 一样没有学习成本</li>
<li>良好的拆分组件利于代码维护和多人协同开发</li>
<li>封装公共组件或者直接使用第三方组件复用代码</li>
</ul>
<p>好的组件化 逻辑是清晰的 更能提升开发效率并且更加的美观易读</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205150607929.png" alt="image-20241205150607929" class="img_ev3q"></p>
<p>我们可以将组件理解成一个一个的函数</p>
<p>使用我们之前的列表页代码 拆分成组件 <code>list1 </code></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205151215018.png" alt="image-20241205151215018" class="img_ev3q"></p>
<p>然后用 improt 的方式 引入到 listdemo 中</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205151236675.png" alt="image-20241205151236675" class="img_ev3q"></p>
<p>这样我们的总框架就没有那么多的代码冗余 需要修改对应的代码 只需要寻找对应的组件文件即可</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="属性-props">属性 props<a href="#属性-props" class="hash-link" aria-label="Direct link to 属性 props" title="Direct link to 属性 props">​</a></h2>
<ul>
<li>组件可以嵌套 有层级关系</li>
<li>父组件可以向子组件传递数据</li>
<li>props 是只读对象</li>
</ul>
<p>props 其实就是实现差异化组件信息传递的一种手段</p>
<blockquote>
<p>实践</p>
</blockquote>
<p>将之前循环内显示数据的 div 拆出来抽象成组件：<code>QuestCard.tsx</code> 。 CSS 还是和之前的内容一样</p>
<p>使用 ts 主要是方便传入泛型</p>
<blockquote>
<p>QuestCard.tsx</p>
</blockquote>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">FC</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./QuestCard.css&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">type</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">proptype</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token builtin" style="color:#0c4a6e">string</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token builtin" style="color:#0c4a6e">string</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token builtin" style="color:#0c4a6e">boolean</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token maybe-class-name">QuestCard</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">FC</span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">proptype</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> isPublished </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> props</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">edit</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;edit&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> id</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">list-item</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      &amp;nbsp;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">strong</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">title</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">strong</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      &amp;nbsp;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">isPublished </span><span class="token operator" style="color:#475569">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9"> color</span><span class="token tag script language-javascript operator" style="color:#475569">:</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript string" style="color:#64748b">&quot;green&quot;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">已发布</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">未发布</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      &amp;nbsp;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">edit</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">编辑问卷</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241205152744672.png" alt="image-20241205152744672" class="img_ev3q"></p>
<p>改造<code>list1.jsx</code> 这样就将显示问卷卡片抽取出来为一个独立的组件了</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./list1.css&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">QuestCard</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./QuestCard&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">List1</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> questionList </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q1&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷1&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q2&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷2&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q3&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷3&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;q4&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;问卷4&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">isPublished</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">false</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">h1</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">列表详情页</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">h1</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">questionList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">question</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> isPublished </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> question</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">QuestCard</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">              </span><span class="token tag attr-name" style="color:#0c4a6e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">              </span><span class="token tag attr-name" style="color:#0c4a6e">id</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">              </span><span class="token tag attr-name" style="color:#0c4a6e">title</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">title</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">              </span><span class="token tag attr-name" style="color:#0c4a6e">isPublished</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">isPublished</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">            </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>小结：</p>
<ul>
<li>如何定义和使用组件</li>
<li>props-父组件给子组件传递数据</li>
<li>重构列表页 抽象出<code>QuestionCard</code></li>
</ul>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210135546835.png" alt="image-20241210135546835" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="children">children<a href="#children" class="hash-link" aria-label="Direct link to children" title="Direct link to children">​</a></h3>
<p>场景: 当我们把内容签到在子组件标签中时,父组件会自动的在名为 <code>children</code>的 prop 中接受内容</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210140715462.png" alt="image-20241210140715462" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="子组件传递父组件">子组件传递父组件<a href="#子组件传递父组件" class="hash-link" aria-label="Direct link to 子组件传递父组件" title="Direct link to 子组件传递父组件">​</a></h3>
<p>顾名思义 其实就是子组件给父组件传递信息</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">Son</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onGetSonMsg</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//     son 中的数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> sonMsg </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;this is son msg&#x27;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is son</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">onGetSonMsg</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript" style="color:#0ea5e9">sonMsg</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">sendMsg</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setMsg</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&#x27;&#x27;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">getMsg</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">// msg = &#x27;我是信息&#x27;  这么改是无效的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token function" style="color:#0e7490">setMsg</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        this is APP Son send msg =&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Son</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onGetSonMsg</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">getMsg</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="兄弟组件传递">兄弟组件传递<a href="#兄弟组件传递" class="hash-link" aria-label="Direct link to 兄弟组件传递" title="Direct link to 兄弟组件传递">​</a></h3>
<p>使用状态提升实现兄弟组件通信</p>
<ul>
<li>其实就是有共同父组件的两个子组件传递信息</li>
<li>a 传递给父组件 然后由父组件 传递给 b</li>
</ul>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210142620094.png" alt="image-20241210142620094" class="img_ev3q"></p>
<blockquote>
<p>代码</p>
</blockquote>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">A</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> onGetAName </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;a name&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      this is A&lt;button onClick=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">onGetAName</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text">&gt;send</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">B</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> pushAName </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is B</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">pushAName</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">aName</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setAName</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">getAName</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setAName</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      this is app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">A</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onGetAName</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">getAName</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">B</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">pushAName</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">aName</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">AppDemo</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">A</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> onGetAName </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;a name&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      this is A&lt;button onClick=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">onGetAName</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text">&gt;send</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">B</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> pushAName </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is B</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">pushAName</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">aName</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setAName</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">getAName</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setAName</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      this is app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">A</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onGetAName</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">getAName</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">B</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">pushAName</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">aName</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210143414793.png" alt="image-20241210143414793" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="react-拓展">React 拓展<a href="#react-拓展" class="hash-link" aria-label="Direct link to React 拓展" title="Direct link to React 拓展">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reactmemo">React.memo<a href="#reactmemo" class="hash-link" aria-label="Direct link to React.memo" title="Direct link to React.memo">​</a></h3>
<p>允许组件在 Props 没有改变的情况下 跳过渲染</p>
<blockquote>
<p>react 组件默认的渲染机制 : 父组件重新渲染的时候子组件也会重新渲染</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">Son</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;子组件被重新渲染了&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token keyword" style="color:#0c4a6e">this</span><span class="token plain"> is son</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">ReactMemoDemo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> forceUpdate</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;父组件重新渲染了&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Son</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">forceUpdate</span><span class="token punctuation" style="color:#475569">(</span><span class="token known-class-name class-name" style="color:#0ea5e9">Math</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">random</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">update</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">ReactMemoDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250105160106041.png" alt="image-20250105160106041" class="img_ev3q"></p>
<p>这个时候使用 memo 包裹住组件 就可以避免 但是 注意 只考虑 props 变化才能使用\</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> memo</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// function Son() {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//     console.log(&#x27;子组件被重新渲染了&#x27;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//     return &lt;div&gt;this is son&lt;/div&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// }</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token maybe-class-name">MemoSon</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">memo</span><span class="token punctuation" style="color:#475569">(</span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">Son</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;我是子组件 我被渲染了&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token keyword" style="color:#0c4a6e">this</span><span class="token plain"> is son</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">ReactMemoDemo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> forceUpdate</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;父组件重新渲染了&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">MemoSon</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">forceUpdate</span><span class="token punctuation" style="color:#475569">(</span><span class="token known-class-name class-name" style="color:#0ea5e9">Math</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">random</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">update</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">ReactMemoDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250105160353905.png" alt="image-20250105160353905" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="reactmemo-比较机制">React.memo 比较机制<a href="#reactmemo-比较机制" class="hash-link" aria-label="Direct link to React.memo 比较机制" title="Direct link to React.memo 比较机制">​</a></h4>
<p>React 会对每一个 prop 进行 object.is 比较 返回 true 表示没有变化</p>
<p>PS: 对于引用类型 React 只关心引用是否变化</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="reactts-特殊的-children-属性">React+TS 特殊的 children 属性<a href="#reactts-特殊的-children-属性" class="hash-link" aria-label="Direct link to React+TS 特殊的 children 属性" title="Direct link to React+TS 特殊的 children 属性">​</a></h3>
<p>我们可以将类型设置为<code>ReactNode</code>作为<code>children</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">type </span><span class="token maybe-class-name">Props</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	</span><span class="token literal-property property">className</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> string</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	</span><span class="token literal-property property">children</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">ReactNode</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这样作为参数就可以即接受其他属性 也接受 children 了</p>
<h1>HOOKS</h1>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usestate">useState<a href="#usestate" class="hash-link" aria-label="Direct link to useState" title="Direct link to useState">​</a></h3>
<p>这是 React 中的一个 hook 函数 它允许我们向组件添加一个状态变脸,从而控制组件的渲染结果</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210141807465.png" alt="image-20241210141807465" class="img_ev3q"></p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setMsg</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>useState 是一个函数 返回值是一个数组</li>
<li>数组中的第一个参数是状态变量,第二个参数是 set 函数用于修改状态</li>
<li>useState 的参数将作为状态变量的初始值</li>
</ol>
<blockquote>
<p>修改规则</p>
</blockquote>
<p>在 React 中 状态被认为是只读的 我们应该替换而不是修改 直接修改状态不会得到视图的更新</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setMsg</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">getMsg</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// msg = &#x27;我是信息&#x27;  这么改是无效的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">setMsg</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//如果是对象作为参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setMsg</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;122ds&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">getMsg</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// msg = &#x27;我是信息&#x27;  这么改是无效的</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">setMsg</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token spread operator" style="color:#475569">...</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;123&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usecontext-组件通信">useContext 组件通信<a href="#usecontext-组件通信" class="hash-link" aria-label="Direct link to useContext 组件通信" title="Direct link to useContext 组件通信">​</a></h3>
<ol>
<li>使用 createContext 方法创建一个上下文对象 ctx=</li>
<li>在顶层组件 app 中 通过 ctx.Provider 提供数据</li>
<li>在底层组件 通过 useContext 钩子函数获取消费数据</li>
</ol>
<p>案例 :</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210143845871.png" alt="image-20241210143845871" class="img_ev3q"></p>
<p>我们需要将 app 的消息传递到 b</p>
<div class="language-TSX language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token maybe-class-name">MsgContext</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createContext</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">A</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is A</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">B</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">B</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> msg </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useContext</span><span class="token punctuation" style="color:#475569">(</span><span class="token maybe-class-name">MsgContext</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is B from APP:</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">msg</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> msg </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;this is app msg&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">MsgContext.Provider</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">msg</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">            this is app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">A</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">MsgContext.Provider</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="useeffect">useEffect<a href="#useeffect" class="hash-link" aria-label="Direct link to useEffect" title="Direct link to useEffect">​</a></h3>
<p>这是 React 中的一个 hook 函数 ,用于在 React 中创建不是由事件引起而是由渲染本身引起的操作,比如发送 AJAX 请求 更改 DOM 等</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210144624854.png" alt="image-20241210144624854" class="img_ev3q"></p>
<blockquote>
<p>基础使用</p>
</blockquote>
<p>需求: 在组件渲染完毕后,从服务器获得列表数据展示</p>
<p>语法:</p>
<div class="language-TSX language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol>
<li>参数 1 是一个函数,可以把它叫做副作用函数,函数内部可以放置要执行的操作</li>
<li>参数 2 是一个数组 ,数组里放置依赖项,不同依赖项会影响第一个参数的执行,当该参数是一个空数组的时候,副作用函数只会在组件渲染完毕后执行一次</li>
</ol>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">URL</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;http://geek.itheima.net/v1_0/channels&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setList</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">fetch</span><span class="token punctuation" style="color:#475569">(</span><span class="token constant" style="color:#0f172a">URL</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> jsonRes </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">await</span><span class="token plain"> res</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">json</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">jsonRes</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">setList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">jsonRes</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">channels</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;list&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> list</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      this is app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">ul</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">li</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">item</span><span class="token tag script language-javascript punctuation" style="color:#475569">.</span><span class="token tag script language-javascript property-access" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">li</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">ul</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">AppDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210150832714.png" alt="image-20241210150832714" class="img_ev3q"></p>
<blockquote>
<p>依赖项参数</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210150906961.png" alt="image-20241210150906961" class="img_ev3q"></p>
<div class="language-TSX language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">/*1. 没有依赖项*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// useEffect(() =&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     console.log(&quot;副作用函数执行了&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// });</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">/*2 传入空数组依赖*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// useEffect(() =&gt; {</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     console.log(&quot;副作用函数执行了&quot;)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// }, []);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;副作用函数执行了&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">setCount</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript" style="color:#0ea5e9">count </span><span class="token tag script language-javascript operator" style="color:#475569">+</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript number" style="color:#B5CEA8">1</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">+</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>清除副作用</p>
</blockquote>
<p>在<code>useEffect</code>中编写的由渲染本身引起的对接组件外部的操作，社区也经常把它叫做副作用操作，我们想在组件卸载时把这个定时器清理掉，这个过程就是清理副作用</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">Son</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> timer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setInterval</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;定时器执行中...&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1000</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">//     清楚副作用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">clearInterval</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">timer</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is son</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">show</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setShow</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      this is app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">show </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Son</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">setShow</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript boolean" style="color:#0ea5e9">false</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">卸载组件</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">AppDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usereducer">useReducer<a href="#usereducer" class="hash-link" aria-label="Direct link to useReducer" title="Direct link to useReducer">​</a></h3>
<ul>
<li>定义<code>redcuer</code>函数 (根据不同的 action 返回不同的新状态)</li>
<li>在组件中调用 useReducer 传入 reducer 函数和初始状态</li>
<li>事件触发的时候,通过 dispatch 函数 通过 reducer 要返回什么状态并且渲染 UI</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useReducer </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 根据不同的case 返回不同的状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">reducer</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">switch</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">case</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;INC&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> state </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">case</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;DEC&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> state </span><span class="token operator" style="color:#475569">-</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">case</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;SET&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">state </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token operator" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">ReducerDemo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 使用 use reducer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> dispatch</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useReducer</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">reducer</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;INC&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">+</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">state</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;DEC&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">-</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;SET&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">payload</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">100</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token known-class-name class-name" style="color:#0ea5e9">Set</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">ReducerDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这个钩子相当于 一个可以有多个修改 state 方法的 usestate</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usememo">useMemo<a href="#usememo" class="hash-link" aria-label="Direct link to useMemo" title="Direct link to useMemo">​</a></h3>
<p>作用：它在每次重新渲染的时候能够缓存计算的结果</p>
<blockquote>
<p>小案例</p>
</blockquote>
<ul>
<li>我们设置一个计算结果的方法 这个方法直接用 大括号的方式渲染</li>
<li>设置两个按钮 每次 usestate 发生变化 都会渲染页面 会导致两个按钮无论点击哪一个都会导致计算结果方法的内容出现变化</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">factorialOf</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">n</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;斐波那契函数执行了&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> n </span><span class="token operator" style="color:#475569">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">?</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain"> </span><span class="token operator" style="color:#475569">:</span><span class="token plain"> n </span><span class="token operator" style="color:#475569">*</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">factorialOf</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">n </span><span class="token operator" style="color:#475569">-</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">MemoDemo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 计算斐波那契之和</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> sumByCount </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">factorialOf</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">num</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setNum</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">sumByCount</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setCount</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">count </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">+</span><span class="token plain">count</span><span class="token operator" style="color:#475569">:</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setNum</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">num </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">+</span><span class="token plain">num</span><span class="token operator" style="color:#475569">:</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">num</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">MemoDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>useMemo 就是用来解决这种问题的</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useMemo</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">factorialOf</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">n</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;斐波那契函数执行了&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> n </span><span class="token operator" style="color:#475569">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">?</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain"> </span><span class="token operator" style="color:#475569">:</span><span class="token plain"> n </span><span class="token operator" style="color:#475569">*</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">factorialOf</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">n </span><span class="token operator" style="color:#475569">-</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">MemoDemo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setCount</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 计算斐波那契之和</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// const sumByCount = factorialOf(count)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> sumByCount </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useMemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">factorialOf</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">num</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setNum</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">sumByCount</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setCount</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">count </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">+</span><span class="token plain">count</span><span class="token operator" style="color:#475569">:</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setNum</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">num </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">+</span><span class="token plain">num</span><span class="token operator" style="color:#475569">:</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">num</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">MemoDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>就不会出现 点击 num 按钮也会触发求和方法情况了</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usecallback">useCallback<a href="#usecallback" class="hash-link" aria-label="Direct link to useCallback" title="Direct link to useCallback">​</a></h3>
<p>作用 在组件多次重新渲染的时候 缓存函数</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="自定义-hook">自定义 hook<a href="#自定义-hook" class="hash-link" aria-label="Direct link to 自定义 hook" title="Direct link to 自定义 hook">​</a></h3>
<p>暂时没有什么很好的例子 写一个比较简单的 之后再拓展</p>
<div class="language-tsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-tsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useToggle</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 可复用代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">value</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setValue</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">toggle</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setValue</span><span class="token punctuation" style="color:#475569">(</span><span class="token operator" style="color:#475569">!</span><span class="token plain">value</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> value</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> toggle </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">AppDemo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> value</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> toggle </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useToggle</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      this is app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">value </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is show Toggle</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">toggle</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">Toggle</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">AppDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210152744370.png" alt="" class="img_ev3q"></p>
<p>点击</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241210152754942.png" alt="" class="img_ev3q"></p>
<h1>Redux</h1>
<p>完整代码案例仓库 :<a href="https://gitee.com/cold-abyss_admin/react-redux-meituan" target="_blank" rel="noopener noreferrer">https://gitee.com/cold-abyss_admin/react-redux-meituan</a></p>
<p>Redux 是 React 最常用的集中状态管理工具,类似与 VUE 的 pinia(vuex) 可以独立于框架运行</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241211182447283.png" alt="image-20241211182447283" class="img_ev3q"></p>
<p>使用思路:</p>
<ol>
<li>定义一个<code>reducer</code>函数 根据当前想要做的修改返回一个新的状态</li>
<li>使用 createStore 方法传入 reducer 函数 生成一个 store 实例对象
<ol>
<li>subscribe 方法 订阅数据的变化(数据一旦变化，可以得到通知)</li>
<li>dispatch 方法提交 action 对象 告诉 reducer 你想怎么改数据</li>
<li>getstate 方法 获取最新的状态数据更新到视图中</li>
</ol>
</li>
</ol>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241211185420416.png" alt="image-20241211185420416" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置-redux">配置 Redux<a href="#配置-redux" class="hash-link" aria-label="Direct link to 配置 Redux" title="Direct link to 配置 Redux">​</a></h2>
<p>在 React 中使用 redux，官方要求安装俩个其他插件-和 react-redux</p>
<p>官方推荐我们使用 RTK(ReduxToolkit) 这是一套工具集合 可以简化书写方式</p>
<ul>
<li>简化 store 配置</li>
<li>内置 immer 可变式状态修改</li>
<li>内置 thunk 更好的异步创建</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="调试工具安装">调试工具安装<a href="#调试工具安装" class="hash-link" aria-label="Direct link to 调试工具安装" title="Direct link to 调试工具安装">​</a></h3>
<p>谷歌浏览器搜索 redux-devtool 安装 工具</p>
<blockquote>
<p>依赖安装</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#redux工具包</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">npm i @reduxjs/toolkit react-redux</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">#调试工具包</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">npm install --save-dev redux-devtools-extension</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213153131189.png" alt="image-20241213153131189" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="store-目录机构设计">store 目录机构设计<a href="#store-目录机构设计" class="hash-link" aria-label="Direct link to store 目录机构设计" title="Direct link to store 目录机构设计">​</a></h3>
<ul>
<li>通常集中状态管理的部分都会单独创建一个<code>store</code>目录</li>
<li>应用通常会有多个子 store 模块,所以创建一个<code>modules</code>进行内部业务的区分</li>
<li>store 中的入口文件 index.js 的作用是组合所有<code>modules</code>的子模块 并且导出 store</li>
</ul>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241211190849933.png" alt="image-20241211190849933" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速上手">快速上手<a href="#快速上手" class="hash-link" aria-label="Direct link to 快速上手" title="Direct link to 快速上手">​</a></h2>
<p>使用 react+redux 开发一个计数器 熟悉一下技术</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241211190956868.png" alt="image-20241211190956868" class="img_ev3q"></p>
<ol>
<li>
<p>使用 <code>Reacttoolkit</code> 创建 counterStore</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> counterStore </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;counter&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 初始化 state</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">count</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 修改状态的方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">increment</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token operator" style="color:#475569">++</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">decrement</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token operator" style="color:#475569">--</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 解构函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> increment</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> decrement </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> counterStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 获取reducer</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> counterStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> increment</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> decrement </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> reducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>在<code>index.js</code>集合 counter</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">counterStore</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./modules/counterStore&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> store </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">configureStore</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducer</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">couner</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> counterStore</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> store</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>为 React 注入<code>store</code>, <code>react-redux</code>负责把 Redux 和 React 链接 起来，内置 <code>Provider</code>组件 通过<code> store</code> 参数把创建好的 store 实例注入到应用中 找到项目中的<code>index.js</code></p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> root </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">createRoot</span><span class="token punctuation" style="color:#475569">(</span><span class="token dom variable" style="color:#0c4a6e">document</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">getElementById</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;root&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">root</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">render</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">React.StrictMode</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Provider</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">store</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">store</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">App</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Provider</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">React.StrictMode</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>使用 useSelector 获取到数据</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">App</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">App</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>使用 钩子函数 <code>useDispatch</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> inscrement</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> descrement </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./store/modules/counterStore&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">App</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;App&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">inscrement</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">+</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">descrement</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">-</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>查看效果</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241211194212353.png" alt="image-20241211194212353" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="提交-acntion-传参">提交 acntion 传参<a href="#提交-acntion-传参" class="hash-link" aria-label="Direct link to 提交 acntion 传参" title="Direct link to 提交 acntion 传参">​</a></h2>
<p>在<code>reducers</code>的同步修改方法中添加 action 对象参数,在调用<code>actionCreater</code>参数的时候传递参数,参数会被传递到 action 对象的<code>payload</code>属性上</p>
<p>我们继续的改造一下<code>counterStore</code></p>
<p><code>action</code>这个对象参数有个固定的属性叫 payload 用来接收传参</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241212183228071.png" alt="image-20241212183228071" class="img_ev3q"></p>
<p>然后 <code>app.js</code> 添加两个按钮 用来传递参数</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241212183251405.png" alt="image-20241212183251405" class="img_ev3q"></p>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241212183353807.png" alt="image-20241212183353807" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="reudx-action-异步操作">Reudx action 异步操作<a href="#reudx-action-异步操作" class="hash-link" aria-label="Direct link to Reudx action 异步操作" title="Direct link to Reudx action 异步操作">​</a></h2>
<p>区分同步和异步 action</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241212192017617.png" alt="image-20241212192017617" class="img_ev3q"></p>
<p>如果 action 的内容是 object 对象那就是同步 action,如果是函数 那就是异步 action</p>
<p>为什么我们需要异步 action 操作来使用请求 ?</p>
<blockquote>
<p>例子:</p>
<p>我们有两种方式可以实现 隔五分钟 上蛋炒饭</p>
<p>一种是客人自己思考五分钟</p>
<p>一种是客人点好 叫服务员五分钟之后上</p>
<p>这个服务员就是 redux 我们刚希望相关 aciton 的操作都在 redux 里完成这个时候同步 action 就不能满足我们的需求了 所以需要使用异步 action</p>
</blockquote>
<p>​ 异步操作的代码变化不大,我们创建 store 的写法保持不变 ,但是在函数中用异步操作的时候需要一个能异步执行函数 return 出一个新的函数而我们的异步操作卸载新的函数中.</p>
<p>异步 action 中一般都会调用一个同步 action</p>
<blockquote>
<p>案例: 从后端获取到列表展示到页面</p>
</blockquote>
<p>新建一个文件叫做 <code>ChannelStore.js</code> 然后编写对应的创建代码</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;axios&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> channelStore </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;channel&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">channelList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setChannel</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">channelList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> setChannel </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> channelStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 异步请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchChannelList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;http://geek.itheima.net/v1_0/channels&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setChannel</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">channels</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> channelStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> fetchChannelList </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> reducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后去<code>store</code>入口加入 channelStore</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">counterStore</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./modules/counterStore&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">channelStore</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./modules/channelStore&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> store </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">configureStore</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducer</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">counter</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> counterStore</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">channel</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> channelStore</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> store</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后就可以在<code>app.js</code>加入代码</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> fetchChannelList </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./store/modules/channelStore&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">App</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channelList </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">channel</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">fetchChannelList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">App</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">ul</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">channelList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">li</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">item</span><span class="token tag script language-javascript punctuation" style="color:#475569">.</span><span class="token tag script language-javascript property-access" style="color:#0ea5e9">id</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">li</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">ul</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>代码效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241212191240289.png" alt="image-20241212191240289" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="redux-hooks"><strong>redux hooks</strong><a href="#redux-hooks" class="hash-link" aria-label="Direct link to redux-hooks" title="Direct link to redux-hooks">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="useselector">useSelector<a href="#useselector" class="hash-link" aria-label="Direct link to useSelector" title="Direct link to useSelector">​</a></h3>
<p>它的作用是吧 store 中的数据映射到组件中</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里的 count 其实对应的就是</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241211192355704.png" alt="image-20241211192355704" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usedispatch">useDispatch<a href="#usedispatch" class="hash-link" aria-label="Direct link to useDispatch" title="Direct link to useDispatch">​</a></h3>
<p>它的作用是生成提交 action 对象的 dispatch 函数</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> inscrement</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> descrement </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./store/modules/counterStore&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">App</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> count </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">counter</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;App&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">inscrement</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">+</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">descrement</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">-</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="美团点餐界面小案例">美团点餐界面小案例<a href="#美团点餐界面小案例" class="hash-link" aria-label="Direct link to 美团点餐界面小案例" title="Direct link to 美团点餐界面小案例">​</a></h2>
<p>下载模板地址:</p>
<blockquote>
<p>git clone <a href="http://git.itcast.cn/heimaqianduan/redux-meituan.git" target="_blank" rel="noopener noreferrer">http://git.itcast.cn/heimaqianduan/redux-meituan.git</a></p>
</blockquote>
<p>效果与功能列表展示</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213143205796.png" alt="image-20241213143205796" class="img_ev3q"></p>
<p>基本的思路就是使用 RTK 来做状态管理,组件负责数据渲染和操作 action</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213144807698.png" alt="image-20241213144807698" class="img_ev3q"></p>
<p>我们在 store 文件夹下开始配置和编写 store 的使用逻辑</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="分类渲染">分类渲染<a href="#分类渲染" class="hash-link" aria-label="Direct link to 分类渲染" title="Direct link to 分类渲染">​</a></h3>
<p>先编写对应的 reducer 和异步请求逻辑</p>
<blockquote>
<p>takeaway.js</p>
<p>用于异步请求列表数据</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createStore </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./store&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;axios&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> foodsState </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createStore</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;foods&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">foodsList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> setFoodsList </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//异步获取部分</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchFoodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     异步逻辑</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot; http://localhost:3004/takeaway\n&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     调用dispatch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> fetchFoodsList </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> reducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>将子 store 管理起来 在 store 文件夹下编写一个 index.js 作为访问 store 的入口</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">foodsReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./modules/takeaway&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> store </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">configureStore</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducer</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">foods</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> foodsReducer</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> store</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后将 redux 和 react 连接起来 将 store 注入进去 选择根目录的 index.js</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createRoot </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-dom/client&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Provider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">App</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./App&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">store</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./store&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> root </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createRoot</span><span class="token punctuation" style="color:#475569">(</span><span class="token dom variable" style="color:#0c4a6e">document</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">getElementById</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;root&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">root</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">render</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Provider</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">store</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">store</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">App</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Provider</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>编写渲染页面</p>
</blockquote>
<p>在 app.js 里 遵循步骤开始操作 store</p>
<ol>
<li>使用<code>useDispatch</code>函数取得对象</li>
<li>使用 <code>useEffect </code>调用异步函数获取服务器数据</li>
<li>使用<code>useSelector</code> 拿到数据并且循环展示</li>
</ol>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">NavBar</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./components/NavBar&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Menu</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./components/Menu&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Cart</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./components/Cart&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">FoodsCategory</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./components/FoodsCategory&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./App.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">App</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 访问store拿到数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> foodsList </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foods</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">home</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 导航 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">NavBar</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 内容 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">content-wrap</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">content</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Menu</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">list-content</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">goods-list</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 外卖商品列表 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">foodsList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">FoodsCategory</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">                    </span><span class="token tag attr-name" style="color:#0c4a6e">key</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">item</span><span class="token tag script language-javascript punctuation" style="color:#475569">.</span><span class="token tag script language-javascript property-access" style="color:#0ea5e9">tag</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">                    </span><span class="token tag comment" style="color:#6A9955">// 列表标题</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">                    </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">item</span><span class="token tag script language-javascript punctuation" style="color:#475569">.</span><span class="token tag script language-javascript property-access" style="color:#0ea5e9">name</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">                    </span><span class="token tag comment" style="color:#6A9955">// 列表商品</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">                    </span><span class="token tag attr-name" style="color:#0c4a6e">foods</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">item</span><span class="token tag script language-javascript punctuation" style="color:#475569">.</span><span class="token tag script language-javascript property-access" style="color:#0ea5e9">foods</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">                  </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">            </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">          </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Cart</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213145927894.png" alt="image-20241213145927894" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="侧边栏渲染交互">侧边栏渲染.交互<a href="#侧边栏渲染交互" class="hash-link" aria-label="Direct link to 侧边栏渲染.交互" title="Direct link to 侧边栏渲染.交互">​</a></h3>
<p>我们需要在获取列表解构的时候 拿到属于左侧列表的数据</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213150225046.png" alt="image-20241213150225046" class="img_ev3q"></p>
<p>然后循环的展示在 menu 组件中 只需要把异步请求的数据放到 menu 组件中就可以展示侧边栏了</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">classNames</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;classnames&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Menu</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//    获取dispatch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 访问store拿到数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> foodsList </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foods</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> menus </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">tag</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">tag</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">nav className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;list-menu&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 添加active类名会变成激活状态 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">menus</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            key</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">tag</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;list-menu-item&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;active&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">nav</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213151100641.png" alt="image-20241213151100641" class="img_ev3q"></p>
<p>接下来编写交互操作 使用 RTK 来管理 activeindex</p>
<ul>
<li>新增<code>activeIndex</code>并且设置好对应的同步操作 action 方法以及导出</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;axios&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> foodsState </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;foods&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 商品列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">foodsList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 菜单激活值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">activeIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">changeActiveIndex</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">activeIndex</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> setFoodsList</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> changeActiveIndex </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//异步获取部分</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchFoodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     异步逻辑</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot; http://localhost:3004/takeaway\n&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     调用dispatch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> fetchFoodsList</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> changeActiveIndex </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> reducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后开始编写 menu 组件的点击效果</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213151806359.png" alt="image-20241213151806359" class="img_ev3q"></p>
<blockquote>
<p>代码修改 <code>menu/index.js</code></p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">classNames</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;classnames&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> changeActiveIndex </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../../store/modules/takeaway&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Menu</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//    获取dispatch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 访问store拿到数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> foodsList</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> activeIndex </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foods</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> menus </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">tag</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">tag</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">nav className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;list-menu&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 添加active类名会变成激活状态 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">menus</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">changeActiveIndex</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">index</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            key</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">tag</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token string" style="color:#64748b">&quot;list-menu-item&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              activeIndex </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> index </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;active&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">nav</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">Menu</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
<p>当点击的时候 index 就会切换到对应的 index 上 并且在点击当前 index 的时候选项高亮</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213153536781.png" alt="image-20241213153536781" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213153228472.png" alt="image-20241213153228472" class="img_ev3q"></p>
<blockquote>
<p>商品列表的切换显示</p>
</blockquote>
<p>点击侧边栏的时候 菜单栏需要显示对应侧边栏 index 的菜单</p>
<p>修改 <code>app.js</code>菜单栏标签的显示规则就行</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">App</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//    获取dispatch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//   异步请求数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">fetchFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 访问store拿到数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> foodsList</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> activeIndex </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foods</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;home&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 导航 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">NavBar</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 内容 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;content-wrap&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;content&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Menu</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;list-content&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-list&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 外卖商品列表 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">foodsList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> index</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  index </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> activeIndex </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">FoodsCategory</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                      key</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">tag</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                      </span><span class="token comment" style="color:#6A9955">// 列表标题</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                      name</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                      </span><span class="token comment" style="color:#6A9955">// 列表商品</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                      foods</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foods</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Cart</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="添加购物车">添加购物车<a href="#添加购物车" class="hash-link" aria-label="Direct link to 添加购物车" title="Direct link to 添加购物车">​</a></h3>
<p>首先找到 fooditem 中的 food 对象 一会我们使用 cartlist 的时候要用到 id 和 count</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213155814881.png" alt="image-20241213155814881" class="img_ev3q"></p>
<p>使用 RTK 管理 状态<code>cartlist</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;axios&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> foodsState </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;foods&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 商品列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">foodsList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 菜单激活值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">activeIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 购物车列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">cartList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 修改商品列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 更改activeIndex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">changeActiveIndex</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">activeIndex</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 添加购物车</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">addCart</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">//    通过payload.id去匹配cartList匹配,匹配到代表添加过</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> item </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">find</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token operator" style="color:#475569">++</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">push</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> setFoodsList</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> changeActiveIndex</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> addCart </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//异步获取部分</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchFoodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     异步逻辑</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot; http://localhost:3004/takeaway\n&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     调用dispatch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> fetchFoodsList</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> changeActiveIndex</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> addCart </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> reducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在<code>fooditem.jsx</code>编写 cartList 触发操作</p>
<ol>
<li>要记得给 count 一个默认值 不然会是 null</li>
<li>修改 classname 为 plus 的 span 标签新增点击事件</li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> addCart </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../../../store/modules/takeaway&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Foods</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter punctuation" style="color:#475569">{</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  id</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  picture</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  name</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  unit</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  description</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  food_tag_list</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  month_saled</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  like_ratio_desc</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  price</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  tag</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter">  count </span><span class="token parameter operator" style="color:#475569">=</span><span class="token parameter"> </span><span class="token parameter number" style="color:#B5CEA8">1</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token parameter"></span><span class="token parameter punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">dd className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cate-goods&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-img-wrap&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">img src</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">picture</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> alt</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-img&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-info&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-desc&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-title&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-detail&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-unit&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">unit</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-detail-text&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">description</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-tag&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">food_tag_list</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">join</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot; &quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-sales-volume&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-num&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">月售</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">month_saled</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-num&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">like_ratio_desc</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-price-count&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-price&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-price-unit&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">¥</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">price</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goods-count&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;plus&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token function" style="color:#0e7490">addCart</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    picture</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    name</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    unit</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    description</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    food_tag_list</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    month_saled</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    like_ratio_desc</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    price</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    tag</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">dd</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">Foods</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213161048251.png" alt="image-20241213161048251" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="统计订单区域">统计订单区域<a href="#统计订单区域" class="hash-link" aria-label="Direct link to 统计订单区域" title="Direct link to 统计订单区域">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/18.png" alt="image.png" class="img_ev3q"></p>
<p>实现思路</p>
<ol>
<li>基于 store 中的 cartList 的 length 渲染数量</li>
<li>基于 store 中的 cartList 累加 price * count</li>
<li>购物车 cartList 的 length 不为零则高亮</li>
<li>设置总价</li>
</ol>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 计算总价</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> totalPrice </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reduce</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> c</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> a </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> c</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">price</span><span class="token plain"> </span><span class="token operator" style="color:#475569">*</span><span class="token plain"> c</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">/* fill 添加fill类名购物车高亮*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">/* 购物车数量 */</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">onShow</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript function" style="color:#0e7490">classNames</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript string" style="color:#64748b">&quot;icon&quot;</span><span class="token tag script language-javascript punctuation" style="color:#475569">,</span><span class="token tag script language-javascript" style="color:#0ea5e9"> cartList</span><span class="token tag script language-javascript punctuation" style="color:#475569">.</span><span class="token tag script language-javascript property-access" style="color:#0ea5e9">length</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript operator" style="color:#475569">&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript number" style="color:#B5CEA8">0</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript operator" style="color:#475569">&amp;&amp;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript string" style="color:#64748b">&quot;fill&quot;</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9"></span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">className</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">cartCornerMark</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213182102778.png" alt="image-20241213182102778" class="img_ev3q"></p>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213182156616.png" alt="image-20241213182156616" class="img_ev3q"></p>
<blockquote>
<p><code>cart.jsx</code>全部代码</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">classNames</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;classnames&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Count</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../Count&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> fill </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;lodash/array&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Cart</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> cartList </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foods</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//   计算总价</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> totalPrice </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reduce</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> c</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> a </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> c</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">price</span><span class="token plain"> </span><span class="token operator" style="color:#475569">*</span><span class="token plain"> c</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> cart </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cartContainer&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 遮罩层 添加visible类名可以显示出来 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;cartOverlay&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cart&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* fill 添加fill类名可以切换购物车状态*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车数量 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;icon&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cartCornerMark&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车价格 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;main&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;price&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;payableAmount&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;payableAmountUnit&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">¥</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">totalPrice</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">toFixed</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">2</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;text&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">预估另需配送费 ¥</span><span class="token number" style="color:#B5CEA8">5</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 结算 or 起送 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goToPreview&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">去结算</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;minFee&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">¥</span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain">起送</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 添加visible类名 div会显示出来 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;cartPanel&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;header&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;text&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">购物车</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;clearCart&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">清空购物车</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车列表 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;scrollArea&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cart</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cartItem&quot;</span><span class="token plain"> key</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">img className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;shopPic&quot;</span><span class="token plain"> src</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">picture</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> alt</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;main&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;skuInfo&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;name&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;payableAmount&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;yuan&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">¥</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;price&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">price</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;skuBtnWrapper btnGroup&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Count</span><span class="token plain"> count</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">Cart</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="购物车列表功能">购物车列表功能<a href="#购物车列表功能" class="hash-link" aria-label="Direct link to 购物车列表功能" title="Direct link to 购物车列表功能">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213182736757.png" alt="image-20241213182736757" class="img_ev3q"></p>
<blockquote>
<p>修改<code>takeaway.js</code>内容如下 :</p>
<ul>
<li>新增加减购物车内的视频数量</li>
<li>清楚购物车</li>
<li>只有一项时删除商品选择</li>
</ul>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;axios&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> foodsState </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;foods&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 商品列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">foodsList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 菜单激活值</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">activeIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 购物车列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">cartList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 修改商品列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 更改activeIndex</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">changeActiveIndex</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">activeIndex</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 添加购物车</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">addCart</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">//    通过payload.id去匹配cartList匹配,匹配到代表添加过</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> item </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">find</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token operator" style="color:#475569">++</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">push</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     count增</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">increCount</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> item </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">find</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token operator" style="color:#475569">++</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     count减</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">decreCount</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> item </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">find</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">// 只有一项的时候将商品移除购物车</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">filter</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token operator" style="color:#475569">!=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token operator" style="color:#475569">--</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     清除购物车</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">clearCart</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">cartList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  clearCart</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  decreCount</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  increCount</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  setFoodsList</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  changeActiveIndex</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  addCart</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//异步获取部分</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchFoodsList</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     异步逻辑</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot; http://localhost:3004/takeaway\n&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     调用dispatch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setFoodsList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> foodsState</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token exports">  fetchFoodsList</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token exports">  changeActiveIndex</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token exports">  addCart</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token exports">  clearCart</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token exports">  decreCount</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token exports">  increCount</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token exports"></span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> reducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="购物车列表的显示和隐藏">购物车列表的显示和隐藏<a href="#购物车列表的显示和隐藏" class="hash-link" aria-label="Direct link to 购物车列表的显示和隐藏" title="Direct link to 购物车列表的显示和隐藏">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241213185233627.png" alt="image-20241213185233627" class="img_ev3q"></p>
<ul>
<li>使用 usestate 设置一个状态</li>
<li>点击统计的时候就展示</li>
<li>点击蒙层就不显示</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">classNames</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;classnames&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Count</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../Count&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useSelector </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  clearCart</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  decreCount</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  increCount</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports"></span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../../store/modules/takeaway&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Cart</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> cartList </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">foods</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//   计算总价</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> totalPrice </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reduce</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">a</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> c</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> a </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> c</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">price</span><span class="token plain"> </span><span class="token operator" style="color:#475569">*</span><span class="token plain"> c</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">visible</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setVisible</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cartContainer&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 遮罩层 添加visible类名可以显示出来 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setVisible</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;cartOverlay&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> visible </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;visible&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cart&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* fill 添加fill类名可以切换购物车状态*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车数量 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setVisible</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">!=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;icon&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cartCornerMark&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车价格 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;main&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;price&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;payableAmount&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;payableAmountUnit&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">¥</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">totalPrice</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">toFixed</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">2</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;text&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">预估另需配送费 ¥</span><span class="token number" style="color:#B5CEA8">5</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 结算 or 起送 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">?</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;goToPreview&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">去结算</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;minFee&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">¥</span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain">起送</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 添加visible类名 div会显示出来 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token function" style="color:#0e7490">classNames</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;cartPanel&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> visible </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;visible&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;header&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;text&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">购物车</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">clearCart</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;clearCart&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            清空购物车</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 购物车列表 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;scrollArea&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cartList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;cartItem&quot;</span><span class="token plain"> key</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">img className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;shopPic&quot;</span><span class="token plain"> src</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">picture</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> alt</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;main&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;skuInfo&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;name&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;payableAmount&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;yuan&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">¥</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;price&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">price</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;skuBtnWrapper btnGroup&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Count</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    onPlus</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">increCount</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    count</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    onMinus</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">decreCount</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                  </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">Cart</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>到这里 redux 的入门, 实践, 小案例就完成了 之后可能会更新一些关于 redux 底层原理的文章 会加入到其中</p>
<h1>zustand</h1>
<p>轻量级的状态管理工具</p>
<p>引入 :<code>npm install zustand</code></p>
<p>使用一个异步请求的方式 看看如何快速上手</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> create </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;zustand&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">URL</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;http://geek.itheima.net/v1_0/channels&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> useStore </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">create</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter keyword" style="color:#0c4a6e">set</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">count</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function-variable function" style="color:#0e7490">ins</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">// 使用参数set 参数为对象 或者方法就可以操作状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">set</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">count</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">count</span><span class="token plain"> </span><span class="token operator" style="color:#475569">+</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">channelList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 异步请求方式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function-variable function" style="color:#0e7490">fetchChannelList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">fetch</span><span class="token punctuation" style="color:#475569">(</span><span class="token constant" style="color:#0f172a">URL</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> jsonData </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> res</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">json</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">set</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">channelList</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> jsonData</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">channels</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">ZustandDemo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channelList</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> fetchChannelList </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useStore</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">fetchChannelList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">fetchChannelList</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">ul</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">channelList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">li key</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">li</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">ul</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">ZustandDemo</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="切片模式">切片模式<a href="#切片模式" class="hash-link" aria-label="Direct link to 切片模式" title="Direct link to 切片模式">​</a></h3>
<p>当一个 store 过于大的时候 可以采用切片的方式 进行区分 并且以一个 root 引入用于使用</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250105162445160.png" alt="image-20250105162445160" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250105162648051.png" alt="image-20250105162648051" class="img_ev3q"></p>
<h1>React 路由</h1>
<p>路由就是关键字和组件的映射关系,我们可以用关键字访问和展示对应组件</p>
<p>安装环境</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">npm i react-router-dom</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速上手-demo">快速上手 demo<a href="#快速上手-demo" class="hash-link" aria-label="Direct link to 快速上手 demo" title="Direct link to 快速上手 demo">​</a></h2>
<p>需求: 创建一个可以切换登录页和文章页的路由系统</p>
<p>找到 index.js 创建路由实例对象</p>
<p>语法: 链接组件可以使 jsx 也可以是导出的组件 path 是访问的路径</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token function" style="color:#0e7490">createBrowserRouter</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token string" style="color:#64748b">&#x27;/login&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">登录</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216141548415.png" alt="image-20241216141548415" class="img_ev3q"></p>
<blockquote>
<p>代码:</p>
<p><code>index.js</code></p>
<p>PS : 这里没有 app 的原因其实就是路由可以自己选择 有没有 app 作为入口完全看心情 之后会有路由默认设置所以不误在意</p>
</blockquote>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> router </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createBrowserRouter</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/login&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">我是登录页面</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/article&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">我是文章页面</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> root </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">createRoot</span><span class="token punctuation" style="color:#475569">(</span><span class="token dom variable" style="color:#0c4a6e">document</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">getElementById</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;root&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">root</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">render</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">React.StrictMode</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">RouterProvider</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">router</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript" style="color:#0ea5e9">router</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">RouterProvider</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">React.StrictMode</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216142308373.png" alt="image-20241216142308373" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="抽象路由模块">抽象路由模块<a href="#抽象路由模块" class="hash-link" aria-label="Direct link to 抽象路由模块" title="Direct link to 抽象路由模块">​</a></h3>
<p>之前的快速上手 简单的了解了一下路由的语法和使用 ,现在模拟一下日常的开发使用 ,我们需要将路由模块抽象出来</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216142441831.png" alt="image-20241216142441831" class="img_ev3q"></p>
<p>我们创建路由需要对应的文件夹 放入<code>page</code>文件夹下 一般我们路由的文件夹还会存放一些组件需要的其他资源,内容还是刚才的内容</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216142744216.png" alt="image-20241216142744216" class="img_ev3q"></p>
<p>之后创建 <code>router</code>文件夹存放路由 js 文件</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216143007772.png" alt="image-20241216143007772" class="img_ev3q"></p>
<p>之后只需要在 根目录下的<code>index.js</code>中把路由引入进来 就完成了抽象效果</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="路由导航">路由导航<a href="#路由导航" class="hash-link" aria-label="Direct link to 路由导航" title="Direct link to 路由导航">​</a></h2>
<p>路由系统中的多个路由之间需要进行路由跳转，并且在跳转的同时有可能需要传递参数进行通信
<img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216143133616.png" alt="image-20241216143133616" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="声明式导航">声明式导航<a href="#声明式导航" class="hash-link" aria-label="Direct link to 声明式导航" title="Direct link to 声明式导航">​</a></h3>
<p>声明式导航是指在代码中 通过 <code>&lt;Link/&gt;</code>标签去设置要跳转去哪里</p>
<p>语法 : <code>&lt;Linl to=&quot;/article&quot;&gt;文章&lt;/Link&gt;</code></p>
<blockquote>
<p>Login 组件内容</p>
</blockquote>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Link</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Login</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">我是登录页面</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">to</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">/article</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216143547010.png" alt="image-20241216143547010" class="img_ev3q"></p>
<p>它其实被解析成一个 a 链接 指向文章页的访问地址(path)</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="编程式导航">编程式导航<a href="#编程式导航" class="hash-link" aria-label="Direct link to 编程式导航" title="Direct link to 编程式导航">​</a></h3>
<p>编程式导航是指通过 <code>useNavigate</code> 钩子得到导航方法，以参数+触发事件来控制跳转比起声明式要更加灵活</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Link</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useNavigate </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Login</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> nav </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useNavigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">我是登录页面</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/*    声明式*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">to</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">/article</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/*    编程式*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">nav</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript string" style="color:#64748b">&quot;/article&quot;</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="传参">传参<a href="#传参" class="hash-link" aria-label="Direct link to 传参" title="Direct link to 传参">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216144056310.png" alt="image-20241216144056310" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="usesearchparams">useSearchParams<a href="#usesearchparams" class="hash-link" aria-label="Direct link to useSearchParams" title="Direct link to useSearchParams">​</a></h4>
<blockquote>
<p>代码</p>
</blockquote>
<p><code>Login.jsx</code></p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">nav</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript string" style="color:#64748b">&#x27;/article?name=&quot;jack&quot;&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>Article.jsx</code></p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useSearchParams </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Article</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">params</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSearchParams</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> params</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;name&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      我是文章页面</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216144821324.png" alt="image-20241216144821324" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="useparams">useParams<a href="#useparams" class="hash-link" aria-label="Direct link to useParams" title="Direct link to useParams">​</a></h4>
<p>这种方式类似 vue 的动态路由传参,</p>
<ol>
<li>
<p>我们需要再路由页面给路径一个占位符</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216145206689.png" alt="image-20241216145206689" class="img_ev3q"></p>
</li>
<li>
<p>之后编写代码</p>
<p>Login 传参 :</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">nav</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript string" style="color:#64748b">&quot;/article/1001/JACK&quot;</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Article 接受:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> params </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useParams</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">我是文章页面</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">         </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">  id: </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">params</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">         </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">  name:</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">params</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216145521063.png" alt="image-20241216145521063" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="嵌套路由">嵌套路由<a href="#嵌套路由" class="hash-link" aria-label="Direct link to 嵌套路由" title="Direct link to 嵌套路由">​</a></h2>
<p>就是多级路由的嵌套 在开发中往往需要来回的跳转 有一级路由包含多个二级路由等等嵌套情况</p>
<blockquote>
<p>比如下图:</p>
<p>看成一个管理系统 一个一级路由包含两个二级路由</p>
<p>左侧的列表用于展示路由关键字</p>
<p>右边的路由出口展示点击对应关键字出现的内容</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216145638543.png" alt="image-20241216145638543" class="img_ev3q"></p>
<ul>
<li>使用 <code>children</code>属性配置路由嵌套关系</li>
<li>使用 <code>&lt;Outlet&gt;</code>组件配置子路由渲染位置</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="案例">案例<a href="#案例" class="hash-link" aria-label="Direct link to 案例" title="Direct link to 案例">​</a></h3>
<p>分别创建内容 一级路由 layout 和两个二级路由</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216150223093.png" alt="image-20241216150223093" class="img_ev3q"></p>
<p>然后编写嵌套路由需要的 router</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;/&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Layout</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">children</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;board&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Board</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;about&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">About</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>layout 代码</p>
</blockquote>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Link</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Outlet</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Layout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      一级路由 layout</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">to</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">/board</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">面板</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">to</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">/about</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">关于</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Outlet</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216151019452.png" alt="image-20241216151019452" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="默认二级路由">默认二级路由<a href="#默认二级路由" class="hash-link" aria-label="Direct link to 默认二级路由" title="Direct link to 默认二级路由">​</a></h3>
<p>当访问的是一级路由的时候 默认的二级路由可以得到渲染</p>
<p>语法:</p>
<p><code>layout</code></p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Layout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      一级路由 layout</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">to</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">/board</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">面板</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">to</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">/</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">关于</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag class-name" style="color:#0ea5e9">Link</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Outlet</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>router.js</code></p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;/&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Layout</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">children</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;board&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">Board</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">index</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag class-name" style="color:#0ea5e9">About</span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216151246843.png" alt="image-20241216151246843" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="404-路由">404 路由<a href="#404-路由" class="hash-link" aria-label="Direct link to 404 路由" title="Direct link to 404 路由">​</a></h2>
<p>当浏览器输入的路径在路由中无法找到或者不存在 我们就需要一个可以兜底的组件 来提升用户体验</p>
<ul>
<li>准备一个 <code>NotFound</code>的组件</li>
<li>在路由表数组末尾 用<code>*</code>号座位 path 配置路由</li>
</ul>
<blockquote>
<p><code>NOTFOUND JS</code></p>
</blockquote>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Notfound</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">this is NotFound Page</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>router</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;*&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Notfound</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216152215586.png" alt="image-20241216152215586" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="路由模式">路由模式<a href="#路由模式" class="hash-link" aria-label="Direct link to 路由模式" title="Direct link to 路由模式">​</a></h2>
<p>各个主流框架的路由常用的路由模式有俩种，history 模式和 hash 模式, ReactRouter 分别由 createBrowerRouter 和 createHashRouter 函数负责创建</p>























<table><thead><tr><th>路由模式</th><th>url 表现</th><th>底层原理</th><th>是否需要后端支持</th></tr></thead><tbody><tr><td>history</td><td>url/login</td><td>history 对象 + pushState 事件</td><td>需要</td></tr><tr><td>hash</td><td>url/#/login</td><td>监听 hashChange 事件</td><td>不需要</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hooks-1">Hooks<a href="#hooks-1" class="hash-link" aria-label="Direct link to Hooks" title="Direct link to Hooks">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usenavigate">useNavigate<a href="#usenavigate" class="hash-link" aria-label="Direct link to useNavigate" title="Direct link to useNavigate">​</a></h3>
<p>用于编程式导航</p>
<p>语法:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> nav </span><span class="token operator" style="color:#475569">=</span><span class="token plain">  </span><span class="token function" style="color:#0e7490">useNavigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript function" style="color:#0e7490">nav</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript string" style="color:#64748b">&quot;/article&quot;</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="usesearchparams-1">useSearchParams<a href="#usesearchparams-1" class="hash-link" aria-label="Direct link to useSearchParams" title="Direct link to useSearchParams">​</a></h3>
<p>用于路由跳转的时候接受传递的参数</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">nav</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript string" style="color:#64748b">&#x27;/article?name=&quot;jack&quot;&#x27;</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这个时候我们在文章组件中编写</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useSearchParams </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Article</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">params</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSearchParams</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> params</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;name&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      我是文章页面</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="useparams-1">useParams<a href="#useparams-1" class="hash-link" aria-label="Direct link to useParams" title="Direct link to useParams">​</a></h3>
<p>这种方式类似 vue 的动态路由传参,</p>
<ol>
<li>
<p>我们需要再路由页面给路径一个占位符</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241216145206689.png" alt="image-20241216145206689" class="img_ev3q"></p>
</li>
<li>
<p>之后编写代码</p>
<p>Login 传参 :</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">onClick</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#475569">=</span><span class="token tag script language-javascript punctuation" style="color:#475569">{</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript arrow operator" style="color:#475569">=&gt;</span><span class="token tag script language-javascript" style="color:#0ea5e9"> </span><span class="token tag script language-javascript function" style="color:#0e7490">nav</span><span class="token tag script language-javascript punctuation" style="color:#475569">(</span><span class="token tag script language-javascript string" style="color:#64748b">&quot;/article/1001/JACK&quot;</span><span class="token tag script language-javascript punctuation" style="color:#475569">)</span><span class="token tag script language-javascript punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">文章</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Article 接受:</p>
<div class="language-jsx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-jsx codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> params </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useParams</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">我是文章页面</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">         </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">  id: </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">params</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">         </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text">  name:</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">params</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain-text"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain-text">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h1>极客博客</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="项目配置">项目配置<a href="#项目配置" class="hash-link" aria-label="Direct link to 项目配置" title="Direct link to 项目配置">​</a></h2>
<p>初始化项目 这里依赖的使用:</p>
<ol>
<li>react &amp; react-dom 18</li>
</ol>
<blockquote>
<p>规范 src 目录</p>
</blockquote>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">-src</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -apis           项目接口函数</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -assets         项目资源文件，比如，图片等</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -components     通用组件</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -pages          页面组件</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -store          集中状态管理</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -utils          工具，比如，token、axios 的封装等</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -App.js         根组件</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -index.css      全局样式</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  -index.js       项目入口</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218140717964.png" alt="image-20241218140717964" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="路径别名">路径别名<a href="#路径别名" class="hash-link" aria-label="Direct link to 路径别名" title="Direct link to 路径别名">​</a></h3>
<blockquote>
<p>项目背景：在业务开发过程中文件夹的嵌套层级可能会比较深，通过传统的路径选择会比较麻烦也容易出错，设置路径别名可以简化这个过程</p>
</blockquote>
<p>安装 <code>npm i @craco/craco -D</code></p>
<p>然后创建 <code>craco.config.js</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> path </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">require</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;path&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">module</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// webpack 配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">webpack</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 配置别名</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">alias</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">// 约定：使用 @ 表示 src 文件所在路径</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token string-property property">&quot;@&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">resolve</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;src&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>替换 packge.json 的启动方式 就可以使用了</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token string-property property">&quot;scripts&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token string-property property">&quot;start&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;craco start&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token string-property property">&quot;build&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;craco build&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token string-property property">&quot;test&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;craco test&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token string-property property">&quot;eject&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-scripts eject&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>配置代码编辑器识别</p>
</blockquote>
<p>在跟目录创建 <code>jsconfig.json</code></p>
<div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token property">&quot;compilerOptions&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token property">&quot;baseUrl&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;.&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token property">&quot;paths&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token property">&quot;@/*&quot;</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token string" style="color:#64748b">&quot;src/*&quot;</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这样就有路径提示了</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="安装-scss">安装 scss<a href="#安装-scss" class="hash-link" aria-label="Direct link to 安装 scss" title="Direct link to 安装 scss">​</a></h3>
<ol>
<li>安装解析 sass 的包：<code>npm i sass -D</code></li>
<li>创建全局样式文件：<code>index.scss</code></li>
</ol>
<p>安装完之后在<code>index.scss</code>中写下样式查看是否安装成功</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218141014055.png" alt="image-20241218141014055" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="组件库-antd">组件库 antd<a href="#组件库-antd" class="hash-link" aria-label="Direct link to 组件库 antd" title="Direct link to 组件库 antd">​</a></h3>
<p>组件库帮助我们提升开发效率，其中使用最广的就是 antD</p>
<p>导入依赖: <code>npm i antd</code></p>
<p>安装图标库: <code>npm install @ant-design/icons --save</code></p>
<blockquote>
<p>测试</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Button</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">App</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">this</span><span class="token plain"> is a web app</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">test</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218141415282.png" alt="image-20241218141415282" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置路由">配置路由<a href="#配置路由" class="hash-link" aria-label="Direct link to 配置路由" title="Direct link to 配置路由">​</a></h3>
<blockquote>
<p>导入依赖</p>
</blockquote>
<ul>
<li>安装路由包 <code> react-router-dom</code></li>
<li>准备基础路由组件 <code>Layout</code>和<code>Login</code></li>
<li>编写配置</li>
</ul>
<p>在<code>pages</code>中创建好对应的文件夹和组件</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218141719222.png" alt="image-20241218141719222" class="img_ev3q"></p>
<p>然后配置对应的路由文件</p>
<ul>
<li>在<code>router</code>文件夹中创建 index.js</li>
<li>配置对应的组件路由映射</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createBrowserRouter </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Layout</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../pages/Layout&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Login</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../pages/Login&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> router </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createBrowserRouter</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/login&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Login</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后使用 <code>provider</code> 将路由放入根文件 使用</p>
<p><code>index.js</code>:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">ReactDOM</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-dom/client&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">RouterProvider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">router</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./router&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> root </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">createRoot</span><span class="token punctuation" style="color:#475569">(</span><span class="token dom variable" style="color:#0c4a6e">document</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">getElementById</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;root&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">root</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">render</span><span class="token punctuation" style="color:#475569">(</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">RouterProvider</span><span class="token plain"> router</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">RouterProvider</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>配置完重启 这样基础的路由就配置好了</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218142213871.png" alt="image-20241218142213871" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="封装-requset-请求模块">封装 requset 请求模块<a href="#封装-requset-请求模块" class="hash-link" aria-label="Direct link to 封装 requset 请求模块" title="Direct link to 封装 requset 请求模块">​</a></h3>
<p>因为项目中会发送很多网络请求,所以我们可以将 <code>axios</code>做好统一封装 方便统一管理和复用</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218150947403.png" alt="image-20241218150947403" class="img_ev3q"></p>
<blockquote>
<p>导入依赖</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">npm i axios</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后在<code>utils</code>中编写 <code>request</code>配置 js</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">axios</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;axios&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> request </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">create</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">baseURL</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;http://geek.itheima.net/v1_0&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">timeout</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">5000</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 添加请求拦截器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">request</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">interceptors</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">use</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">config</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> config</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#0ea5e9">Promise</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reject</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 添加响应拦截器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">request</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">interceptors</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">use</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">response</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 2xx 范围内的状态码都会触发该函数。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 对响应数据做点什么</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 超出 2xx 范围的状态码都会触发该函数。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 对响应错误做点什么</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#0ea5e9">Promise</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reject</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> request </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在<code>utils</code>中创建 index.js 作为统一的工具类使用入口,方便管理工具类</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> request </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils/request&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> request </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="登录模块">登录模块<a href="#登录模块" class="hash-link" aria-label="Direct link to 登录模块" title="Direct link to 登录模块">​</a></h2>
<p><code>@/pages/login/index.jsx</code> 使用 antd 创建登录页面的内容解构</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.sass&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Button</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Card</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Form</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Input</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">logo</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/assets/logo.png&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Login</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;login&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;login-container&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">img className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;login-logo&quot;</span><span class="token plain"> src</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">logo</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> alt</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 登录表单 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Input</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;large&quot;</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入手机号&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Input</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;large&quot;</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入验证码&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"> htmlType</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;submit&quot;</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;large&quot;</span><span class="token plain"> block</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              登录</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Card</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>样式文件 <code>index.css</code></p>
<div class="language-scss codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scss codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">.login {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  width: 100%;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  height: 100%;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  position: absolute;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  left: 0;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  top: 0;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  background: center/cover url(&quot;~@/assets/login.png&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  .login-logo {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    width: 200px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    height: 60px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    display: block;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    margin: 0 auto 20px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  .login-container {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    width: 440px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    height: 360px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    position: absolute;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    left: 50%;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    top: 50%;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    transform: translate(-50%, -50%);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    box-shadow: 0 0 50px rgb(0 0 0 / 10%);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  .login-checkbox-label {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    color: #1890ff;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218142514925.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="表单校验">表单校验<a href="#表单校验" class="hash-link" aria-label="Direct link to 表单校验" title="Direct link to 表单校验">​</a></h3>
<p>使用 antd form 组件中的表单校验属性来完成 表单校验</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218145050289.png" alt="image-20241218145050289" class="img_ev3q"></p>
<p>现在在 login 组件中加入基础的表单校验</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 登录表单 */</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;mobile&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                                </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                                </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;请输入11位手机号&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                            </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Input</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;large&quot;</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入手机号&quot;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;code&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                                </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                                </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;请输入验证码&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                            </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Input</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;large&quot;</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入验证码&quot;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218145511598.png" alt="image-20241218145511598" class="img_ev3q"></p>
<p>基础校验设置好之后 我们需要根据业务来设计定制校验 如</p>
<ul>
<li>手机号必须是 11 位并且必须是数字 正则表达式</li>
<li>并且输入框失去焦点也出发校验 在 Form 标签添加属性 <code>validateTrigger=&quot;onBlur&quot;</code></li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;mobile&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;请输入手机号&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">pattern</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token regex regex-delimiter">/</span><span class="token regex regex-source language-regex anchor function" style="color:#0e7490">^</span><span class="token regex regex-source language-regex">1</span><span class="token regex regex-source language-regex char-class char-class-punctuation punctuation" style="color:#475569">[</span><span class="token regex regex-source language-regex char-class range">3</span><span class="token regex regex-source language-regex char-class range range-punctuation operator" style="color:#475569">-</span><span class="token regex regex-source language-regex char-class range">9</span><span class="token regex regex-source language-regex char-class char-class-punctuation punctuation" style="color:#475569">]</span><span class="token regex regex-source language-regex char-set class-name" style="color:#0ea5e9">\d</span><span class="token regex regex-source language-regex quantifier number" style="color:#B5CEA8">{9}</span><span class="token regex regex-source language-regex anchor function" style="color:#0e7490">$</span><span class="token regex regex-delimiter">/</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;请输入正确的手机号&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Input</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;large&quot;</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入手机号&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>提交数据</p>
</blockquote>
<p>继续查看官方文档 案例 里面有一个 <code>onFinish </code>的回调方法 ,并且放到 form 组件的属性里就可以看到传递的信息了</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218150515014.png" alt="image-20241218150515014" class="img_ev3q"></p>
<blockquote>
<p>代码修改</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">values</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;Success:&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> values</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token plain"> onFinish</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onFinish</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> validateTrigger</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;onBlur&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>设置好之后我们再次点击登录按钮就可以在控制台看到传递的 json 信息了</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241218150849701.png" alt="image-20241218150849701" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-redux-管理-token">使用 Redux 管理 token<a href="#使用-redux-管理-token" class="hash-link" aria-label="Direct link to 使用 Redux 管理 token" title="Direct link to 使用 Redux 管理 token">​</a></h3>
<p><code>token</code>可以作为用户表示数据 其实一般我们的登录操作就是为了获取对应账号下的 token 权限,这个 token 需要我们在前端全局化的共享 所以需要使用 <code>redux</code>来管理</p>
<blockquote>
<p>依赖</p>
</blockquote>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">npm i react-redux @reduxjs/toolkit</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>配置 redux</p>
</blockquote>
<p>在<code>store</code>文件夹创建对应的文件结构</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220142828152.png" alt="image-20241220142828152" class="img_ev3q"></p>
<p>然后编写 <code>user.js</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> request </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> userStore </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;user&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 数据状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">token</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 同步修改方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">userInfo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 解构出actionCreater</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> setToken </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> userStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 获取reducer函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> userReducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> userStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 异步方法封装</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchLogin</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">loginForm</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">post</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;/authorizations&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> loginForm</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> fetchLogin </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> userReducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在<code>index.js</code>配置统一管理 reducer</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> configureStore </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">userReducer</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./modules/user&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">configureStore</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducer</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 注册子模块</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">user</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> userReducer</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在 src 下目录中的<code>index.js</code>注入 store</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Provider</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">store</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./store&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> root </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">ReactDOM</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">createRoot</span><span class="token punctuation" style="color:#475569">(</span><span class="token dom variable" style="color:#0c4a6e">document</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">getElementById</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;root&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">root</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">render</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Provider</span><span class="token plain"> store</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">store</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">RouterProvider</span><span class="token plain"> router</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Provider</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="触发登录操作">触发登录操作<a href="#触发登录操作" class="hash-link" aria-label="Direct link to 触发登录操作" title="Direct link to 触发登录操作">​</a></h3>
<p>我们使用的是黑马的后端模版 所以需要使用它提供的数据</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">手机号 </span><span class="token number" style="color:#B5CEA8">13888888888</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">code </span><span class="token number" style="color:#B5CEA8">246810</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>输入之后就可以看到成功的拿到了 该用户的 token</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220143845001.png" alt="image-20241220143845001" class="img_ev3q"></p>
<p>redux 也成功的保存的 token 数据</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220144307990.png" alt="image-20241220144307990" class="img_ev3q"></p>
<blockquote>
<p>登陆后的操作</p>
</blockquote>
<ul>
<li>我们需要跳转到主页</li>
<li>提示用户登录状态</li>
</ul>
<p>在 login jsx 中修改 onfinish 方法内容实现跳转</p>
<p>PS: 篇幅问题只展示了 js 代码 return 中的样式就不再过多展示</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Button</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Card</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Form</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Input</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> message </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">logo</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/assets/logo.png&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useDispatch </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-redux&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> fetchLogin </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/store/modules/user&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useNavigate </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Login</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useNavigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">values</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">fetchLogin</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">values</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//     跳转到主页</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">navigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    message</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">success</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;登陆成功&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220144618910.png" alt="image-20241220144618910" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="token-持久化">token 持久化<a href="#token-持久化" class="hash-link" aria-label="Direct link to token 持久化" title="Direct link to token 持久化">​</a></h3>
<p>使用 localStorage+redux 管理 token</p>
<p>编写逻辑 :先查询本地有没有 如果没有就请求,然后保存在本地</p>
<blockquote>
<p>修改 reducer 请求 token 的方法内容</p>
</blockquote>
<p>这里为什么没有用 sessionStorage 而是选择用 localStorage 呢 因为我们需要更长时间的持久化 session 关闭浏览器就被清空了,之后登出的时候会显式的清除 token</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> userStore </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;user&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 数据状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">token</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">sessionStorage</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">getItem</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;token_key&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">||</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 同步修改方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token dom variable" style="color:#0c4a6e">sessionStorage</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">setItem</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;token_key&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="封装-token-操作方法">封装 token 操作方法<a href="#封装-token-操作方法" class="hash-link" aria-label="Direct link to 封装 token 操作方法" title="Direct link to 封装 token 操作方法">​</a></h4>
<p>创建工具类</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220145847204.png" alt="image-20241220145847204" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 封装存取方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">TOKENKEY</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;token_key&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">token</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">localStorage</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">setItem</span><span class="token punctuation" style="color:#475569">(</span><span class="token constant" style="color:#0f172a">TOKENKEY</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> token</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">localStorage</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">getItem</span><span class="token punctuation" style="color:#475569">(</span><span class="token constant" style="color:#0f172a">TOKENKEY</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">clearToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">localStorage</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">removeItem</span><span class="token punctuation" style="color:#475569">(</span><span class="token constant" style="color:#0f172a">TOKENKEY</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> setToken</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> getToken</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> clearToken </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后在入口 index 导入工具类</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> request </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils/request&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> clearToken</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> getToken</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> setToken </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils/token&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> request</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> getToken</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> setToken</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> clearToken </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>修改获取的 token 的代码改为使用工具类</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> userStore </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;user&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 数据状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">token</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">||</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 同步修改方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">//这里是使用别名的setToken方法 是再import setToken as _setToken</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">_setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="在-axios-请求中携带-token">在 Axios 请求中携带 token<a href="#在-axios-请求中携带-token" class="hash-link" aria-label="Direct link to 在 Axios 请求中携带 token" title="Direct link to 在 Axios 请求中携带 token">​</a></h3>
<p>后端需要 token 来判断是否能够使用接口 ,所以我们需要修改<code>request</code>工具来让他携带 token 请求</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220150647679.png" alt="image-20241220150647679" class="img_ev3q"></p>
<p>在请求拦截其中拿到 token 并且注入 token</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 添加请求拦截器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">request</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">interceptors</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">request</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">use</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">config</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 如果有token就携带没有就正常</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> token </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 按照后端的要求加入token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      config</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">headers</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Authorization</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">Bearer </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">token</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> config</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#0ea5e9">Promise</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reject</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>测试</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220151207539.png" alt="image-20241220151207539" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="使用-token-做路由权限控制">使用 token 做路由权限控制<a href="#使用-token-做路由权限控制" class="hash-link" aria-label="Direct link to 使用 token 做路由权限控制" title="Direct link to 使用 token 做路由权限控制">​</a></h3>
<p>在没有 token 的时候 不允许访问需要权限的路由</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220151553164.png" alt="image-20241220151553164" class="img_ev3q"></p>
<p>创建组件 <code>AuthRoute</code></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220152217542.png" alt="image-20241220152217542" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 封装高级组件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//核心逻辑:根据token控制跳转</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> getToken </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Navigate</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function maybe-class-name" style="color:#0e7490">AuthRoute</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter punctuation" style="color:#475569">{</span><span class="token parameter"> children </span><span class="token parameter punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> token </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">token</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">children</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Navigate</span><span class="token plain"> to</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;/login&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> replace</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改 router.js</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createBrowserRouter </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Layout</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../pages/Layout&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Login</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;../pages/Login&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">AuthRoute</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/components/AuthRoute&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> router </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createBrowserRouter</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">AuthRoute</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">AuthRoute</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/login&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Login</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> router</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>删除 token 之后刷新界面 就会被强制定向到 login</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="主页面">主页面<a href="#主页面" class="hash-link" aria-label="Direct link to 主页面" title="Direct link to 主页面">​</a></h2>
<blockquote>
<p>依赖</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220153439026.png" alt="image-20241220153439026" class="img_ev3q"></p>
<p>用来初始化样式的第三方库</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">npm install normalize.css</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后将其引入到程序入门 index.js</p>
<p><strong>实现步骤</strong></p>
<ol>
<li>打开 antd/Layout 布局组件文档，找到示例：顶部-侧边布局-通栏</li>
<li>拷贝示例代码到我们的 Layout 页面中</li>
<li>分析并调整页面布局</li>
</ol>
<blockquote>
<p>主页面模版</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Layout</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Menu</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Popconfirm</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">DiffOutlined</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">EditOutlined</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">HomeOutlined</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">LogoutOutlined</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports"></span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@ant-design/icons&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Outlet</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useNavigate </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token maybe-class-name">Sider</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">Layout</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> items </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">label</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;首页&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">key</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">icon</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">HomeOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">label</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;文章管理&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">key</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/article&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">icon</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">DiffOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">label</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;创建文章&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">key</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/publish&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">icon</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">EditOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">GeekLayout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useNavigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onMenuClick</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">router</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">navigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">key</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Header</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;header&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;logo&quot;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;user-info&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;user-name&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">冷环渊</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;user-logout&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Popconfirm</span><span class="token plain"> title</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;是否确认退出？&quot;</span><span class="token plain"> okText</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;退出&quot;</span><span class="token plain"> cancelText</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;取消&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">LogoutOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> 退出</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Popconfirm</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Header</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Sider</span><span class="token plain"> width</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">200</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;site-layout-background&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Menu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            mode</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;inline&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            theme</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;dark&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            defaultSelectedKeys</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token string" style="color:#64748b">&quot;1&quot;</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            items</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">items</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onMenuClick</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">height</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;100%&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">borderRight</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Menu</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Sider</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;layout-content&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">padding</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Outlet</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">GeekLayout</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>主页面样式文件</p>
</blockquote>
<div class="language-scss codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-scss codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">.ant-layout {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  height: 100%;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">.header {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  padding: 0;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">.logo {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  width: 200px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  height: 60px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  background: url(&quot;~@/assets/logo.png&quot;) no-repeat center / 160px auto;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">.layout-content {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  overflow-y: auto;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">.user-info {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  position: absolute;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  right: 0;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  top: 0;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  padding-right: 20px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  color: #fff;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  .user-name {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    margin-right: 20px;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  .user-logout {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    display: inline-block;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    cursor: pointer;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">.ant-layout-header {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  padding: 0 !important;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="二级路由设置">二级路由设置<a href="#二级路由设置" class="hash-link" aria-label="Direct link to 二级路由设置" title="Direct link to 二级路由设置">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220153841966.png" alt="image-20241220153841966" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220153853223.png" alt="image-20241220153853223" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置二级路由">配置二级路由<a href="#配置二级路由" class="hash-link" aria-label="Direct link to 配置二级路由" title="Direct link to 配置二级路由">​</a></h4>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> router </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createBrowserRouter</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;/&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">AuthRoute</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">GeekLayout</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">AuthRoute</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">children</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;/&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Home</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Home</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;article&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Article</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Article</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;publish&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Publish</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Publish</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">!</span><span class="token operator" style="color:#475569">--</span><span class="token spread operator" style="color:#475569">...</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">省略</span><span class="token operator" style="color:#475569">--</span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>渲染对应关系</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;layout-content&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">padding</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Outlet</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Outlet</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="路由联动">路由联动<a href="#路由联动" class="hash-link" aria-label="Direct link to 路由联动" title="Direct link to 路由联动">​</a></h4>
<p>将路由的 key 设置成路由的跳转地址</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> items </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">label</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;首页&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">key</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;/&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">icon</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">HomeOutlined</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">label</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;文章管理&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">key</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;/article&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">icon</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">DiffOutlined</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">label</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;创建文章&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">key</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;/publish&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">icon</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">EditOutlined</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">GeekLayout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useNavigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onMenuClick</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">router</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token function" style="color:#0e7490">navigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">key</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">!</span><span class="token operator" style="color:#475569">--</span><span class="token plain">省略</span><span class="token operator" style="color:#475569">--</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Sider</span><span class="token plain"> width</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">200</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;site-layout-background&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Menu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        mode</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;inline&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        theme</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;dark&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        defaultSelectedKeys</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token string" style="color:#64748b">&#x27;1&#x27;</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        items</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">items</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onMenuClick</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token literal-property property">height</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;100%&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">borderRight</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Menu</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Sider</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;layout-content&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token literal-property property">padding</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">20</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Outlet</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="菜单点击高亮">菜单点击高亮<a href="#菜单点击高亮" class="hash-link" aria-label="Direct link to 菜单点击高亮" title="Direct link to 菜单点击高亮">​</a></h4>
<p><code> ueslocation</code>获取当前的路由位置,并且将<code>MENU</code>中的属性<code>defaultSelectedKeys</code> -&gt; <code>SelectedKeys</code>内容为获取到的 pathname</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">GeekLayout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useNavigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onMenuClick</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">router</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token function" style="color:#0e7490">navigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">router</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">key</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 获取到当前点击的路由</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">location</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useLocation</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> selectedKey </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">location</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">pathname</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Header</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;header&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">!</span><span class="token operator" style="color:#475569">--</span><span class="token plain">省略</span><span class="token operator" style="color:#475569">--</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Header</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Sider</span><span class="token plain"> width</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">200</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;site-layout-background&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Menu</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        mode</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;inline&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        theme</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;dark&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token maybe-class-name">SelectedKeys</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">selectedKey</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        items</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">items</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onMenuClick</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token literal-property property">height</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;100%&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">borderRight</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Menu</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Sider</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">!</span><span class="token operator" style="color:#475569">--</span><span class="token plain">省略</span><span class="token operator" style="color:#475569">--</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Layout</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">GeekLayout</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220160701656.png" alt="image-20241220160701656" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="展示个人信息">展示个人信息<a href="#展示个人信息" class="hash-link" aria-label="Direct link to 展示个人信息" title="Direct link to 展示个人信息">​</a></h3>
<p><strong>实现步骤</strong></p>
<ol>
<li>在 Redux 的 store 中编写获取用户信息的相关逻辑</li>
<li>在 Layout 组件中触发 action 的执行</li>
<li>在 Layout 组件使用使用 store 中的数据进行用户名的渲染</li>
</ol>
<blockquote>
<p>修改 <code>store/module/user.js</code></p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createSlice </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@reduxjs/toolkit&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> getToken</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> request</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> setToken </span><span class="token imports keyword module" style="color:#0c4a6e">as</span><span class="token imports"> _setToken </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> userStore </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createSlice</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">name</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;user&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 数据状态</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">initialState</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">token</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token operator" style="color:#475569">||</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">userInfo</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 同步修改方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">_setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setUserInfo</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token parameter punctuation" style="color:#475569">,</span><span class="token parameter"> action</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">userInfo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> action</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">payload</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 解构出actionCreater</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> setToken</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setUserInfo </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> userStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">actions</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 获取reducer函数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> userReducer </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> userStore</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">reducer</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 异步方法封装</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchLogin</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">loginForm</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">post</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;/authorizations&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> loginForm</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchUserInfo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> request</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;/user/profile&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setUserInfo</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> fetchLogin</span><span class="token exports punctuation" style="color:#475569">,</span><span class="token exports"> fetchUserInfo </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> userReducer</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>主页面布局显示</p>
</blockquote>
<p>这里展示的是新增的代码 需要去修改 header 里的 user-name 的内容改为我们获取到的 username</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> dispatch </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useDispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSelector</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">user</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">userInfo</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">fetchUserInfo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">dispatch</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Header</span><span class="token plain"> className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;header&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;logo&quot;</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;user-info&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;user-name&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">span className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;user-logout&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Popconfirm</span><span class="token plain"> title</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;是否确认退出？&quot;</span><span class="token plain"> okText</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;退出&quot;</span><span class="token plain"> cancelText</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;取消&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">LogoutOutlined</span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> 退出</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Popconfirm</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">span</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Header</span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241220161204553.png" alt="image-20241220161204553" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="退出登录">退出登录<a href="#退出登录" class="hash-link" aria-label="Direct link to 退出登录" title="Direct link to 退出登录">​</a></h3>
<ul>
<li>需要二次确认退出登录</li>
<li>清除用户信息</li>
<li>跳转回 login 页面</li>
</ul>
<blockquote>
<p>绑定事件</p>
<p>在<code>layout.jsx</code>中找到退出相关的组件<code>Popconfirm</code></p>
<p>这个组件有是否确认事件的绑定方法 <code>onConfirm={onConfirm}</code></p>
</blockquote>
<p>​ 在<code>store</code>文件夹下<code>user.js</code>的<code>reducer</code>中增加清除用户信息的方法</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 同步修改方法</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">reducers</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token function" style="color:#0e7490">clearUserInfo</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">state</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            state</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">userInfo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token function" style="color:#0e7490">clearToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在响应事件方法中调用方法 清除用户信息</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onConfirm</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">clearUserInfo</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">navigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;/login&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226160632157.png" alt="image-20241226160632157" class="img_ev3q"></p>
<blockquote>
<p>效果</p>
</blockquote>
<p>点击确认退出后 成功被定向到登录页面</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226160656121.png" alt="image-20241226160656121" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="处理失效-token">处理失效 token<a href="#处理失效-token" class="hash-link" aria-label="Direct link to 处理失效 token" title="Direct link to 处理失效 token">​</a></h3>
<p>为了方便管理以及控制性能 token 一般都会有一个有效时间, 通常后端 token 失效都会返回 401 所以我们可以监控后端返回的状态码 来做后续操作 如 退出登录 或 续费 token</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226160857875.png" alt="image-20241226160857875" class="img_ev3q"></p>
<p>来到 request 工具类中的响应拦截器 拿到响应结果并且校验状态码是否是 401</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">request</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">interceptors</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">use</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">response</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 2xx 范围内的状态码都会触发该函数。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 对响应数据做点什么</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> response</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 超出 2xx 范围的状态码都会触发该函数。</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 401代表token失效 需要清除当前token</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">status</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">401</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">clearToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">// 这里有问题 是因为使用createBrownRouter创建的实例无法使用navigate,暂时先这么写 后续会修改</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      router</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">navigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;/login&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">then</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token dom variable" style="color:#0c4a6e">window</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">location</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reload</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token known-class-name class-name" style="color:#0ea5e9">Promise</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">reject</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">error</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>如何查看效果?</p>
<p>在控制台将本地的 token 修改几位 刷新就可以触发 401 之后查看效果是否成功</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主页可视化图表">主页可视化图表<a href="#主页可视化图表" class="hash-link" aria-label="Direct link to 主页可视化图表" title="Direct link to 主页可视化图表">​</a></h3>
<p>使用 <code>echarts</code></p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">npm i echarts</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>基础 demo</p>
</blockquote>
<p>从官方文档复制个 demo 进来</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useRef </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#475569">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#0c4a6e">as</span><span class="token imports"> echarts</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;echarts&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Home</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> chartRef </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useRef</span><span class="token punctuation" style="color:#475569">(</span><span class="token keyword null nil" style="color:#0c4a6e">null</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 1. 生成实例</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> myChart </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> echarts</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">init</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">chartRef</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 2. 准备图表参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> option </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">xAxis</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;category&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">data</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token string" style="color:#64748b">&quot;Mon&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Tue&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Wed&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Thu&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Fri&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Sat&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Sun&quot;</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">yAxis</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;value&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">series</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token literal-property property">data</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token number" style="color:#B5CEA8">120</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">200</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">150</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">80</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">70</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">110</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">130</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;bar&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 3. 渲染参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    myChart</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">setOption</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">option</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div ref</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">chartRef</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;400px&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">height</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;300px&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="封装-echarts-组件">封装 echarts 组件<a href="#封装-echarts-组件" class="hash-link" aria-label="Direct link to 封装 echarts 组件" title="Direct link to 封装 echarts 组件">​</a></h4>
<p>将内容抽象出来,将不一样的部分抽象为参数适配</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226162624923.png" alt="image-20241226162624923" class="img_ev3q"></p>
<p>然后将图标代码提取出来 开始修改: 将 title, x 数据, y 数据, 样式作为参数</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useRef </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports operator" style="color:#475569">*</span><span class="token imports"> </span><span class="token imports keyword module" style="color:#0c4a6e">as</span><span class="token imports"> echarts</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;echarts&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token maybe-class-name">BarChart</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  xData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  sData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  style </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;400px&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">height</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;300px&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> chartRef </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useRef</span><span class="token punctuation" style="color:#475569">(</span><span class="token keyword null nil" style="color:#0c4a6e">null</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 1. 生成实例</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> myChart </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> echarts</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">init</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">chartRef</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 2. 准备图表参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> option </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">text</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">xAxis</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;category&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">data</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> xData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">yAxis</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;value&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">series</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token literal-property property">data</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> sData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;bar&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 3. 渲染参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    myChart</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">setOption</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">option</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">sData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> xData</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div ref</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">chartRef</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">style</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> </span><span class="token exports maybe-class-name">BarChart</span><span class="token exports"> </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>修改 home 内容</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">BarChart</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/pages/Home/components/BarChat&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Home</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">BarChart</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;三个框架满意度&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        xData</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token string" style="color:#64748b">&quot;Vue&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;React&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Angular&quot;</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        sData</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token number" style="color:#B5CEA8">2000</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">5000</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1000</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">BarChart</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;三个框架使用数量&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        xData</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token string" style="color:#64748b">&quot;Vue&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;React&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;Angular&quot;</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        sData</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token number" style="color:#B5CEA8">200</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">500</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">100</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;500px&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">height</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;400px&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-封装">API 封装<a href="#api-封装" class="hash-link" aria-label="Direct link to API 封装" title="Direct link to API 封装">​</a></h2>
<p>我们需要优化项目格式, 需要将接口请求维护在一个固定的模块里,但是如何编写每个团队都有区别 仅提供参考</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226164312404.png" alt="image-20241226164312404" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226163642447.png" alt="image-20241226163642447" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 用户相关的所有请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> request </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//登录请求</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">loginAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">formData</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/authorizations&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">method</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;POST&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">data</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> formData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 获取用户信息</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getProfileAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/user/profile&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">method</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;GET&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>修改 store 中 user.js 的调用方式</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 异步方法封装</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchLogin</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">loginForm</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">loginAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">loginForm</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setToken</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">token</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">fetchUserInfo</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">dispatch</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getProfileAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">dispatch</span><span class="token punctuation" style="color:#475569">(</span><span class="token function" style="color:#0e7490">setUserInfo</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="文章发布">文章发布<a href="#文章发布" class="hash-link" aria-label="Direct link to 文章发布" title="Direct link to 文章发布">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="基础文章结构">基础文章结构<a href="#基础文章结构" class="hash-link" aria-label="Direct link to 基础文章结构" title="Direct link to 基础文章结构">​</a></h3>
<p>开发三个步骤:</p>
<ol>
<li>基础的文章发布</li>
<li>封面上传</li>
<li>带封面的文章</li>
</ol>
<blockquote>
<p>静态结构</p>
</blockquote>
<p><code>publish/index.js</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Card</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Breadcrumb</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Form</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Button</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Radio</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Input</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Upload</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Space</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Select</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports"></span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">PlusOutlined</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@ant-design/icons&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Link</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;./index.scss&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token maybe-class-name">Option</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">Select</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Publish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;publish&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Breadcrumb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            items</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Link</span><span class="token plain"> to</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">首页</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Link</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;发布文章&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          labelCol</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">span</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          wrapperCol</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">span</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">16</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          initialValues</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;标题&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;title&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;请输入文章标题&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Input</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入文章标题&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">400</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;频道&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;channel_id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;请选择文章频道&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Select</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请选择文章频道&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">400</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Option</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">推荐</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Option</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Select</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;内容&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;content&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;请输入文章内容&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> wrapperCol</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">offset</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">4</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Space</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;large&quot;</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"> htmlType</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;submit&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                发布文章</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Space</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Card</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> </span><span class="token maybe-class-name">Publish</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><code>index.scss</code></p>
<div class="language-css codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-css codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token selector class" style="color:#D7BA7D">.publish</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token property">position</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> relative</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token selector class" style="color:#D7BA7D">.ant-upload-list</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token selector class" style="color:#D7BA7D">.ant-upload-list-picture-card-container</span><span class="token selector punctuation" style="color:#475569">,</span><span class="token selector" style="color:#D7BA7D"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token selector" style="color:#D7BA7D">  </span><span class="token selector class" style="color:#D7BA7D">.ant-upload-select</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token property">width</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">146</span><span class="token unit">px</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token property">height</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">146</span><span class="token unit">px</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token selector class" style="color:#D7BA7D">.publish-quill</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token selector class" style="color:#D7BA7D">.ql-editor</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token property">min-height</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">300</span><span class="token unit">px</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226165048854.png" alt="image-20241226165048854" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="富文本编辑器">富文本编辑器<a href="#富文本编辑器" class="hash-link" aria-label="Direct link to 富文本编辑器" title="Direct link to 富文本编辑器">​</a></h3>
<p>导入依赖:</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">npm i react-quill@2.0.0-beta.2</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>开发方式:</p>
<ol>
<li>安装依赖 导入编辑器和配置文件</li>
<li>渲染组件调整编辑器样式和数据链接</li>
</ol>
<p>在需要放入富文本编辑器的位置放入代码</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">//在文章头部导入需要的样式</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-quill/dist/quill.snow.css&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">/*富文本编辑器*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;内容&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;content&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;请输入文章内容&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot; &quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">ReactQuill</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;publish-quill&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    theme</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;snow&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入文章内容&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226165938872.png" alt="image-20241226165938872" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="频道数据渲染">频道数据渲染<a href="#频道数据渲染" class="hash-link" aria-label="Direct link to 频道数据渲染" title="Direct link to 频道数据渲染">​</a></h3>
<ul>
<li>添加新的接口到 <code>apis</code></li>
<li>使用 useState 维护数据</li>
<li>使用 <code>useEffect</code>将数据存入 state</li>
<li>绑定到下拉框</li>
</ul>
<blockquote>
<p>添加 apis</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226172159279.png" alt="image-20241226172159279" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> request </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/utils&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 获取文章频道列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getChannels</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/channels&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">method</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;GET&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>发布界面</p>
</blockquote>
<ul>
<li>使用 usestate 维护列表 并且使用 useEffect 请求数据</li>
<li>渲染数据</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">channels</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setChannels</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getChannelList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getChannels</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setChannels</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">channels</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">getChannelList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;频道&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;channel_id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;请选择文章频道&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Select</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请选择文章频道&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">300</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">channels</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Option</span><span class="token plain"> key</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Option</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Select</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>提交接口</p>
</blockquote>
<ul>
<li>使用 form 组件收集数据</li>
<li>根据文档处理表单数据</li>
</ul>
<p>这里由于 react 和富文本的兼容问题 我们需要手动的获取到富文本的内容将他放入到对应表单属性的 value 中</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">form</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">useForm</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">formValue</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token console class-name" style="color:#0ea5e9">console</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">log</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">formValue</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onRichTextChange</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        form</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">setFieldsValue</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token literal-property property">content</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> value</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">           </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/*富文本编辑器*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;内容&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;content&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        rules</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">{</span><span class="token literal-property property">required</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">message</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;请输入文章内容&#x27;</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">ReactQuill</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        className</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;publish-quill&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        theme</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;snow&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请输入文章内容&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        onChange</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onRichTextChange</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">ReactQuill</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226180920253.png" alt="image-20241226180920253" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="发布基础文章">发布基础文章<a href="#发布基础文章" class="hash-link" aria-label="Direct link to 发布基础文章" title="Direct link to 发布基础文章">​</a></h3>
<p>在文章 apis 中新增请求方法</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 提交文章表单</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/mp/articles?draft=false&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">method</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;POST&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    data</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>提交表单</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">formValue</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> title </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> formValue</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reqData </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">cover</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">images</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//   提交数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">createArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20241226181425586.png" alt="image-20241226181425586" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="上传封面">上传封面<a href="#上传封面" class="hash-link" aria-label="Direct link to 上传封面" title="Direct link to 上传封面">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="基础上传">基础上传<a href="#基础上传" class="hash-link" aria-label="Direct link to 基础上传" title="Direct link to 基础上传">​</a></h4>
<p>我们需要一个上传小组件 类似下图:</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103160106608.png" alt="image-20250103160106608" class="img_ev3q"></p>
<blockquote>
<p>结构代码</p>
</blockquote>
<p>将代码放入 <code>publish组件</code>内容标签的上面 ,</p>
<ul>
<li>这里我们需要编写 upload 的上传地址</li>
<li>上传后后端回给到我们一个文件列表我们需要保存用于添加文章信息</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Publish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 上传图片</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">imageList</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setImageList</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onUploadChange</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">info</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setImageList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">info</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">fileList</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;封面&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;type&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">单图</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">三图</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">无图</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Upload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;image&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        listType</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;picture-card&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        showUploadList</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        action</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;http://geek.itheima.net/v1_0/upload&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        onChange</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onUploadChange</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">marginTop</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">8</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">PlusOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Upload</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103161651056.png" alt="image-20250103161651056" class="img_ev3q"></p>
<p>上传成功了</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="切换封面类型">切换封面类型<a href="#切换封面类型" class="hash-link" aria-label="Direct link to 切换封面类型" title="Direct link to 切换封面类型">​</a></h4>
<p>我们需要根据封面的是三个单选框的选项来决定是否需要显示上传图标</p>
<ul>
<li>选择单图或者三图就展示上传图标</li>
<li>选择无图 就隐藏</li>
</ul>
<p>通过 Radio 组件的<code>onChange</code>回调函数就可以拿到我们的对应选项 ,</p>
<p>这样在选择无图的时候 上传组件就会隐藏</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 记录图片上传类型选择</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">imageType</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setImageType</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 类型选择回调</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onTypeChange</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">value</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">setImageType</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">target</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;封面&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;type&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token plain"> onChange</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onTypeChange</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">单图</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">三图</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">无图</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">imageType </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Upload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;image&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      listType</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;picture-card&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      showUploadList</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      action</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;http://geek.itheima.net/v1_0/upload&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      onChange</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onUploadChange</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">marginTop</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">8</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Upload</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p>无图:</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103162658047.png" alt="image-20250103162658047" class="img_ev3q"></p>
<p>有图:</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103162707227.png" alt="image-20250103162707227" class="img_ev3q"></p>
<p>这里需要注意就是我们之前的静态模版有一个默认属性 type 是 1 这会导致上传组件的显示有问题,改为和 state 一样的 0 即可</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103162833115.png" alt="image-20250103162833115" class="img_ev3q"></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="控制上传图片的数量">控制上传图片的数量<a href="#控制上传图片的数量" class="hash-link" aria-label="Direct link to 控制上传图片的数量" title="Direct link to 控制上传图片的数量">​</a></h4>
<p>我们需要控制 如:</p>
<ul>
<li>单图:就一张</li>
<li>三图:就三张</li>
</ul>
<p>只需要将上传绑定的 type 显示他的最大数量就行了,</p>
<p>ps: 问题 安全性不高 而且之前替换掉的图片还是会占用信息</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103163750884.png" alt="image-20250103163750884" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="发表带图片的文章">发表带图片的文章<a href="#发表带图片的文章" class="hash-link" aria-label="Direct link to 发表带图片的文章" title="Direct link to 发表带图片的文章">​</a></h3>
<p>我们之前上传基础文章的时候 有一个属性 : <code>cover</code>是空白的 现在我们需要将 imagelist 和这个 cover 绑定 就可以上传封面了</p>
<ul>
<li>我们需要从新组装一下图片列表的信息 上传只需要我们提供 url</li>
</ul>
<blockquote>
<p>修改方法 <code>onFinish</code></p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">formValue</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 判断type和图片数量是否相等</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">imageList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">!==</span><span class="token plain"> imageType</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> message</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">warning</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;封面类型和图片数量不匹配&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> title </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> formValue</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reqData </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">cover</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> imageType</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">images</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> imageList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//   提交数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">createArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">then</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">message</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;OK&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      message</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">success</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;文章发布成功&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      form</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">resetFields</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">setImageType</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103164257941.png" alt="image-20250103164257941" class="img_ev3q"></p>
<p>提交之后的信息</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103164446703.png" alt="image-20250103164446703" class="img_ev3q"></p>
<p>上传成功</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="校验类型">校验类型<a href="#校验类型" class="hash-link" aria-label="Direct link to 校验类型" title="Direct link to 校验类型">​</a></h4>
<p>我们需要避免 三图封面只上传了两张图片的情况 所以还需要在上传方法中增加一些判断</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">formValue</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 判断type和图片数量是否相等</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">imageList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">!==</span><span class="token plain"> imageType</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> message</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">warning</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;封面类型和图片数量不匹配&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> title </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> formValue</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reqData </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">cover</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> imageType</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">images</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> imageList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//   提交数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">createArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="文章列表">文章列表<a href="#文章列表" class="hash-link" aria-label="Direct link to 文章列表" title="Direct link to 文章列表">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="放入结构">放入结构<a href="#放入结构" class="hash-link" aria-label="Direct link to 放入结构" title="Direct link to 放入结构">​</a></h3>
<p>小细节:</p>
<ol>
<li>导入语言包 让日期选择可以识别中文</li>
<li>Select 组件配合 Form.Item 使用时，如何配置默认选中项
<code>&lt;Form initialValues={{ status: null }} &gt;</code></li>
</ol>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Link</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 导入资源</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Breadcrumb</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Button</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Card</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">DatePicker</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Form</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Radio</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Select</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Space</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Table</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Tag</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports"></span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">locale</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd/es/date-picker/locale/zh_CN&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">DeleteOutlined</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">EditOutlined</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@ant-design/icons&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token maybe-class-name">Option</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">Select</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token maybe-class-name">RangePicker</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">DatePicker</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Article</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 准备列数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> columns </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;封面&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;cover&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">120</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function-variable function" style="color:#0e7490">render</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">cover</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">img</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            src</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cover</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#475569">[</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">||</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;img404&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            width</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">80</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            height</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">60</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            alt</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;标题&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;title&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">220</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;状态&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;status&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function-variable function" style="color:#0e7490">render</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Tag</span><span class="token plain"> color</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;green&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">审核通过</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Tag</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;发布时间&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;pubdate&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;阅读数&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;read_count&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;评论数&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;comment_count&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;点赞数&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;like_count&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;操作&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function-variable function" style="color:#0e7490">render</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Space</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;middle&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"> shape</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;circle&quot;</span><span class="token plain"> icon</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">EditOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              danger</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              shape</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;circle&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              icon</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">DeleteOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Space</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 准备表格body数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> data </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;8218&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">comment_count</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">cover</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">images</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">like_count</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">pubdate</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;2019-03-11 09:00:00&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">read_count</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">2</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">status</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">2</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;wkwebview离线化加载h5资源解决方案&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Breadcrumb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            items</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Link</span><span class="token plain"> to</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">首页</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Link</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;文章列表&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">marginBottom</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token plain"> initialValues</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">status</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;状态&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;status&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">全部</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">草稿</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">2</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">审核通过</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;频道&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;channel_id&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Select</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请选择文章频道&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              defaultValue</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;lucy&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">120</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Option</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;jack&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token maybe-class-name">Jack</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Option</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Option</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;lucy&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token maybe-class-name">Lucy</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Option</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Select</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;日期&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;date&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 传入locale属性 控制中文显示*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">RangePicker</span><span class="token plain"> locale</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">locale</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">RangePicker</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"> htmlType</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;submit&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">marginLeft</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">40</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              筛选</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Card</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/*表格区域*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"> title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">根据筛选条件共查询到 count 条结果：</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Table</span><span class="token plain"> rowKey</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;id&quot;</span><span class="token plain"> columns</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">columns</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> dataSource</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">data</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Card</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="频道模块渲染">频道模块渲染<a href="#频道模块渲染" class="hash-link" aria-label="Direct link to 频道模块渲染" title="Direct link to 频道模块渲染">​</a></h3>
<p>我们这次采用 自定义业务 hook 的方式实现获取频道信息</p>
<ul>
<li>创建一个 use 打头的函数</li>
<li>在函数中封装业务逻辑并且导出状态数据</li>
<li>组件中导入函数和执行解构状态数据使用</li>
</ul>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103171229511.png" alt="image-20250103171229511" class="img_ev3q"></p>
<blockquote>
<p>代码</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 封装获取频道列表的逻辑</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> getChannels </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/apis/article&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useChannel</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//     1. 获取频道列表的所有逻辑</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">channels</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setChannels</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getChannelList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getChannels</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">setChannels</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">channels</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">getChannelList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//     2. 把数据导出</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channels </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token exports punctuation" style="color:#475569">{</span><span class="token exports"> useChannel </span><span class="token exports punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这样就可以去改造一下之前的 publish 获取频道的逻辑 也可以在新的组件中直接使用频道数据</p>
<blockquote>
<p>将数据放入文章编辑中</p>
</blockquote>
<p>找到频道标签 修改 options</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  channels</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Option</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Option</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250103171814720.png" alt="image-20250103171814720" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="渲染文章列表数据">渲染文章列表数据<a href="#渲染文章列表数据" class="hash-link" aria-label="Direct link to 渲染文章列表数据" title="Direct link to 渲染文章列表数据">​</a></h3>
<ul>
<li>声明请求方法</li>
<li>useEffect 拿到数据</li>
<li>渲染数据</li>
</ul>
<blockquote>
<p>请求方法 <code>/apis/article.js </code></p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">//获取文章列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">params</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/mp/articles&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">method</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;GET&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    params</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>Article 组件</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Link</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 导入资源</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Breadcrumb</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Button</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Card</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">DatePicker</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Form</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Radio</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Select</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Space</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Table</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports">  </span><span class="token imports maybe-class-name">Tag</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token imports"></span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports">locale</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;antd/es/date-picker/locale/zh_CN&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useChannel </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/hooks/useChannel&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> getArticleAPI </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/apis/article&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">DeleteOutlined</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">EditOutlined</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@ant-design/icons&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token maybe-class-name">Option</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">Select</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token maybe-class-name">RangePicker</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token maybe-class-name">DatePicker</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#0e7490">Article</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 获取频道数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channels </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useChannel</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 准备列数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> columns </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;封面&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;cover&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">120</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function-variable function" style="color:#0e7490">render</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">cover</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">img</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            src</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">cover</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#475569">[</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">||</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;img404&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            width</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">80</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            height</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">60</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            alt</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;标题&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;title&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">220</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;状态&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;status&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function-variable function" style="color:#0e7490">render</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Tag</span><span class="token plain"> color</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;green&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">审核通过</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Tag</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;发布时间&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;pubdate&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;阅读数&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;read_count&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;评论数&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;comment_count&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;点赞数&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;like_count&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;操作&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function-variable function" style="color:#0e7490">render</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Space</span><span class="token plain"> size</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;middle&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"> shape</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;circle&quot;</span><span class="token plain"> icon</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">EditOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              danger</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              shape</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;circle&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              icon</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">DeleteOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Space</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 获取文章列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setList</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token function" style="color:#0e7490">setList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">results</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Breadcrumb</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            items</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Link</span><span class="token plain"> to</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">首页</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Link</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;文章列表&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">marginBottom</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token plain"> initialValues</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">status</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;状态&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;status&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">全部</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">草稿</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Radio</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token number" style="color:#B5CEA8">2</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">审核通过</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Radio</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Group</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;频道&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;channel_id&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Select</span><span class="token plain"> placeholder</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;请选择文章频道&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">width</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">120</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">channels</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Option</span><span class="token plain"> value</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">name</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Option</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Select</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token plain"> label</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;日期&quot;</span><span class="token plain"> name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;date&quot;</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/* 传入locale属性 控制中文显示*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">RangePicker</span><span class="token plain"> locale</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">locale</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">RangePicker</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"> htmlType</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;submit&quot;</span><span class="token plain"> style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">marginLeft</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">40</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">              筛选</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Button</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access maybe-class-name">Item</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Form</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Card</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token comment" style="color:#6A9955">/*表格区域*/</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"> title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">根据筛选条件共查询到 </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">list</span><span class="token template-string interpolation punctuation" style="color:#475569">.</span><span class="token template-string interpolation property-access">length</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string string" style="color:#64748b"> 条结果：</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Table</span><span class="token plain"> rowKey</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;id&quot;</span><span class="token plain"> columns</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">columns</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> dataSource</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Card</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="文章状态">文章状态<a href="#文章状态" class="hash-link" aria-label="Direct link to 文章状态" title="Direct link to 文章状态">​</a></h3>
<p>我们需要根据不同的文章状态显示不同的 tag , 我们在用枚举渲染的方式实现这个多种状态的显示,</p>
<p>我们之前的代码中有专门控制每一列显示的数组</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104155009184.png" alt="image-20250104155009184" class="img_ev3q"></p>
<p>这里我们就可以根据 拿到的数据 利用 <code>render</code>属性 来渲染出来需要的 tag</p>
<p>通过接口文档我们知道目前支持两种状态 :</p>
<ul>
<li>1 待审核</li>
<li>2 通过</li>
</ul>
<blockquote>
<p>文章列表组件中添加</p>
<ul>
<li>枚举代码</li>
<li>并且将状态对象的 render 关联到输出枚举内容即可</li>
</ul>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">// 文章状态枚举</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> status </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token number" style="color:#B5CEA8">1</span><span class="token operator" style="color:#475569">:</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Tag</span><span class="token plain"> color</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;warning&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">待审核</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Tag</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token number" style="color:#B5CEA8">2</span><span class="token operator" style="color:#475569">:</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Tag</span><span class="token plain"> color</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;success&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">审核通过</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Tag</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;状态&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token literal-property property">dataIndex</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&#x27;status&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token function-variable function" style="color:#0e7490">render</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token parameter">data</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> status</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">data</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104155609389.png" alt="image-20250104155609389" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="文章筛选">文章筛选<a href="#文章筛选" class="hash-link" aria-label="Direct link to 文章筛选" title="Direct link to 文章筛选">​</a></h3>
<p>我们需要根据 :</p>
<ul>
<li>频道</li>
<li>日期</li>
<li>状态</li>
</ul>
<p>来筛选需要的文章</p>
<p>本质就是给请求列表的接口传递不同的参数</p>
<blockquote>
<p>接口文档的参数</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104155926390.png" alt="image-20250104155926390" class="img_ev3q"></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 查询筛选参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setReqData</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">status</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">channel_id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">begin_pubdate</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">end_pubdate</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">page</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">per_page</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">4</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里我们利用 useEffect 的机制 维护的依赖项有变动 就会重新执行内部代码 ,拉取文章数据 所以我们需要将 reqdata 放入之前请求列表的参数中个,之前这个参数是没有传递的</p>
<blockquote>
<p>完整代码</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 查询筛选参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setReqData</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">status</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">channel_id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">begin_pubdate</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">end_pubdate</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">page</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token literal-property property">per_page</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">4</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onReqFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">formValue</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 1. 准备参数</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> date</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> status </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> formValue</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">setReqData</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    status</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">begin_pubdate</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> date</span><span class="token punctuation" style="color:#475569">[</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">format</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;YYYY-MM-DD&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">end_pubdate</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> date</span><span class="token punctuation" style="color:#475569">[</span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">format</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;YYYY-MM-DD&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 获取频道数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channels </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useChannel</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 获取文章列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> setList</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useState</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">results</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104161050120.png" alt="image-20250104161050120" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="分页实现">分页实现<a href="#分页实现" class="hash-link" aria-label="Direct link to 分页实现" title="Direct link to 分页实现">​</a></h3>
<p>分页公式 : 页数 = 总数/每条数</p>
<p>思路 : 将页数作为请求参数从新渲染文章列表</p>
<p>找到文章列表对应的<code>table</code>标签 配置 <code>pagination</code>属性</p>
<blockquote>
<p>补充 维护一个 count</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104164504872.png" alt="image-20250104164504872" class="img_ev3q"></p>
<p>在请求文章列表的时候 把这个属性放入 count 维护即可</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">results</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setCount</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">total_count</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">getList</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>代码</p>
</blockquote>
<p>简单的分页就完成了 :</p>
<ul>
<li>设置总数</li>
<li>每页数量</li>
</ul>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">/*表格区域*/</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"> title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">根据筛选条件共查询到 </span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">count</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string string" style="color:#64748b"> 条结果：</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    rowKey</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    columns</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">columns</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    dataSource</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    pagination</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">total</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">pageSize</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> reqData</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">per_page</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Card</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104164656351.png" alt="image-20250104164656351" class="img_ev3q"></p>
<blockquote>
<p>根据对应的页数来请求对应文章</p>
</blockquote>
<p><code>pagination</code>中使用 onchange 事件来完成对应页数的请求</p>
<p>标签改动:</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  rowKey</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;id&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  columns</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">columns</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  dataSource</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">list</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  pagination</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">total</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> count</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">pageSize</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> reqData</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">per_page</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">onChange</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> onPageChange</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>新增方法:</p>
<p>page 参数会拿到点击的对应页数 ,根据特性我们只需要改变参数 就会触发 useEffect 来更新数据</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onPageChange</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">page</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">setReqData</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token spread operator" style="color:#475569">...</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">page</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> page</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="文章删除">文章删除<a href="#文章删除" class="hash-link" aria-label="Direct link to 文章删除" title="Direct link to 文章删除">​</a></h3>
<p>在 <code>/APIS/Article.js</code>新增请求方法</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">//删除文章</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">deleteArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">/mp/articles/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation punctuation" style="color:#475569">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">method</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;DELETE&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>添加静态文件</p>
</blockquote>
<p>在行数据数组中找到 操作 添加确认组件 绑定<code>onConfirm</code>事件</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Popconfirm</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  title</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;确认删除该条文章吗?&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  onConfirm</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">delArticle</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  okText</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;确认&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  cancelText</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;取消&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"> type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"> danger shape</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;circle&quot;</span><span class="token plain"> icon</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">DeleteOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Popconfirm</span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>事件代码</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">delArticle</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">deleteArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 更新列表</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token function" style="color:#0e7490">setReqData</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token spread operator" style="color:#475569">...</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="编辑文章">编辑文章<a href="#编辑文章" class="hash-link" aria-label="Direct link to 编辑文章" title="Direct link to 编辑文章">​</a></h2>
<p>我们点击编辑按钮的时候 需要携带文章 id 跳转到文章编写页面,</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> navigate </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useNavigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//样式代码</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Button</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  type</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;primary&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  shape</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;circle&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  icon</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">EditOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  onClick</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">navigate</span><span class="token punctuation" style="color:#475569">(</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">/publish?id=</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation punctuation" style="color:#475569">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104171000631.png" alt="image-20250104171000631" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="载入文章数据">载入文章数据<a href="#载入文章数据" class="hash-link" aria-label="Direct link to 载入文章数据" title="Direct link to 载入文章数据">​</a></h3>
<p>通过传入的 id 获取到文章数据 使用表单组件的实例方法 <code>setFieldsValue</code>填进去即可</p>
<p>在 <code>/APIS/Article.js</code>新增请求方法</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">//获取文章数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getArticleById</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">/mp/articles/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>使用 钩子来做到刷新就回填数据</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 载入文章数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">searchParams</span><span class="token punctuation" style="color:#475569">]</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useSearchParams</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 文章数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> articleId </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> searchParams</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">get</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;id&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token function" style="color:#0e7490">useEffect</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">async</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getArticleDetail</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> res </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">await</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">getArticleById</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">articleId</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> cover</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token spread operator" style="color:#475569">...</span><span class="token plain">infoValue </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> res</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    form</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">setFieldsValue</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#475569">...</span><span class="token plain">infoValue</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> cover</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">type</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setImageType</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">cover</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">type</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">setImageList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">cover</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">images</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">url</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> url </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">articleId</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">getArticleDetail</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain">articleId</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> form</span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里需要在 上传框加入一个属性 <code>fileList</code></p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  imageType </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">0</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&amp;&amp;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Upload</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      name</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;image&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      listType</span><span class="token operator" style="color:#475569">=</span><span class="token string" style="color:#64748b">&quot;picture-card&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      showUploadList</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      action</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;http://geek.itheima.net/v1_0/upload&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      onChange</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">onUploadChange</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      maxCount</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">imageType</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      fileList</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">imageList</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token plain">div style</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token literal-property property">marginTop</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">8</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">PlusOutlined</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token plain">div</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Upload</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="根据-id-展示状态">根据 id 展示状态<a href="#根据-id-展示状态" class="hash-link" aria-label="Direct link to 根据 id 展示状态" title="Direct link to 根据 id 展示状态">​</a></h3>
<p>找到 title 中的发布文章 判断是否有 id</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Card</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                title</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Breadcrumb</span><span class="token plain"> items</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token punctuation" style="color:#475569">{</span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Link</span><span class="token plain"> to</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&#x27;/&#x27;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain">首页</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Link</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token punctuation" style="color:#475569">{</span><span class="token literal-property property">title</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">articleId </span><span class="token template-string interpolation operator" style="color:#475569">?</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#64748b">&#x27;编辑文章&#x27;</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation operator" style="color:#475569">:</span><span class="token template-string interpolation"> </span><span class="token template-string interpolation string" style="color:#64748b">&#x27;发布文章&#x27;</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="更新文章">更新文章<a href="#更新文章" class="hash-link" aria-label="Direct link to 更新文章" title="Direct link to 更新文章">​</a></h3>
<p>做完内容修改后 需要确认更新文章内容 并且校对文章数据 然后更新文章</p>
<p>我们需要适配 url 参数 因为我们的图片每个接口的传递需要的格式不同</p>
<blockquote>
<p>新增更新文章方法</p>
<p><code>/apis/article.js</code></p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 修改文章表单</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">function</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">updateArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">request</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">url</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token template-string string" style="color:#64748b">/mp/articles/</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">${</span><span class="token template-string interpolation">data</span><span class="token template-string interpolation punctuation" style="color:#475569">.</span><span class="token template-string interpolation property-access">id</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#475569">}</span><span class="token template-string string" style="color:#64748b">?draft=false</span><span class="token template-string template-punctuation string" style="color:#64748b">`</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">method</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;PUT&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    data</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>修改 onfinish 方法</p>
</blockquote>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#0e7490">onFinish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">formValue</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 判断type和图片数量是否相等</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">imageList</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">length</span><span class="token plain"> </span><span class="token operator" style="color:#475569">!==</span><span class="token plain"> imageType</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> message</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">warning</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;封面类型和图片数量不匹配&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> title </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> formValue</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> reqData </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    content</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    title</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">cover</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">type</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> imageType</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token comment" style="color:#6A9955">// 编辑url的时候也需要做处理</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token literal-property property">images</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> imageList</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">map</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">item</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">response</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token keyword control-flow" style="color:#0c4a6e">return</span><span class="token plain"> item</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">url</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    channel_id</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//   提交数据</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token comment" style="color:#6A9955">// 需要判断 新增和修改接口的调用</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">articleId</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">updateArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"> </span><span class="token spread operator" style="color:#475569">...</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token literal-property property">id</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> articleId </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">then</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">message</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;OK&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        message</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">success</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;文章修改成功&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#0c4a6e">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token function" style="color:#0e7490">createArticleAPI</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">reqData</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">then</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token parameter">data</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#0c4a6e">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">message</span><span class="token plain"> </span><span class="token operator" style="color:#475569">===</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;OK&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        message</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">success</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;文章发布成功&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        form</span><span class="token punctuation" style="color:#475569">.</span><span class="token method function property-access" style="color:#0e7490">resetFields</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token function" style="color:#0e7490">setImageType</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">0</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>效果</p>
</blockquote>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104181320356.png" alt="image-20250104181320356" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="打包优化">打包优化<a href="#打包优化" class="hash-link" aria-label="Direct link to 打包优化" title="Direct link to 打包优化">​</a></h2>
<p>CRA 自带的打包命令</p>
<div class="language-shell codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-shell codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">npm run build</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"># 静态服务器</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">npm install -g serve</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">#启动</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">serve -s build</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后就可以在项目文件夹看到</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104185436568.png" alt="image-20250104185436568" class="img_ev3q"></p>
<p>我们需要安装一个本地服务器 就可以跑起来打包好的项目了</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="配置路由懒加载">配置路由懒加载<a href="#配置路由懒加载" class="hash-link" aria-label="Direct link to 配置路由懒加载" title="Direct link to 配置路由懒加载">​</a></h3>
<p>就是使路由在需要 js 的时候 才会获取 可以提高项目的首次启动时间</p>
<ul>
<li>把路由修改为 React 提供的 lazy 函数进行动态导入</li>
<li>使用 react 内置的 Suspense 组件 包裹路由中的 element</li>
</ul>
<p>将路由中组件的导入方式改为 lazy</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> createBrowserRouter </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react-router-dom&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">Login</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/pages/Login&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> </span><span class="token imports maybe-class-name">AuthRoute</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/components/AuthRoute&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">GeekLayout</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;@/pages/Layout&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#475569">{</span><span class="token imports"> lazy</span><span class="token imports punctuation" style="color:#475569">,</span><span class="token imports"> </span><span class="token imports maybe-class-name">Suspense</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#475569">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">from</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;react&quot;</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">// 使用 lazy进行导入</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token maybe-class-name">Home</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">lazy</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;@/pages/Home&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token maybe-class-name">Article</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">lazy</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;@/pages/Article&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token maybe-class-name">Publish</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">lazy</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#475569">=&gt;</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">import</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;@/pages/Publish&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> router </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">createBrowserRouter</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">AuthRoute</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">GeekLayout</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">AuthRoute</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">children</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">[</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Suspense</span><span class="token plain"> fallback</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;加载中&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Home</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Home</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;article&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Suspense</span><span class="token plain"> fallback</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;加载中&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Article</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Article</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;publish&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Suspense</span><span class="token plain"> fallback</span><span class="token operator" style="color:#475569">=</span><span class="token punctuation" style="color:#475569">{</span><span class="token string" style="color:#64748b">&quot;加载中&quot;</span><span class="token punctuation" style="color:#475569">}</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Publish</span><span class="token operator" style="color:#475569">&gt;</span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Publish</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">          </span><span class="token operator" style="color:#475569">&lt;</span><span class="token operator" style="color:#475569">/</span><span class="token maybe-class-name">Suspense</span><span class="token operator" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">path</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token string" style="color:#64748b">&quot;/login&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token literal-property property">element</span><span class="token operator" style="color:#475569">:</span><span class="token plain"> </span><span class="token operator" style="color:#475569">&lt;</span><span class="token maybe-class-name">Login</span><span class="token plain"> </span><span class="token operator" style="color:#475569">/</span><span class="token operator" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token punctuation" style="color:#475569">}</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">]</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword module" style="color:#0c4a6e">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#0c4a6e">default</span><span class="token plain"> router</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>只能看看语法了 目前有 React18 不知道为什么提示我使用的不对</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cdn">CDN<a href="#cdn" class="hash-link" aria-label="Direct link to CDN" title="Direct link to CDN">​</a></h3>
<p>意义就是 加载离本地最近的服务器上的文件</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/image-20250104191954563.png" alt="image-20250104191954563" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hooks-2">Hooks<a href="#hooks-2" class="hash-link" aria-label="Direct link to Hooks" title="Direct link to Hooks">​</a></h2>
<p><code> ueslocation</code>获取当前的路由位置</p>
<div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">// 获取到当前点击的路由</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">location</span><span class="token plain"> </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">useLocation</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">const</span><span class="token plain"> selectedKey </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token dom variable" style="color:#0c4a6e">location</span><span class="token punctuation" style="color:#475569">.</span><span class="token property-access">pathname</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Web/react.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Web/JavaScript 高级"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">JavaScript 高级</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Web/vue2.x"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">vue2.0</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#使用-vite-创建-recat-项目" class="table-of-contents__link toc-highlight">使用 vite 创建 Recat 项目</a></li><li><a href="#开发规范" class="table-of-contents__link toc-highlight">开发规范</a></li><li><a href="#标签" class="table-of-contents__link toc-highlight">标签</a></li><li><a href="#属性" class="table-of-contents__link toc-highlight">属性</a></li><li><a href="#在-jsx-中插入-js-变量" class="table-of-contents__link toc-highlight">在 JSX 中插入 js 变量</a></li><li><a href="#条件判断" class="table-of-contents__link toc-highlight">条件判断</a></li><li><a href="#循环" class="table-of-contents__link toc-highlight">循环</a></li><li><a href="#小结实战-列表页" class="table-of-contents__link toc-highlight">小结实战 列表页</a></li><li><a href="#组件" class="table-of-contents__link toc-highlight">组件</a></li><li><a href="#属性-props" class="table-of-contents__link toc-highlight">属性 props</a><ul><li><a href="#children" class="table-of-contents__link toc-highlight">children</a></li><li><a href="#子组件传递父组件" class="table-of-contents__link toc-highlight">子组件传递父组件</a></li><li><a href="#兄弟组件传递" class="table-of-contents__link toc-highlight">兄弟组件传递</a></li></ul></li><li><a href="#react-拓展" class="table-of-contents__link toc-highlight">React 拓展</a><ul><li><a href="#reactmemo" class="table-of-contents__link toc-highlight">React.memo</a></li><li><a href="#reactts-特殊的-children-属性" class="table-of-contents__link toc-highlight">React+TS 特殊的 children 属性</a></li><li><a href="#usestate" class="table-of-contents__link toc-highlight">useState</a></li><li><a href="#usecontext-组件通信" class="table-of-contents__link toc-highlight">useContext 组件通信</a></li><li><a href="#useeffect" class="table-of-contents__link toc-highlight">useEffect</a></li><li><a href="#usereducer" class="table-of-contents__link toc-highlight">useReducer</a></li><li><a href="#usememo" class="table-of-contents__link toc-highlight">useMemo</a></li><li><a href="#usecallback" class="table-of-contents__link toc-highlight">useCallback</a></li><li><a href="#自定义-hook" class="table-of-contents__link toc-highlight">自定义 hook</a></li></ul></li><li><a href="#配置-redux" class="table-of-contents__link toc-highlight">配置 Redux</a><ul><li><a href="#调试工具安装" class="table-of-contents__link toc-highlight">调试工具安装</a></li><li><a href="#store-目录机构设计" class="table-of-contents__link toc-highlight">store 目录机构设计</a></li></ul></li><li><a href="#快速上手" class="table-of-contents__link toc-highlight">快速上手</a></li><li><a href="#提交-acntion-传参" class="table-of-contents__link toc-highlight">提交 acntion 传参</a></li><li><a href="#reudx-action-异步操作" class="table-of-contents__link toc-highlight">Reudx action 异步操作</a></li><li><a href="#redux-hooks" class="table-of-contents__link toc-highlight"><strong>redux hooks</strong></a><ul><li><a href="#useselector" class="table-of-contents__link toc-highlight">useSelector</a></li><li><a href="#usedispatch" class="table-of-contents__link toc-highlight">useDispatch</a></li></ul></li><li><a href="#美团点餐界面小案例" class="table-of-contents__link toc-highlight">美团点餐界面小案例</a><ul><li><a href="#分类渲染" class="table-of-contents__link toc-highlight">分类渲染</a></li><li><a href="#侧边栏渲染交互" class="table-of-contents__link toc-highlight">侧边栏渲染.交互</a></li><li><a href="#添加购物车" class="table-of-contents__link toc-highlight">添加购物车</a></li><li><a href="#统计订单区域" class="table-of-contents__link toc-highlight">统计订单区域</a></li><li><a href="#购物车列表功能" class="table-of-contents__link toc-highlight">购物车列表功能</a></li><li><a href="#购物车列表的显示和隐藏" class="table-of-contents__link toc-highlight">购物车列表的显示和隐藏</a></li><li><a href="#切片模式" class="table-of-contents__link toc-highlight">切片模式</a></li></ul></li><li><a href="#快速上手-demo" class="table-of-contents__link toc-highlight">快速上手 demo</a><ul><li><a href="#抽象路由模块" class="table-of-contents__link toc-highlight">抽象路由模块</a></li></ul></li><li><a href="#路由导航" class="table-of-contents__link toc-highlight">路由导航</a><ul><li><a href="#声明式导航" class="table-of-contents__link toc-highlight">声明式导航</a></li><li><a href="#编程式导航" class="table-of-contents__link toc-highlight">编程式导航</a></li><li><a href="#传参" class="table-of-contents__link toc-highlight">传参</a></li></ul></li><li><a href="#嵌套路由" class="table-of-contents__link toc-highlight">嵌套路由</a><ul><li><a href="#案例" class="table-of-contents__link toc-highlight">案例</a></li><li><a href="#默认二级路由" class="table-of-contents__link toc-highlight">默认二级路由</a></li></ul></li><li><a href="#404-路由" class="table-of-contents__link toc-highlight">404 路由</a></li><li><a href="#路由模式" class="table-of-contents__link toc-highlight">路由模式</a></li><li><a href="#hooks-1" class="table-of-contents__link toc-highlight">Hooks</a><ul><li><a href="#usenavigate" class="table-of-contents__link toc-highlight">useNavigate</a></li><li><a href="#usesearchparams-1" class="table-of-contents__link toc-highlight">useSearchParams</a></li><li><a href="#useparams-1" class="table-of-contents__link toc-highlight">useParams</a></li></ul></li><li><a href="#项目配置" class="table-of-contents__link toc-highlight">项目配置</a><ul><li><a href="#路径别名" class="table-of-contents__link toc-highlight">路径别名</a></li><li><a href="#安装-scss" class="table-of-contents__link toc-highlight">安装 scss</a></li><li><a href="#组件库-antd" class="table-of-contents__link toc-highlight">组件库 antd</a></li><li><a href="#配置路由" class="table-of-contents__link toc-highlight">配置路由</a></li><li><a href="#封装-requset-请求模块" class="table-of-contents__link toc-highlight">封装 requset 请求模块</a></li></ul></li><li><a href="#登录模块" class="table-of-contents__link toc-highlight">登录模块</a><ul><li><a href="#表单校验" class="table-of-contents__link toc-highlight">表单校验</a></li><li><a href="#使用-redux-管理-token" class="table-of-contents__link toc-highlight">使用 Redux 管理 token</a></li><li><a href="#触发登录操作" class="table-of-contents__link toc-highlight">触发登录操作</a></li><li><a href="#token-持久化" class="table-of-contents__link toc-highlight">token 持久化</a></li><li><a href="#在-axios-请求中携带-token" class="table-of-contents__link toc-highlight">在 Axios 请求中携带 token</a></li><li><a href="#使用-token-做路由权限控制" class="table-of-contents__link toc-highlight">使用 token 做路由权限控制</a></li></ul></li><li><a href="#主页面" class="table-of-contents__link toc-highlight">主页面</a><ul><li><a href="#二级路由设置" class="table-of-contents__link toc-highlight">二级路由设置</a></li><li><a href="#展示个人信息" class="table-of-contents__link toc-highlight">展示个人信息</a></li><li><a href="#退出登录" class="table-of-contents__link toc-highlight">退出登录</a></li><li><a href="#处理失效-token" class="table-of-contents__link toc-highlight">处理失效 token</a></li><li><a href="#主页可视化图表" class="table-of-contents__link toc-highlight">主页可视化图表</a></li></ul></li><li><a href="#api-封装" class="table-of-contents__link toc-highlight">API 封装</a></li><li><a href="#文章发布" class="table-of-contents__link toc-highlight">文章发布</a><ul><li><a href="#基础文章结构" class="table-of-contents__link toc-highlight">基础文章结构</a></li><li><a href="#富文本编辑器" class="table-of-contents__link toc-highlight">富文本编辑器</a></li><li><a href="#频道数据渲染" class="table-of-contents__link toc-highlight">频道数据渲染</a></li><li><a href="#发布基础文章" class="table-of-contents__link toc-highlight">发布基础文章</a></li><li><a href="#上传封面" class="table-of-contents__link toc-highlight">上传封面</a></li><li><a href="#发表带图片的文章" class="table-of-contents__link toc-highlight">发表带图片的文章</a></li></ul></li><li><a href="#文章列表" class="table-of-contents__link toc-highlight">文章列表</a><ul><li><a href="#放入结构" class="table-of-contents__link toc-highlight">放入结构</a></li><li><a href="#频道模块渲染" class="table-of-contents__link toc-highlight">频道模块渲染</a></li><li><a href="#渲染文章列表数据" class="table-of-contents__link toc-highlight">渲染文章列表数据</a></li><li><a href="#文章状态" class="table-of-contents__link toc-highlight">文章状态</a></li><li><a href="#文章筛选" class="table-of-contents__link toc-highlight">文章筛选</a></li><li><a href="#分页实现" class="table-of-contents__link toc-highlight">分页实现</a></li><li><a href="#文章删除" class="table-of-contents__link toc-highlight">文章删除</a></li></ul></li><li><a href="#编辑文章" class="table-of-contents__link toc-highlight">编辑文章</a><ul><li><a href="#载入文章数据" class="table-of-contents__link toc-highlight">载入文章数据</a></li><li><a href="#根据-id-展示状态" class="table-of-contents__link toc-highlight">根据 id 展示状态</a></li><li><a href="#更新文章" class="table-of-contents__link toc-highlight">更新文章</a></li></ul></li><li><a href="#打包优化" class="table-of-contents__link toc-highlight">打包优化</a><ul><li><a href="#配置路由懒加载" class="table-of-contents__link toc-highlight">配置路由懒加载</a></li><li><a href="#cdn" class="table-of-contents__link toc-highlight">CDN</a></li></ul></li><li><a href="#hooks-2" class="table-of-contents__link toc-highlight">Hooks</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">  来自冷环渊的技术支持与文档创作 @2025</div></div></div></footer></div>
</body>
</html>