<!doctype html>
<html lang="cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Java/mybatis plus" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">mybatis plus | 小冷の代码世界</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://doomwatcher2004.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://doomwatcher2004.github.io/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://doomwatcher2004.github.io/docs/Java/mybatis plus"><meta data-rh="true" property="og:locale" content="cn"><meta data-rh="true" name="docusaurus_locale" content="cn"><meta data-rh="true" name="docsearch:language" content="cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="mybatis plus | 小冷の代码世界"><meta data-rh="true" name="description" content="需要的基础："><meta data-rh="true" property="og:description" content="需要的基础："><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://doomwatcher2004.github.io/docs/Java/mybatis plus"><link data-rh="true" rel="alternate" href="https://doomwatcher2004.github.io/docs/Java/mybatis plus" hreflang="cn"><link data-rh="true" rel="alternate" href="https://doomwatcher2004.github.io/docs/Java/mybatis plus" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.15cbc4ab.css">
<script src="/assets/js/runtime~main.3e566960.js" defer="defer"></script>
<script src="/assets/js/main.cae173d3.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="小冷の代码世界" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="小冷の代码世界" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">小冷の代码世界</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Java/Docker 快速入门">Java知识库</a><a class="navbar__item navbar__link" href="/docs/Web/JavaScript 高级">前端知识库</a><a class="navbar__item navbar__link" href="/docs/Godot/">Godot游戏开发</a><a class="navbar__item navbar__link" href="/docs/finish/finishRpc">Finish系列手写中间件</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Doomwatcher2004" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Docker 快速入门">Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Java 8 更新的新特性 （函数式接口 lambda stream option）">Java8 新特性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Java后端进阶之路： JavaWeb">javaweb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Mybatis">Mybatis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty+springboot实现IM即时通讯服务端">Netty+springboot实现IM即时通讯服务端</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty_HTTP文件列表服务器">Netty_HTTP文件列表服务器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty_模拟Redis的客户端">Netty_模拟Redis的客户端</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty网络框架">Netty 网络框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Nginx">Nginx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Redis 数据结构操作入门">Redis 数据结构操作入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Spring Aop 底层责任链思路实现">Spring Aop 底层责任链思路实现</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Spring5 Webflux 响应式编程">Spring5 Webflux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/SpringBoot 解决企业级复杂性简化开发的神奇">微服务阶段</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/SpringCloud Alibaba">springCloudAlibaba</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/SpringCloud Netflix">springcloud2020</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Spring内置MVC框架：SpringMVC">SpringMVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/Java/mybatis plus">mybatis plus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/redis问题的常见解决方案">redis问题的常见解决方案</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/六道入门树题目带你走入树结构的世界">六道入门树题目带你走入树结构的世界</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/分布式项目中锁的应用（本地锁-redis【setnx】-redisson-springcache）">分布式项目中锁的应用（本地锁-redis【setnx】-redisson-springcache）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/多线程进阶 JUC并发编程">多线程进阶 JUC 并发编程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/大前端进阶（ES6）">ES6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/快速入门RabbitMQ并且加入项目实战">快速入门RabbitMQ并且加入项目实战</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/快速入门分布式系统与Dubbo+zookeeper">分布式系统简述：</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/掌握极简服务器开发的优秀框架 ：Spring">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/搜索引擎 _ Elasticsearch">Elasticsearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/数据结构与算法">数据结构与算法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/理解IOC 手写springIOC">Spring 手撕 IOC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/简易aiweb">Java入门Spring AI应用开发</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/线程池详解与异步任务编排使用案例">线程池详解与异步任务编排使用案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/通透百万数据秒级排序  快速排序">通透百万数据秒级排序  快速排序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/阿里淘系单点登录中心">阿里淘系单点登录中心</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/高并发秒杀系统">高并发秒杀系统</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">mybatis plus</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>mybatis plus</h1></header>
<p>需要的基础：</p>
<p>ssm</p>
<p>javaweb</p>
<p>mysql</p>
<p>javaSE</p>
<p>必须会的知识点</p>
<p>为什么学他？mybatis 不够嘛？</p>
<p>mybatis 以及很便捷了，plus 肯定会更加的便捷</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="简介">简介<a href="#简介" class="hash-link" aria-label="Direct link to 简介" title="Direct link to 简介">​</a></h2>
<p>mybatis 简化了 jdbc，mybatisplus 简化了 mybatis</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/8a811be4178ba00bc42ec5bd6d8da07f.png" alt="image-20210722160442558" class="img_ev3q"></p>
<p>愿景</p>
<p>我们的愿景是成为 MyBatis 最好的搭档，就像 <a href="https://mp.baomidou.com/img/contra.jpg" target="_blank" rel="noopener noreferrer">魂斗罗</a> 中的 1P、2P，基友搭配，效率翻倍。</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/77444a72b93be03f92be9eaf1942a0d3.png" alt="img" class="img_ev3q"></p>
<h5 class="anchor anchorWithStickyNavbar_LWe7" id="特性">特性<a href="#特性" class="hash-link" aria-label="Direct link to 特性" title="Direct link to 特性">​</a></h5>
<ul>
<li><strong>无侵入</strong>：只做增强不做改变，引入它不会对现有工程产生影响，如丝般顺滑</li>
<li><strong>损耗小</strong>：启动即会自动注入基本 CURD，性能基本无损耗，直接面向对象操作</li>
<li><strong>强大的 CRUD 操作</strong>：内置通用 Mapper、通用 Service，仅仅通过少量配置即可实现单表大部分 CRUD 操作，更有强大的条件构造器，满足各类使用需求，基本的增删改查操作不用再自己写了</li>
<li><strong>支持 Lambda 形式调用</strong>：通过 Lambda 表达式，方便的编写各类查询条件，无需再担心字段写错</li>
<li><strong>支持主键自动生成</strong>：支持多达 4 种主键策略（内含分布式唯一 ID 生成器 - Sequence），可自由配置，完美解决主键问题</li>
<li><strong>支持 ActiveRecord 模式</strong>：支持 ActiveRecord 形式调用，实体类只需继承 Model 类即可进行强大的 CRUD 操作</li>
<li><strong>支持自定义全局通用操作</strong>：支持全局通用方法注入（ Write once, use anywhere ）</li>
<li><strong>内置代码生成器</strong>：采用代码或者 Maven 插件可快速生成 Mapper 、 Model 、 Service 、 Controller 层代码，支持模板引擎，更有超多自定义配置等您来使用</li>
<li><strong>内置分页插件</strong>：基于 MyBatis 物理分页，开发者无需关心具体操作，配置好插件之后，写分页等同于普通 List 查询</li>
<li><strong>分页插件支持多种数据库</strong>：支持 MySQL、MariaDB、Oracle、DB2、H2、HSQL、SQLite、Postgre、SQLServer 等多种数据库</li>
<li><strong>内置性能分析插件</strong>：可输出 Sql 语句以及其执行时间，建议开发测试时启用该功能，能快速揪出慢查询</li>
<li><strong>内置全局拦截插件</strong>：提供全表 delete 、 update 操作智能分析阻断，也可自定义拦截规则，预防误操作</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="快速入门">快速入门<a href="#快速入门" class="hash-link" aria-label="Direct link to 快速入门" title="Direct link to 快速入门">​</a></h2>
<p>文档地址：<a href="https://mp.baomidou.com/guide/quick-start.html" target="_blank" rel="noopener noreferrer">https://mp.baomidou.com/guide/quick-start.html</a></p>
<p>使用第三方组件呢：</p>
<ol>
<li>导入对应的依赖</li>
<li>研究依赖如何配置</li>
<li>代码如何编写</li>
<li>提高拓展技术能力</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="步骤">步骤<a href="#步骤" class="hash-link" aria-label="Direct link to 步骤" title="Direct link to 步骤">​</a></h3>
<ol>
<li>
<p>创建数据库 <code>Mybatis_plus</code></p>
</li>
<li>
<p>创建 user 表</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token constant" style="color:#0f172a">DROP</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">TABLE</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">IF</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">EXISTS</span><span class="token plain"> user</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token constant" style="color:#0f172a">CREATE</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">TABLE</span><span class="token plain"> user</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	id </span><span class="token function" style="color:#0e7490">BIGINT</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">20</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NOT</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NULL</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">COMMENT</span><span class="token plain"> </span><span class="token char" style="color:#D16969">&#x27;主键ID&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	name </span><span class="token function" style="color:#0e7490">VARCHAR</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">30</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NULL</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">DEFAULT</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NULL</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">COMMENT</span><span class="token plain"> </span><span class="token char" style="color:#D16969">&#x27;姓名&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	age </span><span class="token function" style="color:#0e7490">INT</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">11</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NULL</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">DEFAULT</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NULL</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">COMMENT</span><span class="token plain"> </span><span class="token char" style="color:#D16969">&#x27;年龄&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	email </span><span class="token function" style="color:#0e7490">VARCHAR</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">50</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NULL</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">DEFAULT</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">NULL</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">COMMENT</span><span class="token plain"> </span><span class="token char" style="color:#D16969">&#x27;邮箱&#x27;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	</span><span class="token class-name" style="color:#0ea5e9">PRIMARY</span><span class="token plain"> </span><span class="token constant" style="color:#0f172a">KEY</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">--</span><span class="token plain">真是开发中，version（乐观锁），deleted（逻辑删除）gmt_create</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">gmt_modified</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>编写项目，用 springboot 来初始化项目</p>
</li>
<li>
<p>导入相关的依赖</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-data-jdbc</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-jdbc</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-web</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">mysql</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">mysql-connector-java</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">scope</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">runtime</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">scope</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.projectlombok</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">lombok</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">optional</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">true</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">optional</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-test</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">scope</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">test</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">scope</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">com.baomidou</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">mybatis-plus-boot-starter</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">3.0.5</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>引入依赖说明：mybatis-plus 可以节省我们大量的代码，尽量不要同时使用 mybatis-plus 和 mybatis 会出现版本问题</p>
</li>
<li>
<p>配置数据库连接</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#mysql 5 driver：com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">#mysql 8 driver：com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"># 8 需要配置时区：serverTimezone=UTC</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.datasource.url=jdbc:mysql://localhost:3306/mybatis_plus?userSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.datasource.password=root</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.datasource.username=root</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>方式的不同</p>
<ol>
<li>以往我们传统的方式是 pojo-dao（连接 mybatis，配置 mapper.xml 文件）-service-controller</li>
<li>使用了 mybatis-plus 之后
<ul>
<li>pojo</li>
<li>mapper 接口</li>
<li>使用</li>
</ul>
</li>
</ol>
</li>
<li>
<p>简单实用</p>
<p>​ 只需要在对应的 mapper 上实现对应的接口就可以了，我们想操作就 user 就在泛型里传入 user 那好了，就会生成对应的 curd</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">//只需要在对应的mapper上实现对应的接口就可以了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token annotation punctuation" style="color:#475569">@Repository</span><span class="token comment" style="color:#6A9955">//代表持久层</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">public</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">interface</span><span class="token plain"> userMapper </span><span class="token keyword" style="color:#0c4a6e">extends</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">BaseMapper</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics">user</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//    到了这里所有的crud就编写完成了</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//不需要在向以前一样大量的配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>父类里有一套简单的 crud 的模版，在我们泛型加入之后，代码就已经帮我们写好了</p>
<p><strong>测试</strong></p>
<p>我们来查询一个 user 的全部用户</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#475569">@Autowired</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">private</span><span class="token plain"> userMapper usermapper</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">contextLoads</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">List</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics">user</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> userList </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectList</span><span class="token punctuation" style="color:#475569">(</span><span class="token keyword" style="color:#0c4a6e">null</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userList</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">forEach</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token operator" style="color:#475569">::</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>完美，这就是 mybatis_plus 的魅力</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/d2ce02c16225b1beb8a681b19fdb9686.png" alt="image-20210723143726367" class="img_ev3q"></p>
</li>
<li>
<p>思考，谁来帮我们完成这个些事情呢？我们一个 sql 都没好写却可以轻松查出全部的数据</p>
<ol>
<li>myBatis-plus 都写好了</li>
<li>方法拿来，mybatisplus 也写好了</li>
</ol>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="日志">日志<a href="#日志" class="hash-link" aria-label="Direct link to 日志" title="Direct link to 日志">​</a></h2>
<p>我们所有的 sql 是不可见的，我们希望知道他是如何执行的，这十分重要</p>
<p>配置文件中加入默认的日志先查看效果，如果有需求导入相关依赖即可</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#日志的配置</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">mybatis-plus.configuration.log-impl=org.apache.ibatis.logging.stdout.StdOutImpl</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>结果：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/3912901241ab77b7a9b8da475af6be2d.png" alt="image-20210723145539514" class="img_ev3q"></p>
<p>配置完毕之后，我们就可以查看日志了，日后的学习也要多观察自动生成的日志，慢慢的你会发现，mybatis-plus 是很好用的一个工具，</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="crud-拓展">CRUD 拓展<a href="#crud-拓展" class="hash-link" aria-label="Direct link to CRUD 拓展" title="Direct link to CRUD 拓展">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="插入操作">插入操作<a href="#插入操作" class="hash-link" aria-label="Direct link to 插入操作" title="Direct link to 插入操作">​</a></h3>
<p>测试插入放的时候有一个神奇的东西，它会自动帮我们生成 id，</p>
<p>测试方法：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  user user </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">user</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setAge</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;hyc&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setEmail</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;3132774018@qq.com&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">int</span><span class="token plain"> result </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">insert</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们没有 setid 但是 id 却自动生成了，思考</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/61383ad9190f6e0986d0370172c71d88.png" alt="image-20210723150421869" class="img_ev3q"></p>
<p>我们都知道。数据库插入 id 为：全局唯一的 id</p>
<p>这个时候我们就要来了解一下，</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主键生成策略">主键生成策略<a href="#主键生成策略" class="hash-link" aria-label="Direct link to 主键生成策略" title="Direct link to 主键生成策略">​</a></h3>
<p>我们的实体类，中的</p>
<p>id -----》对应我们的主键</p>
<p>我们这个时候要了解一个东西：雪花算法</p>
<p>之前的学习中我们使用过什么？ uuid 来生成全局唯一 id</p>
<p>接下来从内容借鉴博客</p>
<p>分布式系统唯一 id 生成方案：<a href="https://www.cnblogs.com/haoxinyue/p/5208136.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/haoxinyue/p/5208136.html</a></p>
<blockquote>
<p>默认唯一 id：默认是 ID_worker（全局唯一） 在新版本已经过时</p>
</blockquote>
<p><strong>雪花算法</strong>：</p>
<p>snowflake 是 Twitter 开源的分布式 ID 生成算法，结果是一个 long 型的 ID。其核心思想是：使用 41bit 作为毫秒数，10bit 作为机器的 ID（5 个 bit 是数据中心，5 个 bit 的机器 ID），12bit 作为毫秒内的流水号（意味着每个节点在每毫秒可以产生 4096 个 ID），最后还有一个符号位，永远是 0。具体实现的代码可以参看<a href="https://github.com/twitter/snowflake%E3%80%82%E9%9B%AA%E8%8A%B1%E7%AE%97%E6%B3%95%E6%94%AF%E6%8C%81%E7%9A%84TPS%E5%8F%AF%E4%BB%A5%E8%BE%BE%E5%88%B0419%E4%B8%87%E5%B7%A6%E5%8F%B3%EF%BC%882%5E22*1000%EF%BC%89%E3%80%82" target="_blank" rel="noopener noreferrer">https://github.com/twitter/snowflake。雪花算法支持的TPS可以达到419万左右（2^22*1000）。</a></p>
<p>雪花算法在工程实现上有单机版本和分布式版本。单机版本如下，分布式版本可以参看美团 leaf 算法：<a href="https://github.com/Meituan-Dianping/Leaf" target="_blank" rel="noopener noreferrer">https://github.com/Meituan-Dianping/Leaf</a></p>
<p><strong>接下来有几个主键的策略</strong></p>
<blockquote>
<p>源码解释：</p>
<p>AUTO(0), 自增
NONE(1), 无
INPUT(2), 手动输入
ID_WORKER(3), 全局唯一
UUID(4), 全局为一
ID_WORKER_STR(5); 截取字符串表示，ID_WORKER 的字符串表示法</p>
</blockquote>
<p><strong>AUTO(0), 自增</strong></p>
<p>首先是自增：</p>
<ol>
<li>主键上加上<code>@TableId(type = IdType.AUTO)</code></li>
<li>首先是数据库的主键得是自增的，不然会报错</li>
<li>设置完之后，我们再次测试插入就可以得到结果了</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="更新操作">更新操作<a href="#更新操作" class="hash-link" aria-label="Direct link to 更新操作" title="Direct link to 更新操作">​</a></h3>
<p>测试更新操作</p>
<p>测试：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        user user </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">user</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setAge</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;保证我一路畅通无阻&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setEmail</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;3132774018@qq.com&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">int</span><span class="token plain"> result </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">updateById</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/4568a88457cc9ddc1cf3f00ace0f13d5.png" alt="image-20210723153225486" class="img_ev3q"></p>
<p>我测试了两次</p>
<p>有细节的出现，就是随着需求不同 mybatisplus 做了动态 sql 的处理，所有的自动生成 sql 都是动态配置的</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动填充">自动填充<a href="#自动填充" class="hash-link" aria-label="Direct link to 自动填充" title="Direct link to 自动填充">​</a></h3>
<p>创建时间，修改时间，这些操作一般都是自动化完成的，我们需推荐手动更新</p>
<p>阿里巴巴的开发手册：gmt_create，创建时间，gmt_modified，修改时间几乎所有的表，配置上，而且需要自动化</p>
<blockquote>
<p>方式一：数据库级别（工作中不允许你修改数据）</p>
</blockquote>
<ol>
<li>
<p>在表中新增字段 gmt_create，</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/0ab6f7b6a4b522963dd18489412642d7.png" alt="image-20210725212535002" class="img_ev3q"></p>
</li>
<li>
<p>再次测试插入方法，我们需要吧实体类 同步</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">private</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">Date</span><span class="token plain"> createTime</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">private</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">Date</span><span class="token plain"> updateTime</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>再次更新查看结果</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/0657424d039f3047433f305cad308c03.png" alt="image-20210725213404215" class="img_ev3q"></p>
</li>
</ol>
<blockquote>
<p>方式二：代码级别</p>
</blockquote>
<ol>
<li>
<p>删除数据的默认值和更新操作</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/a4b00490ffad1a194e0408c0875e934c.png" alt="image-20210725214136021" class="img_ev3q"></p>
</li>
<li>
<p>需要时用 mybatis-plus 的注解来实现更新</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token annotation punctuation" style="color:#475569">@TableField</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">fill </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">FieldFill</span><span class="token punctuation" style="color:#475569">.</span><span class="token constant" style="color:#0f172a">INSERT</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">private</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">Date</span><span class="token plain"> createTime</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@TableField</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">fill </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">FieldFill</span><span class="token punctuation" style="color:#475569">.</span><span class="token constant" style="color:#0f172a">INSERT_UPDATE</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">private</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">Date</span><span class="token plain"> updateTime</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>自己写一个处理器，实现一个接口 MetaObjectHandler</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token annotation punctuation" style="color:#475569">@Slf4j</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token annotation punctuation" style="color:#475569">@Component</span><span class="token plain">  </span><span class="token comment" style="color:#6A9955">//一定不要忘记了把我们的处理器放入ioc容器</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">public</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">class</span><span class="token plain"> mymetaobjecthandler </span><span class="token keyword" style="color:#0c4a6e">implements</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">MetaObjectHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token class-name" style="color:#0ea5e9">Date</span><span class="token plain"> date </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">Date</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">public</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">insertFill</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">MetaObject</span><span class="token plain"> metaObject</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">info</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;meta insert fill ...&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token comment" style="color:#6A9955">//setFieldValByName(String fieldName, Object fieldVal, MetaObject metaObject)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">this</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setFieldValByName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;createTime&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">date</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">metaObject</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">this</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setFieldValByName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;updateTime&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">date</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">metaObject</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Override</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">public</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">updateFill</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">MetaObject</span><span class="token plain"> metaObject</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">this</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setFieldValByName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;updateTime&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">date</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">metaObject</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>测试插入和更新</p>
</li>
<li>
<p>成功</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="乐观锁">乐观锁<a href="#乐观锁" class="hash-link" aria-label="Direct link to 乐观锁" title="Direct link to 乐观锁">​</a></h3>
<p>在面试过程中，我们经常会被问道乐观锁，悲观锁，这个起始是非常简单</p>
<blockquote>
<p>乐观锁：顾名思义乐观锁。他总是认为不会出现问题，无论干什么都会不上锁，如果出现了问题，再次更新值的测试</p>
<p>悲观锁：顾名思义，他总是认为会出现问题，什么时候先上锁，再去操作</p>
</blockquote>
<p>我们主要理解乐观锁机制</p>
<p>乐观锁实现方式：</p>
<ul>
<li>取出记录时，获取当前 version</li>
<li>更新时，带上这个 version</li>
<li>执行更新时， set version = newVersion where version = oldVersion</li>
<li>如果 version 不对，就更新失败</li>
</ul>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">乐观锁：</span><span class="token number" style="color:#B5CEA8">1.</span><span class="token plain">先查询获得版本号 version </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> version</span><span class="token operator" style="color:#475569">+</span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">--</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">A</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> update user set name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> hyc</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> version </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> version</span><span class="token operator" style="color:#475569">+</span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain">\</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   where id </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">2</span><span class="token plain"> and vsersion</span><span class="token operator" style="color:#475569">=</span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token operator" style="color:#475569">--</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">B</span><span class="token plain">如果b线程抢先完成，这个时候 vsersion </span><span class="token operator" style="color:#475569">=</span><span class="token number" style="color:#B5CEA8">2</span><span class="token plain"> 会导致</span><span class="token class-name" style="color:#0ea5e9">A</span><span class="token plain">修改失败</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  update user set name </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> hyc</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> version </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> version</span><span class="token operator" style="color:#475569">+</span><span class="token number" style="color:#B5CEA8">1</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   where id </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">2</span><span class="token plain"> and vsersion</span><span class="token operator" style="color:#475569">=</span><span class="token number" style="color:#B5CEA8">1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>测试一下，MP 的乐观锁插件</p>
</blockquote>
<ol>
<li>
<p>数据库添加字段，version</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/35ece6da28d8faf0fe398b8507f23517.png" alt="image-20210725221328714" class="img_ev3q"></p>
</li>
<li>
<p>更新实体类</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Version</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">private</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">int</span><span class="token plain"> version</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>注册组件，编写 version 配置类</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//注册乐观锁插件</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">public</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">OptimisticLockerInterceptor</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">optimisticLockerInterceptor</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">OptimisticLockerInterceptor</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>测试</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">//乐观锁成功的情况，单线程下，一定成功</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">contextLoads2</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user user </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">user</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setId</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1419289393067204614l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setAge</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;保证我一路畅通无阻&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setEmail</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;3132774018@qq.com&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">int</span><span class="token plain"> result </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">updateById</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">result</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">user</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//  模拟多线程，测试乐观锁，被抢先的情况</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">contextLoads3</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user userSel </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectById</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setId</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setAge</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;保证我一路畅通无阻000&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setEmail</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;3132774018@qq.com&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user userSel1 </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectById</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel1</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setId</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel1</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setAge</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel1</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;保证我一路畅通无阻111&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        userSel1</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setEmail</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;3132774018@qq.com&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">int</span><span class="token plain"> result1 </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">updateById</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">userSel1</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">int</span><span class="token plain"> result </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">updateById</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">userSel</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>乐观锁线程插队了的结果</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/bd1a5bc202f1616264e7118026b531aa.png" alt="image-20210725223331964" class="img_ev3q"></p>
</li>
<li></li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="查询操作">查询操作<a href="#查询操作" class="hash-link" aria-label="Direct link to 查询操作" title="Direct link to 查询操作">​</a></h3>
<p>代码示例</p>
<blockquote>
<p>单个查询</p>
</blockquote>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">user userSel </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectById</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">userSel</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>批量查询</p>
</blockquote>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token class-name" style="color:#0ea5e9">List</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics">user</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> userList </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectBatchIds</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">Arrays</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">asList</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">2</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">3</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">userList</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">forEach</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token operator" style="color:#475569">::</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>条件查询</p>
</blockquote>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token class-name" style="color:#0ea5e9">HashMap</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics class-name" style="color:#0ea5e9">String</span><span class="token generics punctuation" style="color:#475569">,</span><span class="token generics class-name" style="color:#0ea5e9">Object</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> map </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">HashMap</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">map</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">put</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;name&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token string" style="color:#64748b">&quot;保证我一路畅通无阻&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token class-name" style="color:#0ea5e9">List</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics">user</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> users </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectByMap</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">map</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">users</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">forEach</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token operator" style="color:#475569">::</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="分页查询">分页查询<a href="#分页查询" class="hash-link" aria-label="Direct link to 分页查询" title="Direct link to 分页查询">​</a></h3>
<p>分页在网站使用的·十分之多</p>
<ol>
<li>原始的 limit 分页</li>
<li>pageHelper 第三方</li>
<li>MP 其实也内置了分页插件</li>
</ol>
<blockquote>
<p>怎么使用的？</p>
</blockquote>
<p>1、MP 分页插件组件导入</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">   </span><span class="token annotation punctuation" style="color:#475569">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">public</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">PaginationInterceptor</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">paginationInterceptor</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">PaginationInterceptor</span><span class="token plain"> paginationInterceptor </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">PaginationInterceptor</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">// 设置请求的页面大于最大页后操作， true调回到首页，false 继续请求  默认false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">// paginationInterceptor.setOverflow(false);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">// 设置最大单页限制数量，默认 500 条，-1 不受限制</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">// paginationInterceptor.setLimit(500);</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">// 开启 count 的 join 优化,只针对部分 left join</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        paginationInterceptor</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setCountSqlParser</span><span class="token punctuation" style="color:#475569">(</span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">JsqlParserCountOptimize</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> paginationInterceptor</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、直接使用 Page 对象即可！</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">//测试分页查询</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">selectByPage</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//参数一：当前页，参数二：页面条数大小</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">Page</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics">user</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> page </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">Page</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1</span><span class="token punctuation" style="color:#475569">,</span><span class="token number" style="color:#B5CEA8">5</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectPage</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#475569">,</span><span class="token keyword" style="color:#0c4a6e">null</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        page</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">getRecords</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">forEach</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token operator" style="color:#475569">::</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">page</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">getTotal</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="删除操作">删除操作<a href="#删除操作" class="hash-link" aria-label="Direct link to 删除操作" title="Direct link to 删除操作">​</a></h3>
<p>代码示例：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">//删除</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">deleteByid</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">deleteById</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//批量按id删除</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">deleteBybatchid</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">deleteBatchIds</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">Arrays</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">asList</span><span class="token punctuation" style="color:#475569">(</span><span class="token number" style="color:#B5CEA8">1419289393067204612l</span><span class="token punctuation" style="color:#475569">,</span><span class="token number" style="color:#B5CEA8">1419289393067204613l</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">//根据map条件删除</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">deleteBymapid</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token class-name" style="color:#0ea5e9">HashMap</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics class-name" style="color:#0ea5e9">String</span><span class="token generics punctuation" style="color:#475569">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#0ea5e9">Object</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> map </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">HashMap</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    map</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">put</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;id&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token string" style="color:#64748b">&quot;1419289393067204614&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">deleteByMap</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">map</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>在工作中会遇到一些问题，逻辑删除</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="逻辑删除">逻辑删除<a href="#逻辑删除" class="hash-link" aria-label="Direct link to 逻辑删除" title="Direct link to 逻辑删除">​</a></h3>
<blockquote>
<p>物理删除：从数据库直接移除</p>
<p>逻辑删除：再数据库中没有溢出，而是通过一个变量来让他失效！</p>
</blockquote>
<p>常见功能：管理员可以查看被删除的记录，防止数据的丢失，类似于回收站</p>
<p>测试一下：</p>
<ol>
<li>
<p>在数据表中添加一个 deleted 字段，</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/1012bd0bc0462fa6b0fc155d65ba2724.png" alt="image-20210726082115690" class="img_ev3q"></p>
</li>
<li>
<p>更新实体类，我们在需要代表逻辑删除的 orm 对象上添加<code>@TABLELOGIC</code>来代表逻辑删除</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token annotation punctuation" style="color:#475569">@TableLogic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">private</span><span class="token plain">  </span><span class="token keyword" style="color:#0c4a6e">int</span><span class="token plain"> deleted</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>逻辑删除组件配置</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"> </span><span class="token annotation punctuation" style="color:#475569">@Bean</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token keyword" style="color:#0c4a6e">public</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">ISqlInjector</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">sqlInjector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     </span><span class="token keyword" style="color:#0c4a6e">return</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">LogicSqlInjector</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>配置文件,对应的数据库字段是 deleted，0,1</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#逻辑删除</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">mybatis-plus.global-config.db-config.logic-delete-value=1</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">mybatis-plus.global-config.db-config.logic-not-delete-value=0</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>测试，我们执行的是删除，但是走的却是更新语句，改变的是逻辑删除的字段，</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/afb4f563a8bead4aa40ef1576acf058a.png" alt="image-20210726082805743" class="img_ev3q"></p>
<p>我们再查看数据库，记录还在，只是字段被更新了；逻辑删除的字段</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/8d59bb953bb4b16e694a902aec448034.png" alt="image-20210726082912951" class="img_ev3q"></p>
<p>我们再去查寻的时候，deleted 为 1 就是被删除后，他会自动拼接到之后的 sql 中，加入只查询 deleted 为 0 的字段</p>
</li>
<li>
<p>以上的所有 crud 及其扩展操作，我们都必须精通掌握，会大大提高效率</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="性能分析插件新版本弃用了新版本有替代的新分析">性能分析插件（新版本弃用了）新版本有替代的新分析<a href="#性能分析插件新版本弃用了新版本有替代的新分析" class="hash-link" aria-label="Direct link to 性能分析插件（新版本弃用了）新版本有替代的新分析" title="Direct link to 性能分析插件（新版本弃用了）新版本有替代的新分析">​</a></h3>
<p>我们在平时的开发中，会遇到一些慢 sql。测试，druid</p>
<p>MP 也提供了性能分析插件，如果超过了时间就停止运行</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/849b73106edbc9ab345c14dc089e202b.png" alt="image-20210726092011898" class="img_ev3q"></p>
<p>导入之后执行 sql 就会有相应的东西了</p>
<p>只要超过了规定的执行的时间，就抛出异常</p>
<p>好处：</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="条件构造器-warpper">条件构造器 warpper<a href="#条件构造器-warpper" class="hash-link" aria-label="Direct link to 条件构造器 warpper" title="Direct link to 条件构造器 warpper">​</a></h3>
<p>十分重要，：warpper</p>
<p>我们写一些复杂的 sql 就可以用它来代替</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/cfe8a4f2c390f4ad4ff6e10812739fcb.png" alt="image-20210726092402640" class="img_ev3q"></p>
<p>我们的所有条件都可以用这个构造器来使用</p>
<p><strong>PS:</strong> 记得查看输出的 sql 进行分析</p>
<p>测试一，</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token function" style="color:#0e7490">contextLoads</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">QueryWrapper</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics">user</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> wrapper </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">QueryWrapper</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        wrapper</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">isNotNull</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;name&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">isNotNull</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;email&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">ge</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;age&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token number" style="color:#B5CEA8">12</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">wrapper</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">forEach</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token operator" style="color:#475569">::</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>测试二</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token annotation punctuation" style="color:#475569">@Test</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token keyword" style="color:#0c4a6e">void</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">Test2</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//right和left的区别 %t，t%</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">QueryWrapper</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics">user</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> wrapper </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">QueryWrapper</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            wrapper</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">notLike</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;name&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token string" style="color:#64748b">&quot;e&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">likeRight</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;email&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token string" style="color:#64748b">&quot;t&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">List</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics class-name" style="color:#0ea5e9">Map</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics class-name" style="color:#0ea5e9">String</span><span class="token generics punctuation" style="color:#475569">,</span><span class="token generics"> </span><span class="token generics class-name" style="color:#0ea5e9">Object</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> maps </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> usermapper</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">selectMaps</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">wrapper</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        maps</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">forEach</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">out</span><span class="token operator" style="color:#475569">::</span><span class="token function" style="color:#0e7490">println</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>剩下的自己测试</p>
</blockquote>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="代码生成器">代码生成器<a href="#代码生成器" class="hash-link" aria-label="Direct link to 代码生成器" title="Direct link to 代码生成器">​</a></h3>
<p>AutoGenerator 是 MyBatis-Plus 的代码生成器，通过 AutoGenerator 可以快速生成 Entity、Mapper、Mapper XML、Service、Controller 等各个模块的代码，极大的提升了开发效率。</p>
<p>需要依赖</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">com.baomidou</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">mybatis-plus-generator</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">3.4.1</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>记得导入自己的模版引擎需要的依赖,这里我们测试使用的是默认的</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.apache.velocity</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">velocity-engine-core</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">latest-velocity-version</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>测试：配置好的代码生成器</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">   </span><span class="token comment" style="color:#6A9955">//构建一个代码生成器对象</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">AutoGenerator</span><span class="token plain"> generator </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">AutoGenerator</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//配置策略</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//1.全局配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">GlobalConfig</span><span class="token plain"> gc </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">GlobalConfig</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">String</span><span class="token plain"> projectpath </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">System</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">getProperty</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;user.dir&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//项目地址</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setOutputDir</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">projectpath</span><span class="token operator" style="color:#475569">+</span><span class="token string" style="color:#64748b">&quot;/src/main/java&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setAuthor</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;hyc&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setOpen</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setFileOverride</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">false</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//是否覆盖</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setServiceImplName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;%sService&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//接口前缀，不要</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setIdType</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">IdType</span><span class="token punctuation" style="color:#475569">.</span><span class="token constant" style="color:#0f172a">ID_WORKER</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//策略id</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setDateType</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">DateType</span><span class="token punctuation" style="color:#475569">.</span><span class="token constant" style="color:#0f172a">ONLY_DATE</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//时间类型</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        gc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setSwagger2</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//开启Swagger</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        generator</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setGlobalConfig</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">gc</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//2.数据源配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">DataSourceConfig</span><span class="token plain"> dsc </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">DataSourceConfig</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        dsc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setDriverName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;com.mysql.cj.jdbc.Driver&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        dsc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setUsername</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;root&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        dsc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setPassword</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;root&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        dsc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setUrl</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;jdbc:mysql://localhost:3306/mybatis_plus?userSSL=false&amp;useUnicode=true&amp;characterEncoding=utf-8&amp;serverTimezone=GMT%2B8&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        dsc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setDbType</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">DbType</span><span class="token punctuation" style="color:#475569">.</span><span class="token constant" style="color:#0f172a">MYSQL</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//这只数据库</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        generator</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setDataSource</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">dsc</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//3.包配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">PackageConfig</span><span class="token plain"> pc </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">PackageConfig</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        pc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setModuleName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;blog&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        pc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setParent</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;com.hyc&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        pc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setEntity</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;pojo&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        pc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setMapper</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;mapper&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        pc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setService</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;Service&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        pc</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setController</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;controller&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        generator</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setPackageInfo</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">pc</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//策略配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">StrategyConfig</span><span class="token plain"> strategy </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">StrategyConfig</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setInclude</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;user&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//配置映射的表名可以写很多个比如：user，role，region</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setNaming</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">NamingStrategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">underline_to_camel</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//驼峰</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setColumnNaming</span><span class="token punctuation" style="color:#475569">(</span><span class="token class-name" style="color:#0ea5e9">NamingStrategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token plain">underline_to_camel</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//数据库的名字转换</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setEntityLombokModel</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//是否开启lombok</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setRestControllerStyle</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//逻辑删除</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setLogicDeleteFieldName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;deleted&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//自动填充</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">TableFill</span><span class="token plain"> gmtcreate </span><span class="token operator" style="color:#475569">=</span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">TableFill</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;create_time&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">FieldFill</span><span class="token punctuation" style="color:#475569">.</span><span class="token constant" style="color:#0f172a">INSERT</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//再新增的时候填充</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">TableFill</span><span class="token plain"> gmtupd</span><span class="token operator" style="color:#475569">=</span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">TableFill</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;update_time&quot;</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">FieldFill</span><span class="token punctuation" style="color:#475569">.</span><span class="token constant" style="color:#0f172a">INSERT_UPDATE</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//再新增和更新的时候填充</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token class-name" style="color:#0ea5e9">ArrayList</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics class-name" style="color:#0ea5e9">TableFill</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token plain"> tablefill </span><span class="token operator" style="color:#475569">=</span><span class="token plain"> </span><span class="token keyword" style="color:#0c4a6e">new</span><span class="token plain"> </span><span class="token class-name" style="color:#0ea5e9">ArrayList</span><span class="token generics punctuation" style="color:#475569">&lt;</span><span class="token generics punctuation" style="color:#475569">&gt;</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        tablefill</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">add</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">gmtcreate</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        tablefill</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">add</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">gmtupd</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setTableFillList</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">tablefill</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">//乐观锁</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setVersionFieldName</span><span class="token punctuation" style="color:#475569">(</span><span class="token string" style="color:#64748b">&quot;version&quot;</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//sersion叫变量</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setRestControllerStyle</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//开启restful风格接口</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        strategy</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setControllerMappingHyphenStyle</span><span class="token punctuation" style="color:#475569">(</span><span class="token boolean">true</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token comment" style="color:#6A9955">//请求风格，localhost/v1/id_ps_..</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        generator</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">setStrategy</span><span class="token punctuation" style="color:#475569">(</span><span class="token plain">strategy</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        generator</span><span class="token punctuation" style="color:#475569">.</span><span class="token function" style="color:#0e7490">execute</span><span class="token punctuation" style="color:#475569">(</span><span class="token punctuation" style="color:#475569">)</span><span class="token punctuation" style="color:#475569">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>效果：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/b1a911d9411dcfd4f835ebf31798c6c2.png" alt="image-20210726103234754" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="完结">完结<a href="#完结" class="hash-link" aria-label="Direct link to 完结" title="Direct link to 完结">​</a></h2>
<p>完结撒花，这个 mp 确实太猛了，大幅度的减少了，一些操作，自动化帮你做了很多东西，十分可靠的一个提升效率的工具！！！完事</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Java/Spring内置MVC框架：SpringMVC"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SpringMVC</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Java/redis问题的常见解决方案"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">redis问题的常见解决方案</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#简介" class="table-of-contents__link toc-highlight">简介</a><ul><li><a href="#特性" class="table-of-contents__link toc-highlight">特性</a></li></ul></li><li><a href="#快速入门" class="table-of-contents__link toc-highlight">快速入门</a><ul><li><a href="#步骤" class="table-of-contents__link toc-highlight">步骤</a></li></ul></li><li><a href="#日志" class="table-of-contents__link toc-highlight">日志</a></li><li><a href="#crud-拓展" class="table-of-contents__link toc-highlight">CRUD 拓展</a><ul><li><a href="#插入操作" class="table-of-contents__link toc-highlight">插入操作</a></li><li><a href="#主键生成策略" class="table-of-contents__link toc-highlight">主键生成策略</a></li><li><a href="#更新操作" class="table-of-contents__link toc-highlight">更新操作</a></li><li><a href="#自动填充" class="table-of-contents__link toc-highlight">自动填充</a></li><li><a href="#乐观锁" class="table-of-contents__link toc-highlight">乐观锁</a></li><li><a href="#查询操作" class="table-of-contents__link toc-highlight">查询操作</a></li><li><a href="#分页查询" class="table-of-contents__link toc-highlight">分页查询</a></li><li><a href="#删除操作" class="table-of-contents__link toc-highlight">删除操作</a></li><li><a href="#逻辑删除" class="table-of-contents__link toc-highlight">逻辑删除</a></li><li><a href="#性能分析插件新版本弃用了新版本有替代的新分析" class="table-of-contents__link toc-highlight">性能分析插件（新版本弃用了）新版本有替代的新分析</a></li><li><a href="#条件构造器-warpper" class="table-of-contents__link toc-highlight">条件构造器 warpper</a></li><li><a href="#代码生成器" class="table-of-contents__link toc-highlight">代码生成器</a></li></ul></li><li><a href="#完结" class="table-of-contents__link toc-highlight">完结</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">  来自冷环渊的技术支持与文档创作 @2025</div></div></div></footer></div>
</body>
</html>