<!doctype html>
<html lang="cn" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-Java/SpringBoot 解决企业级复杂性简化开发的神奇" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">微服务阶段 | 小冷の代码世界</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://your-docusaurus-site.example.com/img/docusaurus-social-card.jpg"><meta data-rh="true" property="og:url" content="https://your-docusaurus-site.example.com/docs/Java/SpringBoot 解决企业级复杂性简化开发的神奇"><meta data-rh="true" property="og:locale" content="cn"><meta data-rh="true" name="docusaurus_locale" content="cn"><meta data-rh="true" name="docsearch:language" content="cn"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="微服务阶段 | 小冷の代码世界"><meta data-rh="true" name="description" content="我们的学习历程"><meta data-rh="true" property="og:description" content="我们的学习历程"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://your-docusaurus-site.example.com/docs/Java/SpringBoot 解决企业级复杂性简化开发的神奇"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/Java/SpringBoot 解决企业级复杂性简化开发的神奇" hreflang="cn"><link data-rh="true" rel="alternate" href="https://your-docusaurus-site.example.com/docs/Java/SpringBoot 解决企业级复杂性简化开发的神奇" hreflang="x-default"><link rel="stylesheet" href="/assets/css/styles.15cbc4ab.css">
<script src="/assets/js/runtime~main.41489e3b.js" defer="defer"></script>
<script src="/assets/js/main.53b12e53.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="小冷の代码世界" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="小冷の代码世界" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">小冷の代码世界</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/Java/Docker 快速入门">Java知识库</a><a class="navbar__item navbar__link" href="/docs/Web/JavaScript 高级">前端知识库</a><a class="navbar__item navbar__link" sidebarid="GodotSidebar" href="/docs/Godot">Godot游戏开发</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/Doomwatcher2004" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Github<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Docker 快速入门">Docker</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Java 8 更新的新特性 （函数式接口 lambda stream option）">Java8 新特性</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Java后端进阶之路： JavaWeb">javaweb</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Mybatis">Mybatis</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty+springboot实现IM即时通讯服务端">Netty+springboot实现IM即时通讯服务端</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty_HTTP文件列表服务器">Netty_HTTP文件列表服务器</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty_模拟Redis的客户端">Netty_模拟Redis的客户端</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Netty网络框架">Netty 网络框架</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Nginx">Nginx</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Redis 数据结构操作入门">Redis 数据结构操作入门</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Spring Aop 底层责任链思路实现">Spring Aop 底层责任链思路实现</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Spring5 Webflux 响应式编程">Spring5 Webflux</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/Java/SpringBoot 解决企业级复杂性简化开发的神奇">微服务阶段</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/SpringCloud Alibaba">springCloudAlibaba</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/SpringCloud Netflix">springcloud2020</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/Spring内置MVC框架：SpringMVC">SpringMVC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/mybatis plus">mybatis plus</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/redis问题的常见解决方案">redis问题的常见解决方案</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/使用Netty+zookeeper开发一款高性能LRpc">RPC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/六道入门树题目带你走入树结构的世界">六道入门树题目带你走入树结构的世界</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/分布式项目中锁的应用（本地锁-redis【setnx】-redisson-springcache）">分布式项目中锁的应用（本地锁-redis【setnx】-redisson-springcache）</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/多线程进阶 JUC并发编程">多线程进阶 JUC 并发编程</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/大前端进阶（ES6）">ES6</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/快速入门RabbitMQ并且加入项目实战">快速入门RabbitMQ并且加入项目实战</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/快速入门分布式系统与Dubbo+zookeeper">分布式系统简述：</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/掌握极简服务器开发的优秀框架 ：Spring">Spring</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/搜索引擎 _ Elasticsearch">Elasticsearch</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/数据结构与算法">数据结构与算法</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/理解IOC 手写springIOC">Spring 手撕 IOC</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/线程池详解与异步任务编排使用案例">线程池详解与异步任务编排使用案例</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/通透百万数据秒级排序  快速排序">通透百万数据秒级排序  快速排序</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/阿里淘系单点登录中心">阿里淘系单点登录中心</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/Java/高并发秒杀系统">高并发秒杀系统</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">微服务阶段</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>微服务阶段</h1></header>
<p>我们的学习历程</p>
<p>javase：oop</p>
<p>mysql：持久化</p>
<p>html+css+js+jquery+框架：视图，框架不熟练，css 不好</p>
<p>javaweb：独立开发 MVC 架构的网站：原始</p>
<p>ssm:框架：简化了我们的开发流程</p>
<p>打包出来是：war：tomcat 运行</p>
<p>Spring 再简化：SpringBoot-jar:内嵌 tomcat； 微服务架构！</p>
<p>服务越来越多：SpringCloud；</p>
<h1>问题总结</h1>
<ol>
<li>org.springframework.core.annotation.AnnotationConfigurationException: Attribute proxyBeanMethods in annotation 应该是 jar 包的版本与其他依赖包版本不一致，解决方法是更换版本号</li>
<li>java 类必须要有无参构造函数才能实现自动装配，否则会报错运行不了。</li>
<li>问题：src 外的 config 文件夹没有加载到 target 目录下所以下面的配置文件无法被识别
解决:项目要作为单独的 project，而不能作为一个 module</li>
<li>springboot 版本问题，旧的 favicon 头像设置方式不生效
将 favicon.ico 放入资源文件夹中，然后在 index 欢迎页面引入下列语句
link rel=icon href=favicon.ico type=image/x-icon/</li>
<li>用自定义的视图解析器，自定义的国际化视图解析器的方法名必须是 localeResolver。</li>
<li>关于 restful 风格传参
th:href=@{/emp/{id}(id=${emp.getId()})}
th:href=@{/emp/{id}/(id=${emp.getId()})}
th:href=@{/emp/+${emp.getId()}}</li>
</ol>
<h1>SpringBoot</h1>
<p>Spring 视为了解决企业级应用开发的复杂性而创建的，简化开发，</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="spring-如何简化-java-开发">Spring 如何简化 java 开发<a href="#spring-如何简化-java-开发" class="hash-link" aria-label="Direct link to Spring 如何简化 java 开发" title="Direct link to Spring 如何简化 java 开发">​</a></h3>
<p>为了降低 java 开发的复杂性，Spring 采用了四种关键策略；</p>
<ol>
<li>基于实体类的轻量级，最小入侵性变成；</li>
<li>通过 ioc，依赖注入和面向接口实现松耦合</li>
<li>基于切面(AOP)和管理进行声明式变成；</li>
<li>通过切面和模版减少样式代码</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-springboot">什么是 SpringBoot？<a href="#什么是-springboot" class="hash-link" aria-label="Direct link to 什么是 SpringBoot？" title="Direct link to 什么是 SpringBoot？">​</a></h3>
<p>javaweb：Servlet+tomcat，后来是 Struts，再后来是 SpringMVC 到了现在的 SpringBoot,过一两年还会出现新的前端框架，技术快速迭代，程序员需要不断学习，</p>
<p>新服务架构：服务网格，可能会干掉 SpringBoot 来完成新的微服务架构</p>
<p>老师，领导，项目经理：</p>
<ul>
<li>培训讲师：
<ul>
<li>面向面试培训，教你如何使用，快速上手！</li>
</ul>
</li>
<li>做教育的
<ul>
<li>如何学习新东西，如何持续学习,如何关注这个行业！</li>
<li>教你历史，来龙去脉，理论；积累谈资</li>
</ul>
</li>
</ul>
<p>30，经理</p>
<p>30：程序猿：淘汰！</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="java-框架的迭代">java 框架的迭代<a href="#java-框架的迭代" class="hash-link" aria-label="Direct link to java 框架的迭代" title="Direct link to java 框架的迭代">​</a></h3>
<p>SpringBoot 其实就是 javaweb 开发框架，于 SpringMVC 类似，对比其他开发框架的 好处就是简化开发，约定大于配置，你只管训醒：you can just run 能够快速开发 web 应用，几行代码实现一个 http 接口</p>
<p>所有的技术框架的发展，都遵循这一个条主线规律，从复杂的应用场景，衍生出规范框架。人们在实际生产应用情况不断的精简，吸收设计精华，重构新的，更轻量级的框架，逐渐提升开发效率，之后开始提倡约定大于配置进而衍生一些一站式的解决方案，</p>
<p>j2EE --------&gt; spring--------&gt;springboot</p>
<p>随着发展，Spring 涉及的领域越来越多，项目的整合开发需要配置大量的配置文件妈妈那么难的变得不那么易用简单，违背了最初的理念，甚至被人称为配置地狱，SpringBoot 正是这样一个背景下被抽象出来的开发框架，目的就是为了让大家容易的使用 Spring，更容易集合中间件和开源软件</p>
<p>Spring boot 基于 Spring 开发，boot 本身并不提供 Spring 的核心特性以及拓展功能，只是用于快速的开发新一个基于 SPRING 框架的应用程序，也就是说，他并不是代替 Spring 的解决方案，而是和 Spring 框架紧密结合用于提升，Spring 开发者的体验工具。Springboot**约定大于配置的核心思想，默认帮我们进行了很多的设置，多数的 SpringBoot 应用很少的 Spring 配置，同时集成了大量常用的第三方库配置，几乎所有的第三方库都是开箱即用。</p>
<p>**SpringBoot 主要优点：</p>
<ul>
<li>为了所有 Spring 开发这更快入门</li>
<li>开箱即用，提供各种默认配置简化项目配置</li>
<li>内嵌式容器简化 web 项目</li>
<li>没有冗余代码和 xml 的配置要求</li>
</ul>
<p>约定大于配置：maven------&gt;spring-------&gt;springMVC----&gt;SpringBoot</p>
<p>正常的程序=数据结构+算法==》程序员---》i 创造性角色</p>
<p>机构的程序=面向对象+框架 ==》码农--》会用别人的东西，干事</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="微服务">微服务<a href="#微服务" class="hash-link" aria-label="Direct link to 微服务" title="Direct link to 微服务">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是微服务">什么是微服务？<a href="#什么是微服务" class="hash-link" aria-label="Direct link to 什么是微服务？" title="Direct link to 什么是微服务？">​</a></h3>
<p>微服务是一个中架构风格，它要求我们在开发一个应用的时候，这个应用必须构建成一个系列小小服务的组合；可以通过 http 的方法进行互通。要说为微服务架构，先得说说我们以前的单体引用架构。</p>
<p>架构：MVC 三层架构， MVVM ，微服务架构</p>
<p>业务：service：userService ===&gt;模块！</p>
<p>SpringMVC，controller ===&gt;提供接口！</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="单体应用架构">单体应用架构<a href="#单体应用架构" class="hash-link" aria-label="Direct link to 单体应用架构" title="Direct link to 单体应用架构">​</a></h3>
<p>所谓单体引用（all in one）是指，我们将一个应用的中的所有应用的中的所有应用服务封装在一个应用中，无论是 erp。crm 或是其他系统，都吧数据库访问，web 访问，等等功能方到一个 war 包内</p>
<ul>
<li>好处是：易于开发测试，，部署起来十分方便，当需要拓展的时候，只需要将 war 复制多份，然后放在多个服务器上，在做负载均衡就可以</li>
<li>缺点是：单体应用架构的缺点是，哪怕我要修改非常小的地方，我都需要停掉整个服务，重新打包，部署这个应用 war 包，特别是对于一个大型应用，我们不可能吧所有的内容都放在一个应用里，我们如何维护，如何分工都是问题</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="微服务架构">微服务架构<a href="#微服务架构" class="hash-link" aria-label="Direct link to 微服务架构" title="Direct link to 微服务架构">​</a></h3>
<p>all in one 的架构方式没我们把所有的功能单元放在一个应用里面。整个应用部署在服务器上，如果负载能力不行，我们将整个应用水平赋值，进行扩展，之后负载均衡</p>
<p>所谓微服务架构，就是打破之前的 all in one 的架构方式，把每个功能元素独立出来，把独立出来的功能元素动态组合，需要的功能元素才组合在一起，需要时间多一些，可以整合多个功能的元素。所以微服务架构是对功能元素进行复制，</p>
<p>好处：</p>
<ol>
<li>节省，调用资源</li>
<li>每个功能元素的服务都是一个可替换的可独立升级的软件代码，</li>
</ol>
<p>详细阐述了什么是微服务：<a href="https://www.martinfowler.com/articles/microservices.html" target="_blank" rel="noopener noreferrer">https://www.martinfowler.com/articles/microservices.html</a></p>
<p>中文版：<a href="https://www.cnblogs.com/liuning8023/p/4493156.html" target="_blank" rel="noopener noreferrer">https://www.cnblogs.com/liuning8023/p/4493156.html</a></p>
<p>http: rpc</p>
<p>用户下单： controller! 1000ms</p>
<p>消息队列：</p>
<p>仓库冻结：资金冻结，验证，购买成功，仓库数量减少，仓库解冻，资金解冻 10 s</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何构建微服务">如何构建微服务<a href="#如何构建微服务" class="hash-link" aria-label="Direct link to 如何构建微服务" title="Direct link to 如何构建微服务">​</a></h3>
<p>一个大型系统的微服务架构，就像一个复杂交织，神经网络，每一个神经元就像是一个功能元素，它们各自完成自己的功能，然后通过 http 相互请求调用。比如一个电商系统，查缓存，连数据库，浏览页面，结账，支付等服务都是一个一个独立的功能服务，都被微化了，他们作为一个个微服务共同构建了一个庞大的系统，如果修改其中的一个功能，只需要更新升级其中一个功能服务单元即可。</p>
<p>​ 但是这种庞大的系统架构给部署和运维带来很大的难度。于是，spring 为我们带来了构建大型分布式微服务的全套、全程产品：</p>
<ul>
<li>​ 构建一个个功能独立的微服务应用单元，可以使用 SpringBoot，可以帮助我们快速的构建一个应用；</li>
<li>大型分布式网络服务的调用，这部分由 Springcloud 来完成，实现分布式；</li>
<li>在分布式中间，进行流式数据计算，批处理，我们有 spring cloud data flow。</li>
<li>spring 为我们想清楚了整个从开始构建应用到大型分布式应用全流程方案</li>
</ul>
<p>高内聚，低耦合，</p>
<p>面试：</p>
<p>8k-13k：软实力：聊天+举止+谈吐+见解</p>
<p>你主导面试官:13k:聊天 30 分钟</p>
<p>面试官主导你:8k</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="第一个-springboot-程序">第一个 SpringBoot 程序<a href="#第一个-springboot-程序" class="hash-link" aria-label="Direct link to 第一个 SpringBoot 程序" title="Direct link to 第一个 SpringBoot 程序">​</a></h2>
<p>环境：</p>
<ul>
<li>jdk1.8</li>
<li>maven 3.6.2</li>
<li>SpringBoot 最新版</li>
<li>idea</li>
</ul>
<p>官方提供了一个快速生成网站！idea 集成了这个网站！</p>
<ul>
<li>可以在官网直接下载，导入 idea 开发（官网在哪里）</li>
<li>直接使用 idea 创建一个 SpringBoot 项目（常用）</li>
</ul>
<p>简单编写个 controller 类来看看如何运行的</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.spring01helloworld.Controller;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.stereotype.Controller;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.GetMapping;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.RequestMapping;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.ResponseBody;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@RequestMapping(&quot;/hello&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class helloController {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @GetMapping(&quot;/hello&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String hello(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;hello&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>maven 打包注意事项</p>
<p>utf-8 报错：</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">	</span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">project.build.sourceEncoding</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				UTF-8</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">	</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">project.build.sourceEncoding</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="原理初探">原理初探<a href="#原理初探" class="hash-link" aria-label="Direct link to 原理初探" title="Direct link to 原理初探">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="自动装配">自动装配：<a href="#自动装配" class="hash-link" aria-label="Direct link to 自动装配：" title="Direct link to 自动装配：">​</a></h3>
<p>pom.xml:</p>
<ul>
<li>Spring-boot-dependencies:核心依赖在父项目</li>
<li>我们在写或者引入一些 Springboot 依赖的时候，不需要指定版本，就应为这些版本仓库</li>
</ul>
<p>启动器</p>
<ul>
<li>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>启动器：就是 Springboot 的启动场景</p>
</li>
<li>
<p>比如：spring-boot-starter-web,他就会帮我们自动当如相关依赖</p>
</li>
<li>
<p>springboot 会将所有的功能场景，都变成一个个的启动器</p>
</li>
<li>
<p>我们要使用什么功能，就只需要找到对应的启动器就可以了</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="主程序">主程序：<a href="#主程序" class="hash-link" aria-label="Direct link to 主程序：" title="Direct link to 主程序：">​</a></h3>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Spring01HelloworldApplication {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        SpringApplication.run(Spring01HelloworldApplication.class, args);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ul>
<li>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="注解">注解：<a href="#注解" class="hash-link" aria-label="Direct link to 注解：" title="Direct link to 注解：">​</a></h4>
<ul>
<li>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@SpringBootConfiguration springboot的 配置</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Configuration spring配置类</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Component   spring组件</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@EnableAutoConfiguration 自动装配</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @AutoConfigurationPackage：spring自动配置包</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> 	@Import({AutoConfigurationImportSelector.class}) 自动装配包 注册</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Import({Registrar.class}) 配置导入选择</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //获取所有的配置</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    List&lt;String&gt; configurations = this.getCandidateConfigurations(annotationMetadata, attributes);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
</li>
</ul>
<p>获取候选的配置</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">protected List&lt;String&gt; getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        List&lt;String&gt; configurations = SpringFactoriesLoader.loadFactoryNames(this.getSpringFactoriesLoaderFactoryClass(), this.getBeanClassLoader());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Assert.notEmpty(configurations, &quot;No auto configuration classes found in META-INF/spring.factories. If you are using a custom packaging, make sure that file is correct.&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return configurations;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>加载项目自动装配文件</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">private static Map&lt;String, List&lt;String&gt;&gt; loadSpringFactories(ClassLoader classLoader) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Map&lt;String, List&lt;String&gt;&gt; result = (Map)cache.get(classLoader);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (result != null) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return result;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            HashMap result = new HashMap();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                Enumeration urls = classLoader.getResources(&quot;META-INF/spring.factories&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                while(urls.hasMoreElements()) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    URL url = (URL)urls.nextElement();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    UrlResource resource = new UrlResource(url);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    Properties properties = PropertiesLoaderUtils.loadProperties(resource);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    Iterator var6 = properties.entrySet().iterator();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    while(var6.hasNext()) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        Entry&lt;?, ?&gt; entry = (Entry)var6.next();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        String factoryTypeName = ((String)entry.getKey()).trim();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        String[] factoryImplementationNames = StringUtils.commaDelimitedListToStringArray((String)entry.getValue());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        String[] var10 = factoryImplementationNames;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        int var11 = factoryImplementationNames.length;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        for(int var12 = 0; var12 &lt; var11; ++var12) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                            String factoryImplementationName = var10[var12];</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                            ((List)result.computeIfAbsent(factoryTypeName, (key) -&gt; {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                                return new ArrayList();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                            })).add(factoryImplementationName.trim());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                result.replaceAll((factoryType, implementations) -&gt; {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    return (List)implementations.stream().distinct().collect(Collectors.collectingAndThen(Collectors.toList(), Collections::unmodifiableList));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                });</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                cache.put(classLoader, result);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                return result;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            } catch (IOException var14) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                throw new IllegalArgumentException(&quot;Unable to load factories from location [META-INF/spring.factories]&quot;, var14);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>自动配置的核心文件</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">META-INF/spring.factories</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/592d0365a47ae005e21c766e7819d74b-16808671270401344.png" alt="image-20210617101138398" class="img_ev3q"></p>
<p>加载到 properties 中：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"> Properties properties = PropertiesLoaderUtils.loadProperties(resource);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>判断条件成立才自动装配</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@ConditionalOnClass(Advice.class)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>结论：springboot 所有的自动配置都是在启动的时候扫描并加载：<code>META-INF/spring.factories</code>所有的自动配置类都在这里面，但是不一定生效，判断条件是否成立，只要导入了对应的 start，就有对应的启动器，有了启动器我们自动装配就会生效，然后就配置成功了！</p>
<p>执行原理图：</p>
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-TAuyWXVl-1648917634750)(<a href="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20(1)%5D.png" target="_blank" rel="noopener noreferrer">https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/%E6%9C%AA%E5%91%BD%E5%90%8D%E6%96%87%E4%BB%B6%20(1)].png</a>)</p>
<ol>
<li>Springboot 在启动的时候，从类路径下的 META-INF/<code>spring.factories</code>获取指定的值；</li>
<li>将这些自动配置的类导入容器，自动配置类就会生效，帮我们进行自动配置</li>
<li>以前我们需要自动配置的东西，现在只要符合条件 Springboot 帮我们做了</li>
<li>整合 javaEE 的解决方案和自动配置的东西都在 spring-boot-autoconfigure-2.5.1.jar 这个包下</li>
<li>它会把所有需要导入的组件，以类名的方式返回，这些组件就会被添加到容器；</li>
<li>容器中也会存在非常多的 XXXXautoconfiguration 的文件，就是这些类容器中导入了这个场景需要的所有组件并且自动配置，@Configuration</li>
<li>有了自动配置类，就免去了我们手动编写配置文件的工作，远离配置地狱！！！</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="run-执行原理">run 执行原理<a href="#run-执行原理" class="hash-link" aria-label="Direct link to run 执行原理" title="Direct link to run 执行原理">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="run">run<a href="#run" class="hash-link" aria-label="Direct link to run" title="Direct link to run">​</a></h4>
<p>开启服务</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.spring01helloworld;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.boot.SpringApplication;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.boot.autoconfigure.SpringBootApplication;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//@SpringBootApplication  标注这个类是一个springboot的应用：启动类下的资源全部被导入</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@SpringBootApplication</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Spring01HelloworldApplication {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        SpringApplication.run(Spring01HelloworldApplication.class, args);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="springbootapplicationrun-分析">SpringBootApplication.run 分析<a href="#springbootapplicationrun-分析" class="hash-link" aria-label="Direct link to SpringBootApplication.run 分析" title="Direct link to SpringBootApplication.run 分析">​</a></h4>
<p>主要是两个部分，一个是 SpringBootApplication 实例化，一个是 run 的执行</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="springbootapplication">SpringBootApplication<a href="#springbootapplication" class="hash-link" aria-label="Direct link to SpringBootApplication" title="Direct link to SpringBootApplication">​</a></h4>
<p>执行的步骤：</p>
<ol>
<li>推断应用类型是普通的 java 项目还是 web 项目</li>
<li>查找并加载所有可用的初始化器，设置到 initializers 实行中</li>
<li>找出所有的应用程序监听器，设置到 listeners 属性中</li>
<li>推断并且设置 main 方法定义类，找到运行的主类</li>
</ol>
<p>查看构造器</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    public SpringApplication(ResourceLoader resourceLoader, Class&lt;?&gt;... primarySources) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.sources = new LinkedHashSet();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.bannerMode = Mode.CONSOLE;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.logStartupInfo = true;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.addCommandLineProperties = true;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.addConversionService = true;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.headless = true;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.registerShutdownHook = true;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.additionalProfiles = Collections.emptySet();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.isCustomEnvironment = false;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.lazyInitialization = false;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.applicationContextFactory = ApplicationContextFactory.DEFAULT;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.applicationStartup = ApplicationStartup.DEFAULT;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.resourceLoader = resourceLoader;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Assert.notNull(primarySources, &quot;PrimarySources must not be null&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.primarySources = new LinkedHashSet(Arrays.asList(primarySources));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.webApplicationType = WebApplicationType.deduceFromClasspath();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.bootstrapRegistryInitializers = this.getBootstrapRegistryInitializersFromSpringFactories();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.setInitializers(this.getSpringFactoriesInstances(ApplicationContextInitializer.class));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.setListeners(this.getSpringFactoriesInstances(ApplicationListener.class));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.mainApplicationClass = this.deduceMainApplicationClass();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-配置">SpringBoot 配置<a href="#springboot-配置" class="hash-link" aria-label="Direct link to SpringBoot 配置" title="Direct link to SpringBoot 配置">​</a></h2>
<ol>
<li>官方配置太多，</li>
<li>如何配置 tml</li>
<li>学习原理，一通百通</li>
</ol>
<p>官方配置链接：<a href="https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html#application-properties</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yml-是什么">yml 是什么?<a href="#yml-是什么" class="hash-link" aria-label="Direct link to yml 是什么?" title="Direct link to yml 是什么?">​</a></h3>
<p><em>YAML</em>是&quot;YAML Ain&#x27;t a Markup Language&quot;（YAML 不是一种<a href="https://baike.baidu.com/item/%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">标记语言</a>）的<a href="https://baike.baidu.com/item/%E9%80%92%E5%BD%92%E7%BC%A9%E5%86%99" target="_blank" rel="noopener noreferrer">递归缩写</a>。在开发的这种语言时，<em>YAML</em> 的意思其实是：&quot;Yet Another Markup Language&quot;（仍是一种<a href="https://baike.baidu.com/item/%E6%A0%87%E8%AE%B0%E8%AF%AD%E8%A8%80" target="_blank" rel="noopener noreferrer">标记语言</a>），但为了强调这种语言以数据做为中心，而不是以标记语言为重点，而用反向缩略语重命名。</p>
<p>标记语言：</p>
<p>以前的配置文件，大多数都是用 xml 来配置，比如一个简单的端口配置，我们来对比下 yaml 和 xml 的区别</p>
<p>yml：</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token key atrule">server</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">8080</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>xml：</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">server</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">port</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">8080</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">port</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">server</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yml特点">yml:特点<a href="#yml特点" class="hash-link" aria-label="Direct link to yml:特点" title="Direct link to yml:特点">​</a></h3>
<ol>
<li>K：V</li>
<li>对空格的要求十分高</li>
<li>普通的 key-value</li>
<li>可以注入到我们的配置类中</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="两种赋值方式">两种赋值方式<a href="#两种赋值方式" class="hash-link" aria-label="Direct link to 两种赋值方式" title="Direct link to 两种赋值方式">​</a></h3>
<p>1.注解赋值</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Dog {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Value(&quot;郑文杰&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Value(&quot;3&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Integer age;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2.YML 注入</p>
<p>实体类：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class person {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Integer age;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Boolean happy;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Date birth;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Map&lt;String,Object&gt; maps;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private List&lt;Object&gt; lists;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Dog dog;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>YML:</p>
<div class="language-YML language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token key atrule">person</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> hyc</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">age</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">happy</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">birth</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> 2019/11/02</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">maps</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token key atrule">k1</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">123</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token key atrule">k2</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">456</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">lists</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">code</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">music</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">girl</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">dog</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> 旺财</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token key atrule">age</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">3</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>@ConfigurationProperties（）作用：</p>
<p>将配置文件中每个属性的值，映射这个组件中；</p>
<p>告诉 SpringBoot 将奔雷所有的属性和配置文件中相关的配置进行绑定</p>
<p>参数 perfix = “person” 将 person 组件（类）和 yml 中 person 的值对应绑定</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="propertysource">@PropertySource<a href="#propertysource" class="hash-link" aria-label="Direct link to @PropertySource" title="Direct link to @PropertySource">​</a></h3>
<p>指定配置文件：properties 文件</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@PropertySource(value = &quot;classpath:application.properties&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用<code>@value</code>赋值</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-推荐我们用-yml">SpringBoot 推荐我们用 yml<a href="#springboot-推荐我们用-yml" class="hash-link" aria-label="Direct link to SpringBoot 推荐我们用 yml" title="Direct link to SpringBoot 推荐我们用 yml">​</a></h3>
<p>对比：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/28f0740616cf15c7e717c2e4f7897444-16808671270411346.png" alt="" class="img_ev3q"></p>
<p>应为 yml 十分灵活：</p>
<div class="language-YML language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token key atrule">person</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> hyc</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">age</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">random.int</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">happy</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">birth</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> 2019/11/02</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">maps</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token key atrule">k1</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">123</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token key atrule">k2</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">456</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">lists</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">code</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">music</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">girl</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">dog</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> 旺财</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token key atrule">age</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>java 类</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.pojo;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.boot.context.properties.ConfigurationProperties;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.PropertySource;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.stereotype.Component;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.validation.annotation.Validated;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.validation.constraints.Email;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Date;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Validated //数据校验</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class person {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Email(message = &quot;邮箱格式错误&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Integer age;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Boolean happy;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Date birth;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Map&lt;String,Object&gt; maps;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private List&lt;Object&gt; lists;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Dog dog;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String toString() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;person{&quot; +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;, age=&quot; + age +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;, happy=&quot; + happy +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;, birth=&quot; + birth +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;, maps=&quot; + maps +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;, lists=&quot; + lists +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;, dog=&quot; + dog +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &#x27;}&#x27;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String getName() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return name;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setName(String name) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.name = name;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Integer getAge() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return age;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setAge(Integer age) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.age = age;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Boolean getHappy() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return happy;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setHappy(Boolean happy) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.happy = happy;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Date getBirth() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return birth;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setBirth(Date birth) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.birth = birth;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Map&lt;String, Object&gt; getMaps() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return maps;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setMaps(Map&lt;String, Object&gt; maps) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.maps = maps;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public List&lt;Object&gt; getLists() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return lists;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setLists(List&lt;Object&gt; lists) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.lists = lists;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Dog getDog() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return dog;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setDog(Dog dog) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.dog = dog;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="jsr303-校验注解">jsr303 校验注解：<a href="#jsr303-校验注解" class="hash-link" aria-label="Direct link to jsr303 校验注解：" title="Direct link to jsr303 校验注解：">​</a></h3>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Validated //数据校验</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>校验示例：</p>
<p>java 类：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@ConfigurationProperties(prefix = &quot;person&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Validated //数据校验</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class person {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Email(message = &quot;邮箱格式错误&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private String name;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Integer age;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Boolean happy;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Date birth;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Map&lt;String,Object&gt; maps;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private List&lt;Object&gt; lists;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Dog dog;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>YML:此时我们的 name 并不是邮箱格式</p>
<div class="language-YML language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token key atrule">person</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> hyc</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">age</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#475569">{</span><span class="token plain">random.int</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">happy</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">birth</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> 2019/11/02</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">maps</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#475569">{</span><span class="token key atrule">k1</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">123</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain"> </span><span class="token key atrule">k2</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">456</span><span class="token punctuation" style="color:#475569">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">lists</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">code</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">music</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token punctuation" style="color:#475569">-</span><span class="token plain">girl</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">dog</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token key atrule">name</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> 旺财</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token key atrule">age</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">3</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>执行效果：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/7917c0f6117c93368fca28825a117662-16808671270411348.png" alt="image-20210618102330148" class="img_ev3q"></p>
<p>使用了@Validated //数据校验注解的类可以对自己的属性设置格式数据校验</p>
<p>全部注解：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/18c7cccae5de950f47a920179d01425c-16808671270411350.png" alt="" class="img_ev3q"></p>
<p>常用注解：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/257fd49c56ab1e53a3ab3ce01e1a4341-16808671270411352.png" alt="image-20210618101136873" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/9dfd76d4fcda1f75807c8534bd691cae-16808671270411354.png" alt="image-20210618101250935" class="img_ev3q"></p>
<p>正则表达式：相对核心</p>
<p>源码位置：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/e7eafa488f9b340dc09158a9ebd0ed13-16808671270411356.png" alt="image-20210618101835578" class="img_ev3q"></p>
<p>小结：</p>
<p>学会找到源码位置，尝试自己阅读源码，探索过程才是成功学习的关键</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-配置文件优先级">SpringBoot 配置文件优先级<a href="#springboot-配置文件优先级" class="hash-link" aria-label="Direct link to SpringBoot 配置文件优先级" title="Direct link to SpringBoot 配置文件优先级">​</a></h3>
<p>官方给的执行优先级</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/3d17cd17fdf270f9485931b892e7bdaf-16808671270411358.png" alt="image-20210618105008155" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="多环境配置">多环境配置：<a href="#多环境配置" class="hash-link" aria-label="Direct link to 多环境配置：" title="Direct link to 多环境配置：">​</a></h3>
<p>在真实工作中，我们会有很多配置文件，比如 test，dev，等等，</p>
<p>格式：application-｛什么类型的配置｝.yml/properties</p>
<p>使用的：spring.profiles.active</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="properties">properties:<a href="#properties" class="hash-link" aria-label="Direct link to properties:" title="Direct link to properties:">​</a></h3>
<p>主文件</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#Springboot多环境配置，可以选择激活那个配置文件</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.profiles.active=dev</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>可以有多个配置文件，从主文件选择使用什么开发环境</p>
<p>application-dev.properties 开发项目环境：</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">server.port=8081</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>application-test.properties 测试开发环境</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">server.port=8082</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="yml">yml：<a href="#yml" class="hash-link" aria-label="Direct link to yml：" title="Direct link to yml：">​</a></h3>
<div class="language-YML language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token key atrule">server</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">8080</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">profiles</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token key atrule">active</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> dev</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">8081</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  profiles</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain">dev</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token punctuation" style="color:#475569">---</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">server</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token key atrule">port</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">8082</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">spring</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  profiles</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain">test</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">#配置文件到底可以写什么</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="再理解自动装配">再理解自动装配<a href="#再理解自动装配" class="hash-link" aria-label="Direct link to 再理解自动装配" title="Direct link to 再理解自动装配">​</a></h2>
<p>SpringBoot 使用一个全局配置文件，配置文件名字是固定的</p>
<ul>
<li>application.properties
<ul>
<li>语法结构：key=value</li>
</ul>
</li>
<li>application.yml
<ul>
<li>语法结构：key：空格 value</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="分析自动装配的原理">分析自动装配的原理：<a href="#分析自动装配的原理" class="hash-link" aria-label="Direct link to 分析自动装配的原理：" title="Direct link to 分析自动装配的原理：">​</a></h3>
<ol>
<li>
<p>启动的时候加载住配置类，开启了自动装配功能，<code>@EnableAutoConfiguration</code></p>
</li>
<li>
<p><code>@EnableAutoConfiguration</code>的作用：</p>
<ul>
<li>
<p>利用 AutoConfigurationImportSelector 给容器导入组件，导入什么组件呢？</p>
</li>
<li>
<p>查看 selectImports（）方法的内容，他返回了一个 autoConfigurationEntry，<code>getAutoConfigurationEntry</code>获取组件实体，</p>
</li>
<li>
<p>通过<code>getCandidateConfigurations()</code>方法来加载候选配置，</p>
</li>
<li>
<p><code>loadFactoryNames()</code>获取配置名字，从<code>META-INF/spring.factories</code>这个配置文件中，加载全部配置存放到 Properties 中；返回封装好的结果，其中的加载参数就是 EnableAutoConfiguration；</p>
</li>
<li>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">	protected Class&lt;?&gt; getSpringFactoriesLoaderFactoryClass() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  		return EnableAutoConfiguration.class;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  	}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>过程描述就是，把<code>META-INF/spring.factories</code>把里面所有的 EnableAutoConfiguration 值加入到容器中</p>
</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="conditionalon">@ConditionalOn<a href="#conditionalon" class="hash-link" aria-label="Direct link to @ConditionalOn" title="Direct link to @ConditionalOn">​</a></h3>
<p>SpringBoot 有大量的配置，有的生效有的不生效，他通过这个注解来判断是否符合调减，符合条件就生效这个配置，我们可以通过自动装配注解来实现对应的自动装配。</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/2da040cc0c131836974912a34b9bf342-16808671270411360.png" alt="" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何配置的">如何配置的<a href="#如何配置的" class="hash-link" aria-label="Direct link to 如何配置的" title="Direct link to 如何配置的">​</a></h3>
<p>在我们的配置文件中，能配置的东西都存在一个规律</p>
<p>他们一定会有个文件叫 xxxProperties ,</p>
<ul>
<li>xxxProperties:绑定配置文件，@ConfigurationProperties(prefix = &quot;server&quot;, ignoreUnknownFields = true)</li>
<li>xxxAutoConfiguration：自动装配默认值</li>
<li>我们就可以自定义配置了</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="如何看看我们的自动配置类是否生效">如何看看我们的自动配置类是否生效<a href="#如何看看我们的自动配置类是否生效" class="hash-link" aria-label="Direct link to 如何看看我们的自动配置类是否生效" title="Direct link to 如何看看我们的自动配置类是否生效">​</a></h3>
<p>debug：true，在我们启动类之后会看到那些生效那些没生效，会以类似日志的方式输出</p>
<p>Positive matches:</p>
<p>已经自动装配并且生效的</p>
<p>negative matches：</p>
<p>没有生效的</p>
<p>总结:</p>
<ol>
<li>SpringBoot 启动会加载大量的配置类，用来自动装配</li>
<li>如果我们要使用功能，要去查看功能是否在 SpringBoot 默认写好的自动装配类中</li>
<li>自动装配类中配置了很多组件，只要我们用的组件存在就不需要手动配置了</li>
<li>容器中自动配置类添加属性的时候，会从 properties 类中获取某些属性，我们只需要在配置文件中指定这些属性的值即可</li>
<li>xxxProperties:绑定配置文件，封装配置文件中的相关属性</li>
<li>xxxAutoConfiguration：自动装配类，给容器添加组件</li>
</ol>
<h1>SpringBoot web 开发</h1>
<p>jar：webapp 在哪里</p>
<p>最大特点：自动装配</p>
<p>SpringBoot 帮我们配置了什么，能不能进行修改，能修改那些东西，能不能拓展</p>
<ul>
<li>xxxxAutoConfiguration..向容器中自动配置组件</li>
<li>XXXXProperties：实现自动配置类装配配置文件中自定义的内容！</li>
</ul>
<p>要解决的问题：</p>
<ul>
<li>导入静态资源，如何导入！</li>
<li>首页问题</li>
<li>模版引擎，thymeleaf</li>
<li>装配扩展 SpringMvc</li>
<li>剩下的就只有增删改了</li>
<li>拦截器</li>
<li>扩展国际化</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="静态资源">静态资源<a href="#静态资源" class="hash-link" aria-label="Direct link to 静态资源" title="Direct link to 静态资源">​</a></h3>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public void addResourceHandlers(ResourceHandlerRegistry registry) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">			if (!this.resourceProperties.isAddMappings()) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				logger.debug(&quot;Default resource handling disabled&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				return;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">			}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">			addResourceHandler(registry, &quot;/webjars/&quot;, &quot;classpath:/META-INF/resources/webjars/&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">			addResourceHandler(registry, this.mvcProperties.getStaticPathPattern(), (registration) -&gt; {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				registration.addResourceLocations(this.resourceProperties.getStaticLocations());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				if (this.servletContext != null) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">					ServletContextResource resource = new ServletContextResource(this.servletContext, SERVLET_LOCATION);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">					registration.addResourceLocations(resource);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">			});</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">		}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="什么是-webjars">什么是 webjars<a href="#什么是-webjars" class="hash-link" aria-label="Direct link to 什么是 webjars" title="Direct link to 什么是 webjars">​</a></h3>
<p>一个网站是和 maven 仓库类似的导入依赖的网站</p>
<p>导入的依赖结构是</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/c60adf4f859cee4bfed1dea1d4d80180-16808671270411362.png" alt="image-20210621101902358" class="img_ev3q"></p>
<p>我们的静态资源路径方法中</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">addResourceHandler(registry, &quot;/webjars/&quot;, &quot;classpath:/META-INF/resources/webjars/&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>就是去类路径下找到/META-INF/resources/webjars/下的文件，</p>
<p>例子：</p>
<p>访问 <a href="http://localhost:8080/webjars/jquery/3.6.0/jquery.js" target="_blank" rel="noopener noreferrer">http://localhost:8080/webjars/jquery/3.6.0/jquery.js</a></p>
<p>实测成功</p>
<p>总结：</p>
<ol>
<li>SpringBoot 处理静态资源的方式
<ul>
<li>webjars：<a href="http://localhost:8080/webjars/jquery/3.6.0/jquery.js" target="_blank" rel="noopener noreferrer">http://localhost:8080/webjars/jquery/3.6.0/jquery.js</a></li>
<li>pubilc：按优先级排序：resources，static，public，如何访问：/：</li>
<li><a href="http://localhost:8080/1.js" target="_blank" rel="noopener noreferrer">http://localhost:8080/1.js</a></li>
</ul>
</li>
<li>优先级：resources&gt;static(默认)》public</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="首页如何定制">首页如何定制<a href="#首页如何定制" class="hash-link" aria-label="Direct link to 首页如何定制" title="Direct link to 首页如何定制">​</a></h3>
<p>在 web 配置类中共有对首页的一系列处理</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/4776175eeccc58ef6df21d97e29af850-16808671270411364.png" alt="image-20210622104019841" class="img_ev3q"></p>
<p>如何找得到资源下的 index？</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/2abc608238a8e7e314a8845fc1989aa7-16808671270411366.png" alt="image-20210622104120358" class="img_ev3q"></p>
<p>调用查找资源方法，找到 index 并且返回，没找到的话相对处理后返回空</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/af80696d5ae0deb0b48962f90d49f85c-16808671270411368.png" alt="image-20210622104317099" class="img_ev3q"></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-页面跳转">SpringBoot 页面跳转：<a href="#springboot-页面跳转" class="hash-link" aria-label="Direct link to SpringBoot 页面跳转：" title="Direct link to SpringBoot 页面跳转：">​</a></h3>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class HelloController {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@RequestMapping(&quot;/a&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String hello(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>注意：</p>
<ul>
<li>在 template 目录下的所有页面，只能通过 controller 来跳转</li>
<li>需要模版引擎的支持</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="模版引擎thymeleaf">模版引擎：Thymeleaf<a href="#模版引擎thymeleaf" class="hash-link" aria-label="Direct link to 模版引擎：Thymeleaf" title="Direct link to 模版引擎：Thymeleaf">​</a></h2>
<p>我们以前用 jsp 来展示数据，模版引擎的作用就是我们来写一个页面模版，比如一些值，表达式，tomcat 支持 jsp 但是由于我们用的是嵌入式的 tomcat，所以他现在默认是不支持 jsp 的</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thymeleaf">thymeleaf：<a href="#thymeleaf" class="hash-link" aria-label="Direct link to thymeleaf：" title="Direct link to thymeleaf：">​</a></h3>
<p>Thymeleaf 是适用于 Web 和独立环境的现代服务器端 Java 模板引擎，能够处理 HTML、XML、JavaScript、CSS 甚至纯文本。</p>
<p>Thymeleaf 的主要目标是提供一种优雅且高度可维护的模板创建方式。为了实现这一点，它建立在<em>自然模板</em>的概念之上，以不影响模板用作设计原型的方式将其逻辑注入模板文件。这改善了设计的沟通并弥合了设计和开发团队之间的差距。</p>
<p>Thymeleaf 也已经从一开始就设计了 Web 标准记-尤其是<strong>HTML5</strong> -允许您创建充分验证模板，如果这是一个需要你。</p>
<p>thymeleaf 与 mvc 时讲到的视图解析器十分相似，</p>
<p>Springboot 推荐使用模版引擎来简化开发，</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/2c15f719d5199f45a09503555715b5c8-16808671270411370.png" alt="image-20210622141436953" class="img_ev3q"></p>
<p>引入依赖：</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.thymeleaf</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">thymeleaf-spring5</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-thymeleaf</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用只需要导入依赖，我们将 html 放到 templeats 下就可以跳转了</p>
<p>注意：如果导入 jar 失败尝试回退版本，即可</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="thymeleaf-基础语法">thymeleaf 基础语法：<a href="#thymeleaf-基础语法" class="hash-link" aria-label="Direct link to thymeleaf 基础语法：" title="Direct link to thymeleaf 基础语法：">​</a></h3>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--所有的html元素都可以被thymeleaf接管，如何接管？ th:元素--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${msg}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>表达式：</p>
<ul>
<li><code>${x}</code>将返回<code>x</code>存储在 Thymeleaf 上下文中或作为<em>请求属性</em>的变量。</li>
<li><code>${param.x}</code>将返回一个名为（可能是多值的）的<em>请求参数</em><code>x</code>。</li>
<li><code>${session.x}</code>将返回一个<em>会话属性</em>叫<code>x</code>。</li>
<li><code>${application.x}</code>将返回一个名为的<em>servlet 上下文属性</em><code>x</code>。</li>
</ul>
<p>常用语法：</p>
<ul>
<li>简单的表达：
<ul>
<li>变量表达式： <code>${...}</code></li>
<li>选择变量表达式： <code>*{...}</code></li>
<li>消息表达： <code>#{...}</code></li>
<li>链接 URL 表达式： <code>@{...}</code></li>
<li>片段表达式： <code>~{...}</code></li>
</ul>
</li>
<li>文字
<ul>
<li>文本字面量：<code>&#x27;one text&#x27;</code>, <code>&#x27;Another one!&#x27;</code>,...</li>
<li>数字字面量：<code>0</code>, <code>34</code>, <code>3.0</code>, <code>12.3</code>,...</li>
<li>布尔文字：<code>true</code>,<code>false</code></li>
<li>空字面量： <code>null</code></li>
<li>文字标记：<code>one</code>, <code>sometext</code>, <code>main</code>,...</li>
</ul>
</li>
<li>文字操作：
<ul>
<li>字符串连接： <code>+</code></li>
<li>字面替换： <code>|The name is ${name}|</code></li>
</ul>
</li>
<li>算术运算：
<ul>
<li>二元运算符：<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>,<code>%</code></li>
<li>减号（一元运算符）： <code>-</code></li>
</ul>
</li>
<li>布尔运算：
<ul>
<li>二元运算符：<code>and</code>,<code>or</code></li>
<li>布尔否定（一元运算符）：<code>!</code>,<code>not</code></li>
</ul>
</li>
<li>比较与相等：
<ul>
<li>比较器：<code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>( <code>gt</code>, <code>lt</code>, <code>ge</code>, <code>le</code>)</li>
<li>等式运算符：<code>==</code>, <code>!=</code>( <code>eq</code>, <code>ne</code>)</li>
</ul>
</li>
<li>条件运算符：
<ul>
<li>如果-那么： <code>(if) ? (then)</code></li>
<li>如果-然后-其他： <code>(if) ? (then) : (else)</code></li>
<li>默认： <code>(value) ?: (defaultvalue)</code></li>
</ul>
</li>
</ul>
<p>常用代码示例：</p>
<p>controller：index</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class HelloController {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@RequestMapping(&quot;/index&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String hello(Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    model.addAttribute(&quot;msg&quot;,&quot;&lt;h1&gt;hello SpringBoot&lt;/h1&gt;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">       model.addAttribute(&quot;users&quot;, Arrays.asList(&quot;hyc&quot;,&quot;lhy&quot;));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>index.html</p>
<div class="language-HTML language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--所有的html元素都可以被thymeleaf接管，如何接管？ th:元素--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--不转义--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${msg}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--转义--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">utext</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${msg}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">hr</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--th:text显式数据--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">h3</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">each</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">user:${users}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${user}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">h3</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--行内显式数据--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">h3</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">each</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">user:${users}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">[[${user}]]</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">h3</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">body</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-装配并且扩展-springmvc">SpringBoot 装配并且扩展 SpringMvc<a href="#springboot-装配并且扩展-springmvc" class="hash-link" aria-label="Direct link to SpringBoot 装配并且扩展 SpringMvc" title="Direct link to SpringBoot 装配并且扩展 SpringMvc">​</a></h2>
<p>以视图解析器为例子：</p>
<p>原理：孙建平，真是我的好兄弟应该说是不是你的好办法真是我的好儿子我真的。</p>
<p><code>ContentNegotiatingViewResolver</code>类中有方法，<code>getCandidateViews（）</code>获取候选的视图，选择最好的视图返回，</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="官方文档是这样说的">官方文档是这样说的：<a href="#官方文档是这样说的" class="hash-link" aria-label="Direct link to 官方文档是这样说的：" title="Direct link to 官方文档是这样说的：">​</a></h3>
<p>Spring Boot 为 Spring MVC 提供了自动配置，适用于大多数应用程序。</p>
<p>自动配置在 Spring 的默认值之上添加了以下功能：</p>
<ul>
<li>包括<code>ContentNegotiatingViewResolver</code>和<code>BeanNameViewResolver</code>bean。</li>
<li>支持提供静态资源，包括对 WebJars 的支持。</li>
<li>自动注册<code>Converter</code>，<code>GenericConverter</code>和<code>Formatter</code>bean 类。</li>
<li>支持<code>HttpMessageConverters</code>。</li>
<li>的自动注册<code>MessageCodesResolver</code>。</li>
<li>静态<code>index.html</code>支持。</li>
<li><code>ConfigurableWebBindingInitializer</code>bean 的自动使用。</li>
</ul>
<p>如果您想保留那些 Spring Boot MVC 自定义并进行更多（拦截器、格式化程序、视图控制器和其他功能），您可以添加自己<code>@Configuration</code>的类型类，<code>WebMvcConfigurer</code>但不添加 <code>@EnableWebMvc</code>.</p>
<p>如果你想提供的定制情况<code>RequestMappingHandlerMapping</code>，<code>RequestMappingHandlerAdapter</code>或者<code>ExceptionHandlerExceptionResolver</code>，仍然保持弹簧引导 MVC 自定义，你可以声明类型的豆<code>WebMvcRegistrations</code>，并用它来提供这些组件的定制实例。</p>
<p>如果你想利用 Spring MVC 中的完全控制，你可以添加自己的<code>@Configuration</code>注解为<code>@EnableWebMvc</code>，或者添加自己的<code>@Configuration</code>-annotated<code>DelegatingWebMvcConfiguration</code>中的 Javadoc 中所述<code>@EnableWebMvc</code>。</p>
<p>如果我们想自定义视图解析器参考如下代码：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.servlet.View;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.servlet.ViewResolver;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Locale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//如果你想diy或者自定义动能，只需要写这个组件然后将它交给SpringBoot，SpringBoot就会帮我们自动装配</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//拓展mvc</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class MyMvc implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//public interface ViewResolver 实现了视图解析器的类我们就可以把他看成试图解析器</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public MyViewResolver myViewResolver(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return new MyViewResolver();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//自定义了一个自己的视图解析器，只要我们自定义了试图解析器，SpringBoot就会帮我们自动装配</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public static class MyViewResolver implements ViewResolver {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public View resolveViewName(String s, Locale locale) throws Exception {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>装配原理小结：</p>
<ol>
<li>芸芸之多的配置，原理其实是一样的，通过获取 webmvc 的自动配置原理分析，我们要学会一种方式，去在源码中得出结论，都是属于自己，一通百通</li>
<li>Spring 整个框架的底层有太多精妙的设计细节，阅读源码可以让我们对编写代码和理解原理的能力大大提升！</li>
<li>在自动配置很多组件的时候，SpringBoot 会先查看容器中有没有用户自己配置的@bean，如果有就用用户配置的，如果没有就用默认配置，组件存在多个的时候，如视图解析器，就将用户配置的和自己默认的组合起来</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="员工管理系统">员工管理系统<a href="#员工管理系统" class="hash-link" aria-label="Direct link to 员工管理系统" title="Direct link to 员工管理系统">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1首页配置">1、首页配置<a href="#1首页配置" class="hash-link" aria-label="Direct link to 1、首页配置" title="Direct link to 1、首页配置">​</a></h3>
<p>1.首页配置，自己设置页面跳转</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class MyMvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void addViewControllers(ViewControllerRegistry registry) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        registry.addViewController(&quot;/&quot;).setViewName(&quot;index.html&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2.首页设置，thymeleaf</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">xmlns:th=&quot;http://www.thymeleaf.org&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>常用的 thymeleaf 文件头</p>
<p>注意点：所有的页面静态资源使用 thymeleaf 接管：url：@｛｝</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="页面国际化">页面国际化<a href="#页面国际化" class="hash-link" aria-label="Direct link to 页面国际化" title="Direct link to 页面国际化">​</a></h3>
<ol>
<li>
<p>我们需要配置 i18n 文件</p>
</li>
<li>
<p>我们如果需要在项目中进行按钮自动切换，我们需要自定义国际化组件</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.managesystem.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.util.StringUtils;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.servlet.LocaleResolver;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Locale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class myLocalresolver implements LocaleResolver {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //解析请求</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Locale resolveLocale(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//        获取请求的语言参数</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String language = request.getParameter(&quot;l&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(language);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Locale locale = Locale.getDefault();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (!StringUtils.isEmpty(language)){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            String[] split = language.split(&quot;_&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//            国家地区</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            locale= new Locale(split[0], split[1]);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return locale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setLocale(HttpServletRequest request, HttpServletResponse response, Locale locale) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>记得将自己写的组件配置到配置文件中</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public LocaleResolver localeResolver(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return  new myLocalresolver();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>使用#｛｝</p>
</li>
</ol>
<p>[外链图片转存失败,源站可能有防盗链机制,建议将图片保存下来直接上传(img-0oH1S1RT-1648917634756)(C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20210503093036786.png)]</p>
<p>位置如下</p>
<img decoding="async" loading="lazy" src="C:/Users/Administrator/AppData/Roaming/Typora/typora-user-images/image-20210503093130687.png" alt="image-20210503093130687" style="zoom:67%" class="img_ev3q">
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="12编写-pojo-层">1.2、编写 pojo 层<a href="#12编写-pojo-层" class="hash-link" aria-label="Direct link to 1.2、编写 pojo 层" title="Direct link to 1.2、编写 pojo 层">​</a></h4>
<p>员工表</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//员工表</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@NoArgsConstructor</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Employee {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Integer id;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private String lastName;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private String email;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Integer gender; //性别 0 女， 1，男</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Department department;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private Date birth;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Employee(Integer id, String lastName, String email, Integer gender, Department department) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.id = id;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.lastName = lastName;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.email = email;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.gender = gender;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.department = department;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        this.birth = new Date();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>部门表</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//部门表</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Data</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@AllArgsConstructor</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@NoArgsConstructor</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Department {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private int id;  //部门id</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private String departmentName;  //部门名字</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>添加 lombok 依赖</p>
</blockquote>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"> </span><span class="token comment" style="color:#6A9955">&lt;!--lombok--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.projectlombok</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">lombok</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="13编写-dao-层">1.3、编写 dao 层<a href="#13编写-dao-层" class="hash-link" aria-label="Direct link to 1.3、编写 dao 层" title="Direct link to 1.3、编写 dao 层">​</a></h4>
<p>这里我们模拟数据库，springboot 和数据库的连接在后序课程中。</p>
<p>部门 dao</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.kuang.dao;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.kuang.pojo.Department;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.stereotype.Repository;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Collection;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//部门dao</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Repository</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class DepartmentDao {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //模拟数据库中的数据</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private static Map&lt;Integer, Department&gt;departments = null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    static {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        departments = new HashMap&lt;Integer, Department&gt;(); //创建一个部门表</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        departments.put(101,new Department(101,&quot;教学部&quot;));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        departments.put(102,new Department(102,&quot;市场部&quot;));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        departments.put(103,new Department(103,&quot;教研部&quot;));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        departments.put(104,new Department(104,&quot;运营部&quot;));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        departments.put(105,new Department(105,&quot;后勤部&quot;));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //获取所有的部门信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Collection&lt;Department&gt; getDepartments(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return departments.values();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //通过id得到部门</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Department getDepartmentById(Integer id){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return departments.get(id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>员工 dao</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.kuang.dao;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.kuang.pojo.Department;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.kuang.pojo.Employee;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.stereotype.Repository;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Collection;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//员工dao</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Repository //被string托管</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class EmployeeDao {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //模拟数据库中的数据</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private static Map&lt;Integer, Employee&gt; employees= null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //员工所属的部门</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private DepartmentDao departmentDao;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    static {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees = new HashMap&lt;Integer,Employee&gt;(); //创建一个部门表</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees.put(1001,new Employee(  1001,&quot;AA&quot;,&quot;1622840727@qq.com&quot;,1,new Department(101,&quot;教学部&quot;)));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees.put(1002,new Employee(  1002,&quot;BB&quot;,&quot;2622840727@qq.com&quot;,0,new Department(102,&quot;市场部&quot;)));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees.put(1003,new Employee(  1003,&quot;CC&quot;,&quot;4622840727@qq.com&quot;,1,new Department(103,&quot;教研部&quot;)));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees.put(1004,new Employee(  1004,&quot;DD&quot;,&quot;5628440727@qq.com&quot;,0,new Department(104,&quot;运营部&quot;)));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees.put(1005,new Employee(  1005,&quot;FF&quot;,&quot;6022840727@qq.com&quot;,1,new Department(105,&quot;后勤部&quot;)));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //主键自增</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private static Integer ininId = 1006;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //增加一个员工</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void save(Employee employee){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if(employee.getId() == null){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            employee.setId(ininId++);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employee.setDepartment(departmentDao.getDepartmentById(employee.getDepartment().getId()));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees.put(employee.getId(),employee);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //查询全部的员工</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Collection&lt;Employee&gt;getALL(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         return employees.values();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //通过id查询员工</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Employee getEmployeeById(Integer id){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return employees.get(id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //删除一个员通过id</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void delete(Integer id){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        employees.remove(id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2首页实现">2、首页实现<a href="#2首页实现" class="hash-link" aria-label="Direct link to 2、首页实现" title="Direct link to 2、首页实现">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="21引入-thymeleaf">2.1、引入 Thymeleaf<a href="#21引入-thymeleaf" class="hash-link" aria-label="Direct link to 2.1、引入 Thymeleaf" title="Direct link to 2.1、引入 Thymeleaf">​</a></h4>
<p><code>pom.xml</code>导入依赖</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.thymeleaf</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">thymeleaf-spring5</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.thymeleaf.extras</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">thymeleaf-extras-java8time</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="22编写-mymvcconfig">2.2、编写 MyMvcConfig<a href="#22编写-mymvcconfig" class="hash-link" aria-label="Direct link to 2.2、编写 MyMvcConfig" title="Direct link to 2.2、编写 MyMvcConfig">​</a></h4>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.kuang.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.servlet.config.annotation.ViewControllerRegistry;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.servlet.config.annotation.WebMvcConfigurer;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//扩展使用SpringMVC</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class MyMvcConfig implements WebMvcConfigurer {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void addViewControllers(ViewControllerRegistry registry) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        registry.addViewController(&quot;/&quot;).setViewName(&quot;index&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        registry.addViewController(&quot;/index.html&quot;).setViewName(&quot;index&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>更改静态资源路径</p>
</blockquote>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503104737514.png" alt="image-20210503104737514" style="zoom:67%" class="img_ev3q">
<p>所有的静态资源都需要使用 thymeleaf 接管：@{}</p>
<blockquote>
<p>application.properties 修改</p>
</blockquote>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"># 关闭模板引擎的缓存</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.thymeleaf.cache=false</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">server.servlet.context-path=/kuang</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="23测试首页">2.3、测试首页<a href="#23测试首页" class="hash-link" aria-label="Direct link to 2.3、测试首页" title="Direct link to 2.3、测试首页">​</a></h4>
<p>输入路径</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">http://localhost:8080/kuang/index.html</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503105044008.png" alt="image-20210503105044008" style="zoom:67%" class="img_ev3q">
<p>测试成功！</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3页面国际化">3、页面国际化<a href="#3页面国际化" class="hash-link" aria-label="Direct link to 3、页面国际化" title="Direct link to 3、页面国际化">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="31-file-encodings-设置">3.1、 File Encodings 设置<a href="#31-file-encodings-设置" class="hash-link" aria-label="Direct link to 3.1、 File Encodings 设置" title="Direct link to 3.1、 File Encodings 设置">​</a></h4>
<p>先在 IDEA 中统一设置 properties 的编码问题！</p>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503110109556.png" alt="image-20210503110109556" style="zoom:67%" class="img_ev3q">
<p>编写国际化配置文件，抽取页面需要显示的国际化页面消息。我们可以去登录页面查看一下，哪些内容</p>
<p>我们需要编写国际化的配置！</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="32配置文件编写">3.2、配置文件编写<a href="#32配置文件编写" class="hash-link" aria-label="Direct link to 3.2、配置文件编写" title="Direct link to 3.2、配置文件编写">​</a></h4>
<p>1、我们在 resources 资源文件下新建一个 i18n 目录，存放国际化配置文件</p>
<p>2、建立一个 login.properties 文件，还有一个 login_zh_CN.properties；发现 IDEA 自动识别了我们要做国际化操作；文件夹变了！</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/2291463343eedfde30c7d16135e87079-16808671270411374.png" alt="image-20210503110930479" class="img_ev3q"></p>
<p>3、我们可以在这上面去新建一个文件；</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/5374ebdbd5b14d18ff82d73f3e680050-16808671270411376.png" alt="image-20210503111124893" class="img_ev3q"></p>
<p>弹出如下页面：我们再添加一个英文的；</p>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503110848529.png" alt="image-20210503110848529" style="zoom:67%" class="img_ev3q">
<p>这样就快捷多了！</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/4e3610b4314a18a3d45c9396e450db0d-16808671270411379.png" alt="image-20210503111145791" class="img_ev3q"></p>
<p>4、接下来，我们就来编写配置，我们可以看到 idea 下面有另外一个视图；</p>
<h6 class="anchor anchorWithStickyNavbar_LWe7" id="img-srchttpsgiteecomcold-abyss_adminmy-image-hostrawmasterimgimage-20210503111517483png-altimage-20210503111517483-stylezoom67-"><img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503111517483.png" alt="image-20210503111517483" style="zoom:67%" class="img_ev3q"><a href="#img-srchttpsgiteecomcold-abyss_adminmy-image-hostrawmasterimgimage-20210503111517483png-altimage-20210503111517483-stylezoom67-" class="hash-link" aria-label="Direct link to img-srchttpsgiteecomcold-abyss_adminmy-image-hostrawmasterimgimage-20210503111517483png-altimage-20210503111517483-stylezoom67-" title="Direct link to img-srchttpsgiteecomcold-abyss_adminmy-image-hostrawmasterimgimage-20210503111517483png-altimage-20210503111517483-stylezoom67-">​</a></h6>
<p>这个视图我们点击 + 号就可以直接添加属性了；我们新建一个 login.tip，可以看到边上有三个文件框可以输入</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/44eeb6514592d043b833c1679f7c0c6b-16808671270411382.png" alt="image-20210503111823725" class="img_ev3q"></p>
<p>我们添加一下首页的内容！</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/cad0b76059c847e8e06acfb1c61bae85-16808671270421385.png" alt="image-20210503111915846" class="img_ev3q"></p>
<p>然后依次添加其他页面内容即可！</p>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503112654522.png" alt="image-20210503112654522" style="zoom:67%" class="img_ev3q">
<p>然后去查看我们的配置文件；</p>
<p>login.properties ：默认</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">login.btn=登录</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.password=密码</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.remember=记住我</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.tip=请登录</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.username=用户名</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>英文：</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">login.btn=Sign in</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.password=Password</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.remember=Remember me</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.tip=Please sign in</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.username=Username</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>中文：</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">login.btn=登录</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.password=密码</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.remember=记住我</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.tip=请登录</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">login.username=用户名</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>OK，配置文件步骤搞定！</p>
<blockquote>
<p>配置文件生效探究</p>
</blockquote>
<p>我们去看一下 SpringBoot 对国际化的自动配置！这里又涉及到一个类：MessageSourceAutoConfiguration</p>
<p>里面有一个方法，这里发现 SpringBoot 已经自动配置好了管理我们国际化资源文件的组件 ResourceBundleMessageSource；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">// 获取 properties 传递过来的值进行判断</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public MessageSource messageSource(MessageSourceProperties properties) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    ResourceBundleMessageSource messageSource = new ResourceBundleMessageSource();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    if (StringUtils.hasText(properties.getBasename())) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // 设置国际化文件的基础名（去掉语言国家代码的）</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        messageSource.setBasenames(</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            StringUtils.commaDelimitedListToStringArray(</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                                       StringUtils.trimAllWhitespace(properties.getBasename())));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    if (properties.getEncoding() != null) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        messageSource.setDefaultEncoding(properties.getEncoding().name());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    messageSource.setFallbackToSystemLocale(properties.isFallbackToSystemLocale());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    Duration cacheDuration = properties.getCacheDuration();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    if (cacheDuration != null) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        messageSource.setCacheMillis(cacheDuration.toMillis());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    messageSource.setAlwaysUseMessageFormat(properties.isAlwaysUseMessageFormat());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    messageSource.setUseCodeAsDefaultMessage(properties.isUseCodeAsDefaultMessage());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return messageSource;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们真实的情况是放在了 i18n 目录下，所以我们要去配置这个 messages 的路径；</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">spring.messages.basename=i18n.login</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<blockquote>
<p>配置页面国际化值</p>
</blockquote>
<p>去页面获取国际化的值，查看 Thymeleaf 的文档，找到 message 取值操作为：#{...}。我们去页面测试下：</p>
<p>IDEA 还有提示，非常智能的！</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/807c8ddcd9fbcc1ec92e9d53ac01b459-16808671270421388.png" alt="image-20210503114532955" class="img_ev3q"></p>
<p>我们可以去启动项目，访问一下，发现已经自动识别为中文的了！</p>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503114542116.png" alt="image-20210503114542116" style="zoom:67%" class="img_ev3q">
<p>但是我们想要更好！可以根据按钮自动切换中文英文！</p>
<blockquote>
<p>配置国际化解析</p>
</blockquote>
<p>在 Spring 中有一个国际化的 Locale （区域信息对象）；里面有一个叫做 LocaleResolver （获取区域信息对象）的解析器！</p>
<p>我们去我们 webmvc 自动配置文件，寻找一下！看到 SpringBoot 默认配置：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@ConditionalOnMissingBean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@ConditionalOnProperty(prefix = &quot;spring.mvc&quot;, name = &quot;locale&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public LocaleResolver localeResolver() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   // 容器中没有就自己配，有的话就用用户配置的</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   if (this.mvcProperties.getLocaleResolver() == WebMvcProperties.LocaleResolver.FIXED) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">       return new FixedLocaleResolver(this.mvcProperties.getLocale());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   // 接收头国际化分解</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   AcceptHeaderLocaleResolver localeResolver = new AcceptHeaderLocaleResolver();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   localeResolver.setDefaultLocale(this.mvcProperties.getLocale());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   return localeResolver;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>AcceptHeaderLocaleResolver 这个类中有一个方法</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">public Locale resolveLocale(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    Locale defaultLocale = this.getDefaultLocale();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    // 默认的就是根据请求头带来的区域信息获取Locale进行国际化</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    if (defaultLocale != null &amp;&amp; request.getHeader(&quot;Accept-Language&quot;) == null) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return defaultLocale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    } else {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Locale requestLocale = request.getLocale();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        List&lt;Locale&gt; supportedLocales = this.getSupportedLocales();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (!supportedLocales.isEmpty() &amp;&amp; !supportedLocales.contains(requestLocale)) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            Locale supportedLocale = this.findSupportedLocale(request, supportedLocales);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            if (supportedLocale != null) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                return supportedLocale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            } else {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                return defaultLocale != null ? defaultLocale : requestLocale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return requestLocale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>那假如我们现在想点击链接让我们的国际化资源生效，就需要让我们自己的 Locale 生效！</p>
<p>我们去自己写一个自己的 LocaleResolver，可以在链接上携带区域信息！</p>
<p>修改一下前端页面的跳转连接：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!-- 这里传入参数不需要使用 ？使用 （key=value）--&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@{/index.html(l=&#x27;zh_CN&#x27;)}&quot;&gt;中文&lt;/a&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;a class=&quot;btn btn-sm&quot; th:href=&quot;@{/index.html(l=&#x27;en_US&#x27;)}&quot;&gt;English&lt;/a&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们去写一个处理的组件类！</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.kuang.component;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.util.StringUtils;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.servlet.LocaleResolver;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.servlet.http.HttpServletRequest;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.servlet.http.HttpServletResponse;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Locale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//可以在链接上携带区域信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class MyLocaleResolver implements LocaleResolver {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //解析请求</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Locale resolveLocale(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String language = request.getParameter(&quot;l&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Locale locale = Locale.getDefault(); // 如果没有获取到就使用系统默认的</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //如果请求链接不为空</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (!StringUtils.isEmpty(language)){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //分割请求参数</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            String[] split = language.split(&quot;_&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //国家，地区</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            locale = new Locale(split[0],split[1]);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return locale;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void setLocale(HttpServletRequest httpServletRequest, HttpServletResponse httpServletResponse, Locale locale) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>为了让我们的区域化信息能够生效，我们需要再配置一下这个组件！在我们自己的 MvcConofig 下添加 bean；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public LocaleResolver localeResolver(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return new MyLocaleResolver();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们重启项目，来访问一下，发现点击按钮可以实现成功切换！搞定收工！</p>
<p>==注意点==</p>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503175316167.png" alt="image-20210503175316167" style="zoom:67%" class="img_ev3q">
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4登录拦截器">4、登录+拦截器<a href="#4登录拦截器" class="hash-link" aria-label="Direct link to 4、登录+拦截器" title="Direct link to 4、登录+拦截器">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="41登录">4.1、登录<a href="#41登录" class="hash-link" aria-label="Direct link to 4.1、登录" title="Direct link to 4.1、登录">​</a></h4>
<blockquote>
<p>禁用模板缓存</p>
</blockquote>
<p>说明：页面存在缓存，所以我们需要禁用模板引擎的缓存</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#禁用模板缓存</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.thymeleaf.cache=false</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>模板引擎修改后，想要实时生效！页面修改完毕后，IDEA 小技巧 ： Ctrl + F9 重新编译！即可生效！</p>
<blockquote>
<p>登录</p>
</blockquote>
<p>我们这里就先不连接数据库了，输入任意用户名都可以登录成功！</p>
<p>1、我们把登录页面的表单提交地址写一个 controller！</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-signin</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/user/login}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">post</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  //这里面的所有表单标签都需要加上一个name属性</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、去编写对应的 controller</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class LoginController {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/user/login&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String login(</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            @RequestParam(&quot;username&quot;) String username ,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            @RequestParam(&quot;password&quot;) String password,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //具体的业务</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if(!StringUtils.isEmpty(username)&amp;&amp;&quot;123456&quot;.equals(password)){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;redirect:/main.html&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        else{</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //告诉用户，你登录失败</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            model.addAttribute(&quot;msg&quot;,&quot;用户名或者密码错误！&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>OK ，测试登录成功！</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/9461c73b6d449ebbbdab912aafa75de7-16808671270421392.png" alt="image-20210503190856881" class="img_ev3q"></p>
<p>3、登录失败的话，我们需要将后台信息输出到前台，可以在首页标题下面加上判断</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--判断是否显示，使用if, ${}可以使用工具类，可以看thymeleaf的中文文档--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag special-attr attr-name" style="color:#0c4a6e">style</span><span class="token tag special-attr attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag special-attr attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag special-attr attr-value value css language-css property" style="color:#64748b">color</span><span class="token tag special-attr attr-value value css language-css punctuation" style="color:#475569">:</span><span class="token tag special-attr attr-value value css language-css" style="color:#64748b"> </span><span class="token tag special-attr attr-value value css language-css color" style="color:#64748b">red</span><span class="token tag special-attr attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${msg}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">if</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${not #strings.isEmpty(msg)}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>重启登录失败测试：</p>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210503191007772.png" alt="image-20210503191007772" style="zoom:67%" class="img_ev3q">
<p>优化，登录成功后，由于是转发，链接不变，我们可以重定向到首页！</p>
<p>4、我们再添加一个视图控制映射，在我们的自己的 MyMvcConfifig 中：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">registry.addViewController(&quot;/main.html&quot;).setViewName(&quot;dashboard&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>5、将 Controller 的代码改为重定向；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//登录成功！防止表单重复提交，我们重定向</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">return &quot;redirect:/main.html&quot;;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>重启测试，重定向成功！后台主页正常显示！</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="42登录拦截器">4.2、登录拦截器<a href="#42登录拦截器" class="hash-link" aria-label="Direct link to 4.2、登录拦截器" title="Direct link to 4.2、登录拦截器">​</a></h4>
<p>但是又发现新的问题，我们可以直接登录到后台主页，不用登录也可以实现！怎么处理这个问题呢？我</p>
<p>们可以使用拦截器机制，实现登录检查！</p>
<p>1、在 LoginController 添加 serssion</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"> session.setAttribute(&quot;loginUser&quot;,username);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、自定义一个拦截器：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//自定义拦截器</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class LoginHandlerInterceptor implements HandlerInterceptor {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //获取 loginUser 信息进行判断</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Object user = request.getSession().getAttribute(&quot;loginUser&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if(user == null){//未登录，返回登录页面</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            request.setAttribute(&quot;msg&quot;,&quot;没有权限，请先登录&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            request.getRequestDispatcher(&quot;/index.html&quot;).forward(request,response);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return false;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }else{</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //登录，放行</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return true;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、然后将拦截器注册到我们的 SpringMVC 配置类当中！</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void addInterceptors(InterceptorRegistry registry) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // 注册拦截器，及拦截请求和要剔除哪些请求!</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // 我们还需要过滤静态资源文件，否则样式显示不出来</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        registry.addInterceptor(new LoginHandlerInterceptor())</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .addPathPatterns(&quot;/&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .excludePathPatterns(&quot;/index.html&quot;,&quot;/user/login&quot;,&quot;/&quot;,&quot;/css/*&quot;,&quot;/img/&quot;,&quot;/js/&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>4、我们然后在后台主页，获取用户登录的信息</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--后台主页显示登录用户的信息--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">[[${session.loginUser}]]</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--$取EL表达式--&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后我们登录测试拦截！完美！</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5展示员工列表">5、展示员工列表<a href="#5展示员工列表" class="hash-link" aria-label="Direct link to 5、展示员工列表" title="Direct link to 5、展示员工列表">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="51员工列表页面跳转">5.1、员工列表页面跳转<a href="#51员工列表页面跳转" class="hash-link" aria-label="Direct link to 5.1、员工列表页面跳转" title="Direct link to 5.1、员工列表页面跳转">​</a></h4>
<p>我们在主页点击 Customers，就显示列表页面；我们去修改下</p>
<p>1、将首页的侧边栏 Customers 改为员工管理</p>
<p>2、a 链接添加请求</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;a class=&quot;nav-link&quot; th:href=&quot;@{/emps}&quot;&gt;员工管理&lt;/a&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、将 list 放在 emp 文件夹下</p>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210504075819096.png" alt="image-20210504075819096" style="zoom:80%" class="img_ev3q">
<p>4、编写处理请求的 controller</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//员工列表</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class EmployeeController {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    EmployeeDao employeeDao;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/emps&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String list(Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Collection&lt;Employee&gt; employees = employeeDao.getALL();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        model.addAttribute(&quot;emps&quot;,employees);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;emp/list&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们启动项目，测试一下看是否能够跳转，测试 OK！我们只需要将数据渲染进去即可！</p>
<p>但是发现了一个问题，侧边栏和顶部都相同，我们是不是应该将它抽取出来呢？</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="52thymeleaf-公共页面元素抽取">5.2、<strong>Thymeleaf</strong> 公共页面元素抽取<a href="#52thymeleaf-公共页面元素抽取" class="hash-link" aria-label="Direct link to 52thymeleaf-公共页面元素抽取" title="Direct link to 52thymeleaf-公共页面元素抽取">​</a></h4>
<p>步骤：</p>
<p>1、抽取公共片段 th:fragment 定义模板名</p>
<p>2、引入公共片段 th:insert 插入模板名</p>
<p>实现：</p>
<p>1、我们来抽取一下，使用 list 列表做演示！我们要抽取头部 nav 标签，我们在 dashboard 中将 nav 部分定</p>
<p>义一个模板名；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!--顶部导航栏--&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;nav class=&quot;navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0&quot; th:fragment=&quot;topbar&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;a class=&quot;navbar-brand col-sm-3 col-md-2 mr-0&quot; href=&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;&gt;[[${session.loginUser}]]&lt;/a&gt; &lt;!--$取EL表达式--&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;input class=&quot;form-control form-control-dark w-100&quot; type=&quot;text&quot; placeholder=&quot;Search&quot; aria-label=&quot;Search&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;ul class=&quot;navbar-nav px-3&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        &lt;li class=&quot;nav-item text-nowrap&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            &lt;a class=&quot;nav-link&quot; href=&quot;http://getbootstrap.com/docs/4.0/examples/dashboard/#&quot;&gt;注销&lt;/a&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        &lt;/li&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;/ul&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/nav&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、然后我们在 list 页面中去引入，可以删掉原来的 nav</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--引入抽取的topbar--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--模板名 ： 会使用thymeleaf的前后缀配置规则进行解析 使用~{模板::标签名}--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--顶部导航栏--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">insert</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">~{dashboard::topbar}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、启动再次测试，可以看到已经成功加载过来了！</p>
<p>说明：</p>
<p>除了使用 insert 插入，还可以使用 replace 替换，或者 include 包含，三种方式会有一些小区别，可以见名</p>
<p>知义；</p>
<p>我们使用 replace 替换，可以解决 div 多余的问题，可以查看 thymeleaf 的文档学习</p>
<p>侧边栏也是同理，当做练手，可以也同步一下！</p>
<p>定义模板：</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--侧边栏--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">nav</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">fragment</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">sitebar</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">col-md-2 d-none d-md-block bg-light sidebar</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9"></span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">nav</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>然后我们在 list 页面中去引入：</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--侧边栏--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">insert</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">~{dashboard::sitebar}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>启动再试试，看效果！</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/04a432149114abcb76c6a31c9b7841f9-16808671270421396.png" alt="image-20210504080516865" class="img_ev3q"></p>
<p>我们发现一个小问题，侧边栏激活的问题，它总是激活第一个；按理来说，这应该是动态的才对！</p>
<p>为了重用更清晰，我们建立一个 commons 文件夹，专门存放公共页面；</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/ac015384d540a3ff8ccfd89db8f1a05f-16808671270421398.png" alt="image-20210504080721577" class="img_ev3q"></p>
<p>我们去页面中引入一下</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">&lt;!--顶部导航栏--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">replace</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">~{commons/commons::topbar}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--侧边栏--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">replace</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">~{commons/commons::sidebar}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们先测试一下，保证所有的页面没有出问题！ok！</p>
<p>侧边栏激活问题：</p>
<p>1、将首页的超链接地址改到项目中</p>
<p>2、我们在 a 标签中加一个判断，使用 class 改变标签的值；</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${active==&#x27;list.html&#x27;?&#x27;nav-link active&#x27;:&#x27;nav-link&#x27;}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/index.html}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9"></span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">svg</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">http://www.w3.org/2000/svg</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">width</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">24</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">height</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">24</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">viewBox</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">0 0 24 24</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">fill</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">none</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">currentColor</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke-width</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">2</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke-linecap</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">round</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke-linejoin</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">round</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">feather feather-home</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">path</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">d</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">path</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">polyline</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">points</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">9 22 9 12 15 12 15 22</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">polyline</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">svg</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  首页 </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">sr-only</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">(current)</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${active==&#x27;list.html&#x27;?&#x27;nav-link active&#x27;:&#x27;nav-link&#x27;}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/emps}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9"></span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">svg</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">xmlns</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">http://www.w3.org/2000/svg</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">width</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">24</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">height</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">24</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">viewBox</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">0 0 24 24</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">fill</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">none</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">currentColor</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke-width</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">2</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke-linecap</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">round</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">stroke-linejoin</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">round</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">feather feather-shopping-cart</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">circle</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">cx</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">9</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">cy</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">21</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">r</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">1</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">circle</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">circle</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">cx</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">20</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">cy</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">21</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">r</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">1</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">circle</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">path</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">d</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">path</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">svg</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  员工管理</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、修改请求链接</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">replace</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">~{commons/commons::topbar(active=&#x27;main.html&#x27;)}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">replace</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">~{commons/commons::sidebar(active=&#x27;list.html&#x27;)}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>4、我们刷新页面，去测试一下，OK，动态激活搞定！</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="53员工信息页面展示">5.3、员工信息页面展示<a href="#53员工信息页面展示" class="hash-link" aria-label="Direct link to 5.3、员工信息页面展示" title="Direct link to 5.3、员工信息页面展示">​</a></h4>
<p>现在我们来遍历我们的员工信息！顺便美化一些页面，增加添加，修改，删除的按钮！</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">thead</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">tr</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">id</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">lastName</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">email</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">gender</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">department</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">birth</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">th</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">tr</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">thead</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">tbody</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">tr</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">each</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">emp:${emps}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getLastName()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getEmail()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getGender()==0?&#x27;女&#x27;:&#x27;男&#x27;}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.department.getDepartmentName()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${#dates.format(emp.getBirth(),&#x27;yyyy-MM-dd HH:mm:ss&#x27;)}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">btn btn-sm btn-primary</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">编辑</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">btn btn-sm btn-danger</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">删除</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">td</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">tr</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">tbody</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/9593460fee2217c37f96c803587448ba-16808671270421400.png" alt="image-20210504081556725" class="img_ev3q"></p>
<p>**OK，显示全部员工 OK！</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6添加员工实现">6、添加员工实现<a href="#6添加员工实现" class="hash-link" aria-label="Direct link to 6、添加员工实现" title="Direct link to 6、添加员工实现">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="61表单及细节处理">6.1、表单及细节处理<a href="#61表单及细节处理" class="hash-link" aria-label="Direct link to 6.1、表单及细节处理" title="Direct link to 6.1、表单及细节处理">​</a></h4>
<p>1、将添加员工信息改为超链接</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">h2</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">btn btn-sm btn-success</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/emp}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">添加员工</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">h2</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、编写对应的 controller</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//to员工添加页面</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@GetMapping(&quot;/emp&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public String toAddPage(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return &quot;emp/add&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、添加前端页面；复制 list 页面，修改即可</p>
<p>bootstrap 官网文档 ： <a href="https://v4.bootcss.com/docs/4.0/components/forms/" target="_blank" rel="noopener noreferrer">https://v4.bootcss.com/docs/4.0/components/forms/</a></p>
<p>我们去可以里面找自己喜欢的样式！我这里给大家提供了编辑好的：</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/emp}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">post</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">LastName</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">kuangshen</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">text</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">lastName</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">Email</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">24736743@qq.com</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">email</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">email</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">Gender</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">br</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check form-check-inline</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-input</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">gender</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">radio</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">1</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-label</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">男</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check form-check-inline</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-input</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">gender</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">radio</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">0</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-label</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">女</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">department</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">select</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">department.id</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">option</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">each</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">dept:${departments}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${dept.getDepartmentName()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${dept.getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">option</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">select</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">Birth</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">kuangstudy</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">text</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">birth</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">btn btn-primary</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">submit</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">添加</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>4、部门信息下拉框应该选择的是我们提供的数据，所以我们要修改一下前端和后端</p>
<p>Controller</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@GetMapping(&quot;/emp&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public String toAddPage(Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //查询所有的部门信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    Collection&lt;Department&gt; departments = departmentDao.getDepartments();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    model.addAttribute(&quot;departments&quot;,departments);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return &quot;emp/add&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>前端</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">select</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">department.id</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">option</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">each</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">dept:${departments}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${dept.getDepartmentName()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${dept.getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">  </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">option</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">select</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>**OK，修改了 controller，重启项目测试！</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="62具体添加功能">6.2、具体添加功能<a href="#62具体添加功能" class="hash-link" aria-label="Direct link to 6.2、具体添加功能" title="Direct link to 6.2、具体添加功能">​</a></h4>
<p>1、修改 add 页面 form 表单提交地址和方式</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/emp}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">post</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">1</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、编写 controller；</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//员工添加功能</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//接收前端传递的参数，自动封装成为对象[要求前端传递的参数名，和属性名一致]</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@PostMapping (&quot;/emp&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public String addEmp(Employee employee){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //保存员工的信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    System.out.println(employee);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    employeeDao.save(employee);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    // 回到员工列表页面，可以使用redirect或者forward，就不会被视图解析器解析</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return &quot;redirect:/emps&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/e861ba572957e18de4f83271a7caf94f-16808671270421402.png" alt="image-20210504161017922" class="img_ev3q"></p>
<p>回忆：重定向和转发以及 /的问题？</p>
<blockquote>
<p>时间格式问题</p>
</blockquote>
<img decoding="async" loading="lazy" src="https://gitee.com/cold-abyss_admin/my-image-host/raw/master/img/image-20210504161215722.png" alt="image-20210504161215722" style="zoom:67%" class="img_ev3q">
<p>生日我们提交的是一个日期 ， 我们第一次使用的 / 正常提交成功了，后面使用 - 就错误了，所以这里面</p>
<p>应该存在一个日期格式化的问题；</p>
<p>SpringMVC 会将页面提交的值转换为指定的类型，默认日期是按照 / 的方式提交 ； 比如将 2019/01/01</p>
<p>转换为一个 date 对象。</p>
<p>那思考一个问题？我们能不能修改这个默认的格式呢？</p>
<p>这个在配置类中，所以我们可以自定义的去修改这个时间格式化问题，我们在我们的配置文件中修改一</p>
<p>下；</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">spring.mvc.date-format=yyyy-MM-dd</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这样的话，我们现在就支持 - 的格式了，但是又不支持 / 了 ， 2333 吧</p>
<p>测试 OK！</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="7修改员工信息">7、修改员工信息<a href="#7修改员工信息" class="hash-link" aria-label="Direct link to 7、修改员工信息" title="Direct link to 7、修改员工信息">​</a></h4>
<p>逻辑分析：</p>
<p>我们要实现员工修改功能，需要实现两步；</p>
<p>1、点击修改按钮，去到编辑页面，我们可以直接使用添加员工的页面实现</p>
<p>2、显示原数据，修改完毕后跳回列表页面！</p>
<blockquote>
<p>实现</p>
</blockquote>
<p>1、我们去实现一下，首先修改跳转链接的位置；</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">btn btn-sm btn-primary</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/emp/}+${emp.getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">编辑</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、编写对应的 controller</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//员工修改页面</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@GetMapping(&quot;/emp/{id}&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public String toUpdateEmp(@PathVariable(&quot;id&quot;) Integer id,Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    Employee employee = employeeDao.getEmployeeById(id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    model.addAttribute(&quot;emp&quot;,employee);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //查询所有的部门信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    Collection&lt;Department&gt; departments = departmentDao.getDepartments();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    model.addAttribute(&quot;departments&quot;,departments);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return &quot;emp/update&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>3、我们需要在这里将 add 页面复制一份，改为 update 页面；需要修改页面，将我们后台查询数据回显</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">action</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/emp}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">method</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">post</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">hidden</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">id</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">LastName</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getLastName()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">kuangshen</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">text</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">lastName</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">Email</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getEmail()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">24736743@qq.com</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">email</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">email</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">Gender</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">br</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check form-check-inline</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">checked</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getGender()==1}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-input</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">gender</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">radio</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">1</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-label</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">男</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check form-check-inline</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">checked</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${emp.getGender()==0}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-input</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">gender</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">radio</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">0</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-check-label</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">女</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">department</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">select</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">department.id</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">option</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">selected</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${dept.id==emp.getDepartment().getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">each</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">dept:${departments}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${dept.getDepartmentName()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">        </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${dept.getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">option</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">select</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-group</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">Birth</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">label</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">input</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">value</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${#dates.format(emp.birth,&#x27;yyyy-MM-dd HH:mm&#x27;)}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">form-control</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">placeholder</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">2021-02-02</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">text</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name" style="color:#0c4a6e">name</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">birth</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">    </span><span class="token tag punctuation" style="color:#475569">/&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">btn btn-primary</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">type</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">submit</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">修改</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">button</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">form</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>数据回显 OK!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8删除员工实现与-404-页面处理">8、删除员工实现与 404 页面处理<a href="#8删除员工实现与-404-页面处理" class="hash-link" aria-label="Direct link to 8、删除员工实现与 404 页面处理" title="Direct link to 8、删除员工实现与 404 页面处理">​</a></h3>
<p>1、list 页面，编写提交地址</p>
<div class="language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">btn btn-sm btn-danger</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/delEmp/}+${emp.getId()}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">删除</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>2、编写 Controller</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//删除员工</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@GetMapping(&quot;/delEmp/{id}&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public String delEmp(@PathVariable(&quot;id&quot;) Integer id){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    employeeDao.delete(id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return &quot;redirect:/emps&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">测试OK！</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">、、</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&gt; 注销</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">1、注销请求</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">​```html</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="9404-及注销">9、404 及注销<a href="#9404-及注销" class="hash-link" aria-label="Direct link to 9、404 及注销" title="Direct link to 9、404 及注销">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="注销请求">注销请求<a href="#注销请求" class="hash-link" aria-label="Direct link to 注销请求" title="Direct link to 注销请求">​</a></h4>
<div class="language-HTML language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">class</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">nav-link</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/user/logout}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">注销</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="404">404:<a href="#404" class="hash-link" aria-label="Direct link to 404:" title="Direct link to 404:">​</a></h4>
<p>我们只需要在模板目录下添加一个 error 文件夹，文件夹中存放我们相应的错误页面；</p>
<p>比如 404.html 或者 4xx.html 等等，SpringBoot 就会帮我们自动使用了！</p>
<p>测试使用！</p>
<p>2、对应的 controller</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">   @RequestMapping(&quot;/user/logout&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String logout(HttpSession session){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        session.invalidate();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;redirect:/index.html&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="后端人员开发如何开发一个网站">后端人员开发如何开发一个网站<a href="#后端人员开发如何开发一个网站" class="hash-link" aria-label="Direct link to 后端人员开发如何开发一个网站" title="Direct link to 后端人员开发如何开发一个网站">​</a></h2>
<p>框架：vue，layui，bootstrap，</p>
<p>模版：由他人写好，功能齐全，简单修改后上手直接开发，</p>
<ol>
<li>如何快速的搭建一个 web 应用：</li>
<li>前端：页面长什么样子</li>
<li>数据库：设计数据库: 难点</li>
<li>前端能让他自动运行：独立化工程，如果实在是不想，就 all in one</li>
<li>前后端联调！</li>
</ol>
<p>layui 免费模版，x-admin</p>
<h1>SpringData</h1>
<p>对于数据访问层，无论是 nosql 还是 sql 数据库，SpringBoot 的底层都是用 Springdata 去统一处理</p>
<p>SpringBoot：Springdata 的官方文档地址：</p>
<p><a href="https://spring.io/projects/spring-data" target="_blank" rel="noopener noreferrer">https://spring.io/projects/spring-data</a></p>
<p>新项目：Spring-boot-data</p>
<p>项目搭建完成后肯定导入相关启动器，</p>
<p>之后是数据源的配置：</p>
<ol>
<li>
<p>使用学习 mybtis 的数据库，配置相关 yml</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/ee4afe06a917941024b0b17ee74437d5-16808671270421405.png" alt="image-20210713083022233" class="img_ev3q"></p>
</li>
<li>
<p>SpringBoot 的默认是用的 mysql8，所以如果出现时区报错，那么我们就添加时区，</p>
<p><code>serverTimezone=&quot;UTC&quot;</code>来解决异 durid</p>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="druid">druid<a href="#druid" class="hash-link" aria-label="Direct link to druid" title="Direct link to druid">​</a></h3>
<p>durid 的常用配置参数</p>





























































































































<table><thead><tr><th>配置</th><th>缺省值</th><th>说明</th></tr></thead><tbody><tr><td>name</td><td></td><td>配置这个属性的意义在于，如果存在多个数据源，监控的时候可以通过名字来区分开来。 如果没有配置，将会生成一个名字，格式是：&quot;DataSource-&quot; + System.identityHashCode(this)</td></tr><tr><td>jdbcUrl</td><td></td><td>连接数据库的 url，不同数据库不一样。例如： mysql : jdbc:mysql://10.20.153.104:3306/druid2 oracle : jdbc:oracle:thin:@10.20.149.85:1521:ocnauto</td></tr><tr><td>username</td><td></td><td>连接数据库的用户名</td></tr><tr><td>password</td><td></td><td>连接数据库的密码。如果你不希望密码直接写在配置文件中，可以使用 ConfigFilter。详细看这里：<a href="https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter" target="_blank" rel="noopener noreferrer">https://github.com/alibaba/druid/wiki/%E4%BD%BF%E7%94%A8ConfigFilter</a></td></tr><tr><td>driverClassName</td><td>根据 url 自动识别</td><td>这一项可配可不配，如果不配置 druid 会根据 url 自动识别 dbType，然后选择相应的 driverClassName(建议配置下)</td></tr><tr><td>initialSize</td><td>0</td><td>初始化时建立物理连接的个数。初始化发生在显示调用 init 方法，或者第一次 getConnection 时</td></tr><tr><td>maxActive</td><td>8</td><td>最大连接池数量</td></tr><tr><td>maxIdle</td><td>8</td><td>已经不再使用，配置了也没效果</td></tr><tr><td>minIdle</td><td></td><td>最小连接池数量</td></tr><tr><td>maxWait</td><td></td><td>获取连接时最大等待时间，单位毫秒。配置了 maxWait 之后，缺省启用公平锁，并发效率会有所下降，如果需要可以通过配置 useUnfairLock 属性为 true 使用非公平锁。</td></tr><tr><td>poolPreparedStatements</td><td>false</td><td>是否缓存 preparedStatement，也就是 PSCache。PSCache 对支持游标的数据库性能提升巨大，比如说 oracle。在 mysql 下建议关闭。</td></tr><tr><td>maxOpenPreparedStatements</td><td>-1</td><td>要启用 PSCache，必须配置大于 0，当大于 0 时，poolPreparedStatements 自动触发修改为 true。在 Druid 中，不会存在 Oracle 下 PSCache 占用内存过多的问题，可以把这个数值配置大一些，比如说 100</td></tr><tr><td>validationQuery</td><td></td><td>用来检测连接是否有效的 sql，要求是一个查询语句。如果 validationQuery 为 null，testOnBorrow、testOnReturn、testWhileIdle 都不会其作用。</td></tr><tr><td>testOnBorrow</td><td>true</td><td>申请连接时执行 validationQuery 检测连接是否有效，做了这个配置会降低性能。</td></tr><tr><td>testOnReturn</td><td>false</td><td>归还连接时执行 validationQuery 检测连接是否有效，做了这个配置会降低性能</td></tr><tr><td>testWhileIdle</td><td>false</td><td>建议配置为 true，不影响性能，并且保证安全性。申请连接的时候检测，如果空闲时间大于 timeBetweenEvictionRunsMillis，执行 validationQuery 检测连接是否有效。</td></tr><tr><td>timeBetweenEvictionRunsMillis</td><td></td><td>有两个含义： 1) Destroy 线程会检测连接的间隔时间 2) testWhileIdle 的判断依据，详细看 testWhileIdle 属性的说明</td></tr><tr><td>numTestsPerEvictionRun</td><td></td><td>不再使用，一个 DruidDataSource 只支持一个 EvictionRun</td></tr><tr><td>minEvictableIdleTimeMillis</td><td></td><td></td></tr><tr><td>connectionInitSqls</td><td></td><td>物理连接初始化的时候执行的 sql</td></tr><tr><td>exceptionSorter</td><td>根据 dbType 自动识别</td><td>当数据库抛出一些不可恢复的异常时，抛弃连接</td></tr><tr><td>filters</td><td></td><td>属性类型是字符串，通过别名的方式配置扩展插件，常用的插件有： 监控统计用的 filter:stat 日志用的 filter:log4j 防御 sql 注入的 filter:wall</td></tr><tr><td>proxyFilters</td><td></td><td>类型是 List&lt;com.alibaba.druid.filter.Filter&gt;，如果同时配置了 filters 和 proxyFilters，是组合关系，并非替换关系</td></tr></tbody></table>
<ol>
<li>
<p>配置 druid 步骤</p>
<ol>
<li>
<p>导入相关依赖，</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-data-jdbc</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">mysql</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">mysql-connector-java</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-jdbc</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">com.alibaba</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">druid</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">1.2.6</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">log4j</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">log4j</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">1.2.17</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>配置对应的数据源</p>
<ol>
<li>
<p>对应配置文件</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">spring:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">  datasource:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    driver-class-name: com.mysql.jdbc.Driver</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    password: xxx</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    username: xxx</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    url: jdbc:mysql://localhost:3306/mybatis #?serverTimezone=UTC&amp;useUnicode=true&amp;charcterEncoding=UTF-8</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    type: com.alibaba.druid.pool.DruidDataSource</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
</li>
</ol>
</li>
<li>
<p>去将我们的增删改查方法测试一下就好了,用的是 jdbc 模版，由 boot 提供：jdbcTemplate</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.controller;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.jdbc.core.JdbcTemplate;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.PathVariable;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.RequestMapping;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.RestController;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Datacontroller {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    JdbcTemplate jdbcTemplate;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/userlist&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public List&lt;Map&lt;String,Object&gt;&gt; userlist(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String sql = &quot;select * from mybatis.user&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        List&lt;Map&lt;String, Object&gt;&gt; maps = jdbcTemplate.queryForList(sql);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return  maps;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/addUser&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String addUser(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String sql = &quot;insert into mybatis.user(id,name,pwd) values(1,&#x27;小胡&#x27;,&#x27;123456&#x27;)&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        jdbcTemplate.update(sql);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;insert&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/upddateUser/{id}&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String upddateUser(@PathVariable(&quot;id&quot;) int id){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String sql = &quot;update mybatis.user set name=?,pwd=?  where id =&quot;+id;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Object[] obj = new Object[2];</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        obj[0] = &quot;小明&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        obj[1] = &quot;66666&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        jdbcTemplate.update(sql,obj);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;update&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/DeleteUser/{id}&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String DeleteUser(@PathVariable(&quot;id&quot;) int id){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String sql = &quot;delete from mybatis.user where id=? &quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        jdbcTemplate.update(sql,id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;DeleteUser&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>YML 配置 druid 常用的一些配置</p>
<div class="language-yml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token comment" style="color:#6A9955">#SpringBoot默认是不注入这些的，需要自己绑定</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">#druid数据源专有配置</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">initialSize</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">minIdle</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">maxActive</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">maxWait</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">timeBetweenEvictionRunsMillis</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">60000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">minEvictableIdleTimeMillis</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">300000</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">validationQuery</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> SELECT 1 FROM DUAL</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">testWhileIdle</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">testOnBorrow</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">testOnReturn</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">false</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">poolPreparedStatements</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">#配置监控统计拦截的filters，stat：监控统计、log4j：日志记录、wall：防御sql注入</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">#如果允许报错，java.lang.ClassNotFoundException: org.apache.Log4j.Properity</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">#则导入log4j 依赖就行</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">filters</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> stat</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">wall</span><span class="token punctuation" style="color:#475569">,</span><span class="token plain">log4j</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">maxPoolPreparedStatementPerConnectionSize</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token number" style="color:#B5CEA8">20</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">useGlobalDataSourceStat</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> </span><span class="token boolean important">true</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token key atrule">connectionProperties</span><span class="token punctuation" style="color:#475569">:</span><span class="token plain"> druid.stat.mergeSql=true;druid.stat.slowSqlMillis=500</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>配置 sql 监控，和过滤请求：这里注意不要私自改动：loginusername 等 key</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.alibaba.druid.pool.DruidDataSource;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.alibaba.druid.support.http.StatViewServlet;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.alibaba.druid.support.http.WebStatFilter;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.boot.context.properties.ConfigurationProperties;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.boot.web.servlet.FilterRegistrationBean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.boot.web.servlet.ServletRegistrationBean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.servlet.Filter;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.servlet.ServletRegistration;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import javax.sql.DataSource;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.HashMap;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class DruidConfing {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @ConfigurationProperties(prefix = &quot;spring.datasource&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public DataSource druidDataSource(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return new DruidDataSource();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //后台监控</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public ServletRegistrationBean ServletRegistrationBean(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        ServletRegistrationBean&lt;StatViewServlet&gt; bean = new ServletRegistrationBean&lt;&gt;(new StatViewServlet(), &quot;/druid/*&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        HashMap&lt;String, String&gt; InitParameters = new HashMap&lt;&gt;();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        InitParameters.put(&quot;loginUsername&quot;,&quot;admin&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        InitParameters.put(&quot;loginPassword&quot;,&quot;123456&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        InitParameters.put(&quot;allow&quot;,&quot;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //后台监控</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        bean.setInitParameters(InitParameters);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return  bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public FilterRegistrationBean filterRegistrationBean(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        FilterRegistrationBean&lt;Filter&gt; bean = new FilterRegistrationBean&lt;&gt;();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //可以过滤那些请求？</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        bean.setFilter(new WebStatFilter());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        bean.addUrlPatterns(&quot;/*&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        bean.addInitParameter(&quot;exclusions&quot;, &quot;*.js,*.gif,*.jpg,*.png,*.css,*.ico,/druid/*&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-整合-mybatis">SpringBoot 整合 mybatis<a href="#springboot-整合-mybatis" class="hash-link" aria-label="Direct link to SpringBoot 整合 mybatis" title="Direct link to SpringBoot 整合 mybatis">​</a></h3>
<p>准备工作，</p>
<p>寻找依赖，添加，这是个第三方的启动器</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">&lt;!-- https://mvnrepository.com/artifact/org.mybatis.spring.boot/mybatis-spring-boot-starter --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.mybatis.spring.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">mybatis-spring-boot-starter</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">2.2.0</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>去创建使用 mybatis 的需要文件，</p>
<p>实体类：user</p>
<p>mapper 接口：usermapper</p>
<p>配置文件:usermapper.xml</p>
<p>创建完毕后我们去 boot 的配置文件配置 mybatis：</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">#mybatis配置</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">mybatis.mapper-location=classpath:mapper/*.xml</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">mybatis.type-aliases-package=com.hyc.pojo</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>配置文件模板：</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token prolog" style="color:#000080">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token doctype punctuation" style="color:#475569">&lt;!</span><span class="token doctype doctype-tag">DOCTYPE</span><span class="token doctype"> </span><span class="token doctype name">mapper</span><span class="token doctype"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token doctype">        </span><span class="token doctype name">PUBLIC</span><span class="token doctype"> </span><span class="token doctype string" style="color:#64748b">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><span class="token doctype"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token doctype">        </span><span class="token doctype string" style="color:#64748b">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span><span class="token doctype punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!-- namespace 写入 自己 dao 里的接口名称--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">mapper</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">namespace</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">com.hyc.mapper.userMapper</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">mapper</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用 mybatis 的注解来 映射，实体类：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.mapper;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.hyc.pojo.User;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.ibatis.annotations.Mapper;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.stereotype.Repository;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.List;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Mapper</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Repository</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public interface userMapper {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    List&lt;User&gt; getuser();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    User getuserByid(int id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    int addUser(User user);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    int UpdUser(User user);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    int DelUser(int id);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后编写映射文件：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!DOCTYPE mapper</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        &quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!-- namespace 写入 自己 dao 里的接口名称--&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;mapper namespace=&quot;com.hyc.mapper.userMapper&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;insert id=&quot;addUser&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        insert into mybatis.user(id, name, pwd) VALUES (#{id},#{name},#{pwd});</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;/insert&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;update id=&quot;UpdUser&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        update mybatis.user</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        set user.name = #{name},user.pwd =#{pwd}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        where id = #{id};</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;/update&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;delete id=&quot;DelUser&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        delete from  mybatis.user where id=#{id}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;/delete&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;select id=&quot;getuser&quot; resultType=&quot;com.hyc.pojo.User&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        select * from mybatis.user</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;/select&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;select id=&quot;getuserByid&quot; resultType=&quot;com.hyc.pojo.User&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        select *</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        from mybatis.user where id=#{id};</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;/select&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/mapper&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>编写控制层测试即可：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class usercontroller {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private userMapper userMapper;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/queryList&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public List&lt;User&gt; queryList(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        List&lt;User&gt; getuser = userMapper.getuser();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        for (User user : getuser) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            System.out.println(user);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return getuser;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>SpringSecurity（安全）</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="springsecurity-简介">Springsecurity 简介<a href="#springsecurity-简介" class="hash-link" aria-label="Direct link to Springsecurity 简介" title="Direct link to Springsecurity 简介">​</a></h2>
<p>Spring Security 是一个能够为基于 Spring 的企业应用系统提供声明式的安全访问控制解决方案的安全框架。它提供了一组可以在 Spring 应用上下文中配置的 Bean，充分利用了 Spring IoC，DI（控制反转 Inversion of Control ,DI:Dependency Injection 依赖注入）和 AOP（面向切面编程）功能，为应用系统提供声明式的安全访问控制功能，减少了为企业系统安全控制编写大量重复代码的工作。</p>
<p>web 开发中 ，安全是第一位的，我们学过的有，过滤器，拦截器</p>
<p>spring security 的核心功能主要包括：</p>
<ul>
<li>认证 （你是谁）</li>
<li>授权 （你能干什么）</li>
<li>攻击防护 （防止伪造身份）</li>
</ul>
<p>功能性需求：否</p>
<p>做网站需要考虑什么？</p>
<ol>
<li>漏洞，隐私泄露问题</li>
<li>架构一旦确定，再加入安全十分浪费人力，</li>
</ol>
<p>目前两大火热的安全框架：SpringSecurity 和 shrio，他们两个十分相似</p>
<ul>
<li>功能权限</li>
<li>访问权限</li>
<li>菜单权限</li>
<li>以前我们都是用拦截器，过滤器，来做，这样会有一个缺点，大量的原生代码，冗余</li>
</ul>
<p>其核心就是一组过滤器链，项目启动后将会自动配置。最核心的就是 Basic Authentication Filter 用来认证用户的身份，一个在 spring security 中一种过滤器处理一种认证方式。</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/71dec050a72f31e4d06b06222d3a4781-16808671270421407.png" alt="img" class="img_ev3q"></p>
<p>记住几个类：</p>
<ul>
<li>webSecurityConfigurerAdapter:自定义 security 策略</li>
<li>AuthenticationManagerBuilder:自定义认证策略</li>
<li>@EnablewebSecurity：开启 webSercurity</li>
</ul>
<p>官网地址：<a href="https://spring.io/projects/spring-security" target="_blank" rel="noopener noreferrer">https://spring.io/projects/spring-security</a></p>
<p>帮助文档：<a href="https://docs.spring.io/spring-security/site/docs/current/reference/html5/" target="_blank" rel="noopener noreferrer">https://docs.spring.io/spring-security/site/docs/current/reference/html5/</a></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="security-实战">Security 实战<a href="#security-实战" class="hash-link" aria-label="Direct link to Security 实战" title="Direct link to Security 实战">​</a></h2>
<p>导入相关依赖</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.springframework.boot</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">spring-boot-starter-security</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>一般我们，配置 Security 的配置类都有一个模式</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@EnableWebSecurity</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class SecurityConfig extends WebSecurityConfigurerAdapter {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected void configure(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        super.configure(http);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>接下来就可以来制定我们的需求了</p>
<p>需求 1：首页所有人可以访问，功能页只有对应的权限才能进去</p>
<p>编写：SecurityConfig 类</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected void configure(HttpSecurity http) throws Exception {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //首页所有人可以访问，功能页只有对应的权限才能进去</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        http.authorizeRequests()//授权请求方法</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .antMatchers(&quot;/&quot;).permitAll()</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .antMatchers(&quot;views/level1/*&quot;).hasRole(&quot;vip1&quot;)//什么角色可以访问什么位置</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .antMatchers(&quot;views/level2/*&quot;).hasRole(&quot;vip2&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .antMatchers(&quot;views/level3/*&quot;).hasRole(&quot;vip3&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>给不同的用户，添加访问权限，</p>
<p>PS:在 5.x 之后密码要加密才可以有效： 使用以这个为后缀的类<code>passwordEncoder</code></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//密码编码：passwordencoder</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //5.x之后更新了很多的加密方法</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected void configure(AuthenticationManagerBuilder auth) throws Exception {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        auth.inMemoryAuthentication().passwordEncoder(new BCryptPasswordEncoder())</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .withUser(&quot;hyc&quot;).password(new BCryptPasswordEncoder().encode(&quot;123456&quot;)).roles(&quot;vip2&quot;,&quot;vip3&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .and()</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .withUser(&quot;root&quot;).password(new BCryptPasswordEncoder().encode(&quot;123456&quot;)).roles(&quot;vip1&quot;,&quot;vip2&quot;,&quot;vip3&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .and()</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .withUser(&quot;guest&quot;).password(new BCryptPasswordEncoder().encode(&quot;123456&quot;)).roles(&quot;vip1&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>设置注销：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">   http.logout().logoutSuccessUrl(&quot;/index&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="thymeleaf-常用命名空间">thymeleaf 常用命名空间：<a href="#thymeleaf-常用命名空间" class="hash-link" aria-label="Direct link to thymeleaf 常用命名空间：" title="Direct link to thymeleaf 常用命名空间：">​</a></h4>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">xmlns:th=http://www.thymeleaf.org</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">xmlns:sec=http://www.thymeleaf.org/extras/spring-security</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">xmlns:shiro=http://www.pollix.at/thymeleaf/shiro</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">html lang=en xmlns:th=http://www.thymeleaf.org</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				xmlns:sec=http://www.thymeleaf.org/extras/spring-security</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">				xmlns:shiro=http://www.pollix.at/thymeleaf/shiro</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>常用的内容：</p>
<p>PS：如果 403：<code>csrf().disable();</code>关闭跨站攻击安全</p>
<p>匹配的路径不需要认证：<code>.antMatchers(&quot;/&quot;,&quot;/test/hello&quot;,&quot;/user/login&quot;).permitAll()</code></p>
<p>按照权限显示：<code> sec:authorize=&quot;hasRole(&quot;xxx&quot;)</code></p>
<p>是否登陆显示：<code>sec:authorize=&quot;!isAuthenticated()&quot;</code></p>
<p>指定登陆的页面：<code>.loginPage(&quot;/toLogin&quot;)</code></p>
<p>登陆访问路径：提交表单之后跳转的地址,可以看作一个中转站，这个步骤就是验证 user 的一个过程：<code>.loginProcessingUrl(&quot;/login&quot;);</code></p>
<p>注销之后转发的页面：<code>.logoutSuccessUrl(&quot;/index&quot;);</code></p>
<p>记住我：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">         //开启记住我功能 cookie 默认保存两周</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        http.rememberMe();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>自定义用户参数和密码参数</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">//.usernameParameter()</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//.passwordParameter()</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>shiro（安全）</h1>
<p>阿帕奇的安全框架</p>
<p>Apache Shiro 是一个 Java 的安全管理框架，可以用在 JavaEE 环境下，也可以用在 JavaSE 环境下。</p>
<p>此前我们学习了很多有关阿帕奇的东西：maven，tomcat，等等</p>
<p>官方号称十分钟就可以入门，</p>
<p>官网：<a href="https://shiro.apache.org/" target="_blank" rel="noopener noreferrer">https://shiro.apache.org/</a></p>
<p>为什么学他？：</p>
<p>(1)spring security 功能完善,学习成本偏高；
(2)shiro 学习成本低,简单的安全框架,基本功能存在(登录认证,权限认证)；　
(3)spring mvc interceptor(拦截器) 只能做登录认证,不能做权限认证。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="他能做什么">他能做什么？<a href="#他能做什么" class="hash-link" aria-label="Direct link to 他能做什么？" title="Direct link to 他能做什么？">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/d3a803ff872300da66d0f471ccf72215-16808671270421409.png" alt="image-20210716144222719" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/2bb97368fba1b64f385e6f441d5a3c82-16808671270421411.png" alt="image-20210716144350511" class="img_ev3q"></p>
<p><strong>Authentication</strong>：身份认证/登录；</p>
<p><strong>Authorization</strong>：授权；</p>
<p><strong>Session Manager</strong>：会话管理；</p>
<p><strong>Cryptography</strong>：加密；</p>
<p><strong>Web Support</strong>：**Web 支持，可以非常容易的集成到 Web 环境；</p>
<p>Caching：缓存；</p>
<p><strong>Concurrency</strong>：shiro 支持多线程应用的并发验证，即如在一个线程中开启另一个线程，能把权限自动传播过去；</p>
<p><strong>Testing</strong>：提供测试支持；</p>
<p><strong>Run As</strong>：允许一个用户假装为另一个用户（如果他们允许）的身份进行访问；</p>
<p><strong>Remember Me</strong>：记住我。</p>
<p><strong>Shiro</strong>不会去维护用户、维护权限；这些需要我们自己去设计/提供；然后通过相应的接口注入给 Shiro。</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shiro-架构">shiro 架构<a href="#shiro-架构" class="hash-link" aria-label="Direct link to shiro 架构" title="Direct link to shiro 架构">​</a></h3>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/e9e13ffcb23c56e6bce5d1bfcfe0d524-16808671270421413.png" alt="image-20210716144256590" class="img_ev3q"></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/7be084691ae50ef588242985fe4bd4b8-16808671270421415.png" alt="img" class="img_ev3q"></p>
<p><strong>Subject</strong>：主体；</p>
<p><strong>SecurityManager</strong>：相当于 SpringMVC 中的 DispatcherServlet 或者 Struts2 中的 FilterDispatcher；它管理着所有 Subject、且负责进行认证和授权、及会话、缓存的管理。</p>
<p><strong>Authenticator</strong>：认证器；</p>
<p><strong>Authrizer</strong>：授权器，；</p>
<p><strong>Realm</strong>：可以有 1 个或多个 Realm，是安全实体数据源；可以是 JDBC 实现，也可以是 LDAP 实现，或者内存实现等等；</p>
<p><strong>SessionManager</strong>：**Shiro 自己的 Session 来管理主体与应用之间交互的数据；</p>
<p><strong>SessionDAO</strong>：**DAO 大家都用过，数据访问对象，用于会话的 CRUD；同时 SessionDao 也可以使用 Cache 进行缓存以提高性能。</p>
<p><strong>CacheManager</strong>：缓存控制器，管理如用户、角色、权限等的缓存</p>
<p><strong>Cryptography</strong>：密码模块</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="helloshiro">helloshiro<a href="#helloshiro" class="hash-link" aria-label="Direct link to helloshiro" title="Direct link to helloshiro">​</a></h3>
<p>导入相关依赖：官方依赖</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.apache.shiro</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">shiro-core</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">1.6.0</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.slf4j</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">jcl-over-slf4j</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">1.7.21</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">org.slf4j</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">slf4j-log4j12</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">1.7.21</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">log4j</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">log4j</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">1.2.17</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"> </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">resources</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">resource</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">directory</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">${basedir}/src/main/webapp</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">directory</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">resource</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">resource</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">directory</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">${basedir}/src/main/resources</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">directory</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">resource</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">resource</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">directory</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">${basedir}/src/main/java</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">directory</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">includes</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">include</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">**/*.xml</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">include</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">include</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">**/*.properties</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">include</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">include</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">**/*.yml</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">include</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">includes</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">resource</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">resources</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>修改后的 Quickstart 类，</p>
<p>最新版本建议将：</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">FactorySecurityManager factory = new IniSecurityManagerFactory(classpath:shiro.ini);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">SecurityManager securityManager = factory.getInstance();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">转换位下面这样</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">DefaultSecurityManager securityManager = new DefaultSecurityManager();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">IniRealm iniRealm = new IniRealm(classpath:shiro.ini);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">securityManager.setRealm(iniRealm);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>下面代码是 Quickstart 类：</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">/*</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * Licensed to the Apache Software Foundation (ASF) under one</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * or more contributor license agreements.  See the NOTICE file</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * distributed with this work for additional information</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * regarding copyright ownership.  The ASF licenses this file</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * to you under the Apache License, Version 2.0 (the</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * &quot;License&quot;); you may not use this file except in compliance</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * with the License.  You may obtain a copy of the License at</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> *     http://www.apache.org/licenses/LICENSE-2.0</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * Unless required by applicable law or agreed to in writing,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * software distributed under the License is distributed on an</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * KIND, either express or implied.  See the License for the</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * specific language governing permissions and limitations</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * under the License.</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.SecurityUtils;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authc.*;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.mgt.DefaultSecurityManager;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.mgt.SecurityManager;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.realm.text.IniRealm;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.session.Session;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.subject.Subject;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.util.Factory;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.slf4j.Logger;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.slf4j.LoggerFactory;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">/**</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * Simple Quickstart application showing how to use Shiro&#x27;s API.</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> *</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> * @since 0.9 RC2</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"> */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Quickstart {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private static final transient Logger log = LoggerFactory.getLogger(Quickstart.class);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public static void main(String[] args) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // The easiest way to create a Shiro SecurityManager with configured</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // realms, users, roles and permissions is to use the simple INI config.</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // We&#x27;ll do that by using a factory that can ingest a .ini file and</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // return a SecurityManager instance:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // Use the shiro.ini file at the root of the classpath</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // (file: and url: prefixes load from files and urls respectively):</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        DefaultSecurityManager securityManager = new DefaultSecurityManager();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        IniRealm iniRealm = new IniRealm(&quot;classpath:shiro.ini&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        securityManager.setRealm(iniRealm);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // for this simple example quickstart, make the SecurityManager</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // accessible as a JVM singleton.  Most applications wouldn&#x27;t do this</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // and instead rely on their container configuration or web.xml for</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // webapps.  That is outside the scope of this simple quickstart, so</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // we&#x27;ll just do the bare minimum so you can continue to get a feel</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // for things.</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        SecurityUtils.setSecurityManager(securityManager);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // Now that a simple Shiro environment is set up, let&#x27;s see what you can do:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // get the currently executing user:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject currentUser = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // Do some stuff with a Session (no need for a web or EJB container!!!)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Session session = currentUser.getSession();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        session.setAttribute(&quot;someKey&quot;, &quot;aValue&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String value = (String) session.getAttribute(&quot;someKey&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (value.equals(&quot;aValue&quot;)) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log.info(&quot;Retrieved the correct value! [&quot; + value + &quot;]&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        // let&#x27;s login the current user so we can check against roles and permissions:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (!currentUser.isAuthenticated()) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            UsernamePasswordToken token = new UsernamePasswordToken(&quot;lonestarr&quot;, &quot;vespa&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            token.setRememberMe(true);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                currentUser.login(token);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            } catch (UnknownAccountException uae) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                log.info(&quot;There is no user with username of &quot; + token.getPrincipal());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            } catch (IncorrectCredentialsException ice) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                log.info(&quot;Password for account &quot; + token.getPrincipal() + &quot; was incorrect!&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            } catch (LockedAccountException lae) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                log.info(&quot;The account for username &quot; + token.getPrincipal() + &quot; is locked.  &quot; +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                        &quot;Please contact your administrator to unlock it.&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            // ... catch more exceptions here (maybe custom ones specific to your application?</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            catch (AuthenticationException ae) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                //unexpected condition?  error?</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //say who they are:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //print their identifying principal (in this case, a username):</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        log.info(&quot;User [&quot; + currentUser.getPrincipal() + &quot;] logged in successfully.&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //test a role:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (currentUser.hasRole(&quot;schwartz&quot;)) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log.info(&quot;May the Schwartz be with you!&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log.info(&quot;Hello, mere mortal.&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //test a typed permission (not instance-level)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (currentUser.isPermitted(&quot;lightsaber:wield&quot;)) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log.info(&quot;You may use a lightsaber ring.  Use it wisely.&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log.info(&quot;Sorry, lightsaber rings are for schwartz masters only.&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //a (very powerful) Instance Level permission:</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (currentUser.isPermitted(&quot;winnebago:drive:eagle5&quot;)) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log.info(&quot;You are permitted to &#x27;drive&#x27; the winnebago with license plate (id) &#x27;eagle5&#x27;.  &quot; +</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                    &quot;Here are the keys - have fun!&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } else {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            log.info(&quot;Sorry, you aren&#x27;t allowed to drive the &#x27;eagle5&#x27; winnebago!&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //all done - log out!</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        currentUser.logout();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.exit(0);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>三大对象：</p>
<ol>
<li>Subject</li>
<li>SecurityManage</li>
<li>fealm</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="shiro-整个流程">shiro 整个流程<a href="#shiro-整个流程" class="hash-link" aria-label="Direct link to shiro 整个流程" title="Direct link to shiro 整个流程">​</a></h3>
<p>常用过滤器如下</p>
<ul>
<li>anon：无需认证访问</li>
<li>authc：必须认证了才能访问</li>
<li>user：记住我开启了，才可以用</li>
<li>perms：拥有对某个资源的权限才能访问</li>
<li>role:该资源必须得到角色权限才可以访问</li>
</ul>
<p>代码实战：</p>
<p>首先是 shiroconfig，我们从下往上配置：</p>
<ol>
<li>首先是创建一个 realm 类</li>
<li>之后是创建 shiroconfig</li>
<li>之后从下往上配置
<ol>
<li>首先是引入 realm 类</li>
<li>配置安全管理器</li>
<li>之后设置过滤工厂</li>
</ol>
</li>
</ol>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.beans.factory.annotation.Qualifier;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.LinkedHashMap;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.LinkedList;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class shrioconfig {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//    shirofilterfactoryBean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        public ShiroFilterFactoryBean shiroFilterFactoryBean(@Qualifier(&quot;SecurityManager&quot;) DefaultWebSecurityManager defaultWebSecurityManager){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            ShiroFilterFactoryBean bean = new ShiroFilterFactoryBean();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //设置安全管理器</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            bean.setSecurityManager(defaultWebSecurityManager);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            /*</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * 常用过滤器如下</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * anon：无需认证访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * authc：必须认证了才能访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * user：记住我开启了，才可以用</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * perms：拥有对某个资源的权限才能访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         Map&lt;String,String&gt; filter = new LinkedHashMap();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         filter.put(&quot;/add&quot;,&quot;anon&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         filter.put(&quot;/upd&quot;,&quot;authc&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setFilterChainDefinitionMap(filter);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setLoginUrl(&quot;/tologin&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         return bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//    dafultwebSecurityManager</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean(name=&quot;SecurityManager&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public DefaultWebSecurityManager getdefaultWebSecurityManager(@Qualifier(&quot;Userrealm&quot;) userrealm userrealm){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    DefaultWebSecurityManager SecurityManager = new DefaultWebSecurityManager();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//    关联Userrealm</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    SecurityManager.setRealm(userrealm);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return  SecurityManager;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //    创建realm对象，需要自定义类</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public userrealm Userrealm() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return new userrealm();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>realm 对象需要引用外面的类 userrealm，我们需要继承 AuthorizingRealm 来获得授权，认证方法</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authc.AuthenticationException;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authc.AuthenticationInfo;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authc.AuthenticationToken;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authz.AuthorizationInfo;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.realm.AuthorizingRealm;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.subject.PrincipalCollection;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class userrealm extends AuthorizingRealm {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //授权</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(&quot;授权=========&gt;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //认证</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(&quot;认证=========&gt;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="用户认证">用户认证：<a href="#用户认证" class="hash-link" aria-label="Direct link to 用户认证：" title="Direct link to 用户认证：">​</a></h4>
<p>我们需要去编写 config 类，设置权限，什么路径需要什么权限，</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        public ShiroFilterFactoryBean shiroFilterFactoryBean(@Qualifier(&quot;SecurityManager&quot;) DefaultWebSecurityManager defaultWebSecurityManager){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            ShiroFilterFactoryBean bean = new ShiroFilterFactoryBean();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //设置安全管理器</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            bean.setSecurityManager(defaultWebSecurityManager);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            /*</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * 常用过滤器如下</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * anon：无需认证访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * authc：必须认证了才能访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * user：记住我开启了，才可以用</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * perms：拥有对某个资源的权限才能访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            role:该资源必须得到角色权限才可以访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         Map&lt;String,String&gt; filter = new LinkedHashMap();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         filter.put(&quot;/user/add&quot;,&quot;perms[user:add]&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         filter.put(&quot;/user/upd&quot;,&quot;perms[user:upd]&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setFilterChainDefinitionMap(filter);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setLoginUrl(&quot;/tologin&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setUnauthorizedUrl(&quot;/unauth&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         return bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后去 realm 去认证，认证的信息是我们从数据库 user 表中查询出来的数据</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  //认证</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(&quot;认证=========&gt;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//        获取当前的用户</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//        封装用户数据</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        UsernamePasswordToken token = (UsernamePasswordToken) authenticationToken;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user user = userService.queryUserByName(token.getUsername());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (user==null){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //认证的时候创建用户登陆的session</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Session session = subject.getSession();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                //将用户的属性传入到session中</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        session.setAttribute(&quot;loginUser&quot;,user);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">		//如何让我们的user可以全局使用，我们需要设置info中第一个参数为user</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return new SimpleAuthenticationInfo(user,user.getPassword() ,&quot;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后再认证之后获取用户对象授权，什么对象可以访问什么页面</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    //授权</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(&quot;授权=========&gt;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //授权信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //传递用户信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user currentUser = (user) subject.getPrincipal();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //从数据库中获取授权角色</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        info.addStringPermission(currentUser.getParms());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        info.addRole(&quot;user:add&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        info.addRole(&quot;user:upd&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return info;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="登陆功能">登陆功能<a href="#登陆功能" class="hash-link" aria-label="Direct link to 登陆功能" title="Direct link to 登陆功能">​</a></h4>
<p>controller</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/login&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String login(String username,String password,Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //获取角色对象</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        UsernamePasswordToken token = new UsernamePasswordToken(username,password);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            subject.login(token);//判断令牌是否正确</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } catch (UnknownAccountException uae) {//用户名不存在</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            model.addAttribute(&quot;msg&quot;,&quot;用户名不存在&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;login&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } catch (IncorrectCredentialsException ice) {//密码不存在</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            model.addAttribute(&quot;msg&quot;,&quot;密码错误&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;login&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这里有一个拓展可以做：就是密码加密处理</p>
<p>我们这里调用的 login（）方法会走上面我们配置的一系列流程</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="整合-shiro-和-thymeleaf">整合 shiro 和 thymeleaf<a href="#整合-shiro-和-thymeleaf" class="hash-link" aria-label="Direct link to 整合 shiro 和 thymeleaf" title="Direct link to 整合 shiro 和 thymeleaf">​</a></h3>
<p>需要的命名空间</p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">xmlns:th=&quot;http://www.thymeleaf.org&quot;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">xmlns:shiro=&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>要使用整合我们还需要导入整合包依赖</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token comment" style="color:#6A9955">&lt;!-- https://mvnrepository.com/artifact/com.github.theborakompanioni/thymeleaf-extras-shiro --&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">com.github.theborakompanioni</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">groupId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">thymeleaf-extras-shiro</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">artifactId</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">2.0.0</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">version</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        </span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">dependency</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后需要去配置类配置一个新的 bean</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    //整合ShiroDialect:用来整合shiro thymeleaf</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public ShiroDialect getshiroDialect(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return new ShiroDialect();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>完成以上步骤就可以在模版引擎上使用 shiro 了</p>
<p>前端页面内容</p>
<div class="language-HTML language-html codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-html codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token doctype punctuation" style="color:#475569">&lt;!</span><span class="token doctype doctype-tag">DOCTYPE</span><span class="token doctype"> </span><span class="token doctype name">html</span><span class="token doctype punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">html</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">lang</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">en</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-name namespace" style="color:#0c4a6e">xmlns:</span><span class="token tag attr-name" style="color:#0c4a6e">th</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">http://www.thymeleaf.org</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9">      </span><span class="token tag attr-name namespace" style="color:#0c4a6e">xmlns:</span><span class="token tag attr-name" style="color:#0c4a6e">shiro</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">http://www.thymeleaf.org/thymeleaf-extras-shiro</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token tag" style="color:#0ea5e9"></span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">head</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">meta</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name" style="color:#0c4a6e">charset</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">UTF-8</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">title</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">Title</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">title</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">head</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">body</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">h1</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">你好</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">h1</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${msg}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">span</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token comment" style="color:#6A9955">&lt;!--从session中判断值--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">if</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${session.get(&#x27;loginUser&#x27;)==null}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/tologin}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">登录</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/logout}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">注销</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">text</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">${msg}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">p</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">hr</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token comment" style="color:#6A9955">&lt;!--通过shiro中的hasPermission方法，判断登录的用户是否有这个权限，有权限才显示--&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">shiro:</span><span class="token tag attr-name" style="color:#0c4a6e">hasPermission</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">user:add</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/user/add}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">add</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">shiro:</span><span class="token tag attr-name" style="color:#0c4a6e">hasPermission</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">user:upd</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    </span><span class="token tag punctuation" style="color:#475569">&lt;</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag" style="color:#0ea5e9"> </span><span class="token tag attr-name namespace" style="color:#0c4a6e">th:</span><span class="token tag attr-name" style="color:#0c4a6e">href</span><span class="token tag attr-value punctuation attr-equals" style="color:#475569">=</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag attr-value" style="color:#64748b">@{/user/upd}</span><span class="token tag attr-value punctuation" style="color:#475569">&quot;</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain">update</span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">a</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">div</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">body</span><span class="token tag punctuation" style="color:#475569">&gt;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"></span><span class="token tag punctuation" style="color:#475569">&lt;/</span><span class="token tag" style="color:#0ea5e9">html</span><span class="token tag punctuation" style="color:#475569">&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="源码">源码<a href="#源码" class="hash-link" aria-label="Direct link to 源码" title="Direct link to 源码">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="配置相关">配置相关<a href="#配置相关" class="hash-link" aria-label="Direct link to 配置相关" title="Direct link to 配置相关">​</a></h4>
<p><strong>shiroconfig</strong></p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import at.pollux.thymeleaf.shiro.dialect.ShiroDialect;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.spring.web.ShiroFilterFactoryBean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.web.mgt.DefaultWebSecurityManager;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.beans.factory.annotation.Qualifier;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.LinkedHashMap;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.LinkedList;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import java.util.Map;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class shrioconfig {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//    shirofilterfactoryBean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        public ShiroFilterFactoryBean shiroFilterFactoryBean(@Qualifier(&quot;SecurityManager&quot;) DefaultWebSecurityManager defaultWebSecurityManager){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            ShiroFilterFactoryBean bean = new ShiroFilterFactoryBean();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //设置安全管理器</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            bean.setSecurityManager(defaultWebSecurityManager);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            /*</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * 常用过滤器如下</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * anon：无需认证访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * authc：必须认证了才能访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * user：记住我开启了，才可以用</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * perms：拥有对某个资源的权限才能访问</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            * */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         Map&lt;String,String&gt; filter = new LinkedHashMap();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         filter.put(&quot;/user/add&quot;,&quot;perms[user:add]&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         filter.put(&quot;/user/upd&quot;,&quot;perms[user:upd]&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setFilterChainDefinitionMap(filter);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setLoginUrl(&quot;/tologin&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         bean.setUnauthorizedUrl(&quot;/unauth&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">         return bean;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//    dafultwebSecurityManager</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean(name=&quot;SecurityManager&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public DefaultWebSecurityManager getdefaultWebSecurityManager(@Qualifier(&quot;Userrealm&quot;) userrealm userrealm){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    DefaultWebSecurityManager SecurityManager = new DefaultWebSecurityManager();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//    关联Userrealm</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    SecurityManager.setRealm(userrealm);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return  SecurityManager;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //    创建realm对象，需要自定义类</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public userrealm Userrealm() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return new userrealm();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //整合ShiroDialect:用来整合shiro thymeleaf</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public ShiroDialect getshiroDialect(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return new ShiroDialect();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><strong>userrealm</strong></p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.hyc.pojo.user;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import com.hyc.service.userServiceImpl;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.SecurityUtils;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authc.*;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authz.AuthorizationInfo;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authz.SimpleAuthorizationInfo;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.realm.AuthorizingRealm;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.session.Session;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.subject.PrincipalCollection;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.subject.Subject;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.beans.factory.annotation.Autowired;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class userrealm extends AuthorizingRealm {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    userServiceImpl userService;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //授权</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected AuthorizationInfo doGetAuthorizationInfo(PrincipalCollection principalCollection) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(&quot;授权=========&gt;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //授权信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        SimpleAuthorizationInfo info = new SimpleAuthorizationInfo();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //传递用户信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user currentUser = (user) subject.getPrincipal();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //授权角色</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        info.addStringPermission(currentUser.getParms());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        info.addRole(&quot;user:add&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        info.addRole(&quot;user:upd&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return info;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //认证</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Override</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    protected AuthenticationInfo doGetAuthenticationInfo(AuthenticationToken authenticationToken) throws AuthenticationException {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(&quot;认证=========&gt;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//        获取当前的用户</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//        封装用户数据</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        UsernamePasswordToken token = (UsernamePasswordToken) authenticationToken;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        user user = userService.queryUserByName(token.getUsername());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (user==null){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Session session = subject.getSession();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        session.setAttribute(&quot;loginUser&quot;,user);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return new SimpleAuthenticationInfo(user,user.getPassword() ,&quot;&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="控制层">控制层<a href="#控制层" class="hash-link" aria-label="Direct link to 控制层" title="Direct link to 控制层">​</a></h4>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.controller;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.SecurityUtils;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.authc.*;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.session.ProxiedSession;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.session.Session;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.apache.shiro.subject.Subject;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.stereotype.Controller;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.ui.Model;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.RequestBody;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.RequestMapping;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.ResponseBody;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.web.bind.annotation.RestController;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class Mycontroller {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping({&quot;/&quot;,&quot;/index&quot;})</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String toIndex(Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        model.addAttribute(&quot;msg&quot;,&quot;hello&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/user/add&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String add(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;user/add&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/user/upd&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String upd(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;user/upd&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/tologin&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String tologin(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;login&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/login&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String login(String username,String password,Model model){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        UsernamePasswordToken token = new UsernamePasswordToken(username,password);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            subject.login(token);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } catch (UnknownAccountException uae) {//用户名不存在</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            model.addAttribute(&quot;msg&quot;,&quot;用户名不存在&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;login&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } catch (IncorrectCredentialsException ice) {//密码不存在</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            model.addAttribute(&quot;msg&quot;,&quot;密码错误&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;login&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/unauth&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String unauth(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;您没有权限&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/logout&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String logout(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Subject subject = SecurityUtils.getSubject();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Session session = subject.getSession();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        session.removeAttribute(&quot;loginUser&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;index&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>前端页面：</p>
<p>index</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!DOCTYPE html&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;html lang=&quot;en&quot;xmlns:th=&quot;http://www.thymeleaf.org&quot;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">      xmlns:shiro=&quot;http://www.thymeleaf.org/thymeleaf-extras-shiro&quot;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;head&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;title&gt;Title&lt;/title&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/head&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;body&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;h1&gt;你好&lt;/h1&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;span th:text=&quot;${msg}&quot;&gt;&lt;/span&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!--从session中判断值--&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;div th:if=&quot;${session.get(&#x27;loginUser&#x27;)==null}&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;a th:href=&quot;@{/tologin}&quot;&gt;登录&lt;/a&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/div&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;a th:href=&quot;@{/logout}&quot;&gt;注销&lt;/a&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;p th:text=&quot;${msg}&quot;&gt;&lt;/p&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;hr&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;div shiro:hasPermission=&quot;user:add&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;a th:href=&quot;@{/user/add}&quot; &gt;add&lt;/a&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/div&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;div shiro:hasPermission=&quot;user:upd&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;a th:href=&quot;@{/user/upd}&quot;&gt;update&lt;/a&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/div&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/body&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/html&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>login</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!DOCTYPE html&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;html lang=&quot;en&quot; xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;head&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;title&gt;Title&lt;/title&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/head&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;body&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;p&gt;登陆&lt;/p&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;p th:text=&quot;${msg}&quot; style=&quot;color: red&quot;&gt;&lt;/p&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;form th:action=&quot;@{/login}&quot;&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   &lt;p&gt; 用户名：&lt;input type=&quot;text&quot; name=&quot;username&quot;&gt;&lt;/p&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">   &lt;p&gt; 密码：&lt;input type=&quot;password&quot; name=&quot;password&quot;&gt;&lt;/p&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;p&gt;&lt;input type=&quot;submit&quot; value=&quot;提交&quot;&gt;&lt;/p&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/form&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/body&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/html&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>安全框架总结：</h1>
<p>学习了 Springsecurity 和 shiro 之后，总结出一些学习方法</p>
<ol>
<li>安全框架的核心思想都十分相似，授权，认证，防伪等</li>
<li>他们通常都有几个对象，如 shiro 中的 subject，securityManager 一样，</li>
<li>源码的注释写有方法使用的模版，我们可以通过下载源码去查看注释，</li>
<li>Springsercurity 和 shiro 的区别，两个我个人认为，除了一个基于 Spring 之外功能上两者几乎一致</li>
<li>使用的感受
<ol>
<li>Spring Security 基于 Spring 开发，项目中如果使用 Spring 作为基础，配合 Spring Security 做权限更加方便，而 Shiro 需要和 Spring 进行整合开发</li>
<li>感觉 shiro 没有类似于 Spring Security 那样的安全防护</li>
<li>shiro 不需要基于任何框架，依赖性低</li>
<li>个人认为：配置的麻不麻烦关键在于项目用不用 Spring，我看大神们写博客都说 shrio 配置要更简单一些，但是简单的上手了两个安全框架之后，我觉得使用了 Spring 的项目上手 security 要比 shiro 简单的多，</li>
<li>还有个个人感想，帮助文档的阅读能力太重要了，学习和接触新技术在没有教程的情况下，文档的阅读能力决定了你的学习上限（个人中间有一段只照着官方文档学习，十分痛苦）</li>
</ol>
</li>
<li>以上就是安全框架简单上手的全内容啦，</li>
</ol>
<h1>swagger</h1>
<p>学习目标：</p>
<ul>
<li>了解 Swagger 的作用和概念</li>
<li>了解前后端分离</li>
<li>在 SpringBoot 中集成 Swagger</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="swagger-简介">Swagger 简介<a href="#swagger-简介" class="hash-link" aria-label="Direct link to Swagger 简介" title="Direct link to Swagger 简介">​</a></h2>
<p>故事还是要从前后端分离讲起啊</p>
<p>**前后端分离：**VUE+SpringBoot 基本上都用这一套</p>
<p>**后端时代：**前端只用管理静态页面，html===》后端，使用模版引擎 jsp=》后端主力</p>
<p><strong>前后端分离时代</strong>：</p>
<ul>
<li>后端：后端控制层，服务层，数据访问层【后端团队】</li>
<li>前端：前端控制层，视图层，【前端团队】
<ul>
<li>伪造后端数据，json，已经存在数据，不需要后端，前端工程依旧可以跑起来</li>
</ul>
</li>
<li>前后端如何交互 ====》API</li>
<li>前后端相对独立，松耦合</li>
<li>前后端甚至可以部署在不同的服务器上</li>
</ul>
<p>产生一个问题：</p>
<ul>
<li>前后端联调，前端和后端人员无法做到及时协商，解决问题，导致问题爆发</li>
<li>需要一个东西可以解决这个问题</li>
</ul>
<p>解决问题：</p>
<ul>
<li>首先指定计划，实时更新 API，较低集成风险</li>
<li>早些年：指定 word 计划文档</li>
<li>前后端分离：
<ul>
<li>前端测试后端接口：postman</li>
<li>后端提供接口，需要使用更新最新的消息及改动！</li>
</ul>
</li>
</ul>
<p>官网：<a href="https://swagger.io/" target="_blank" rel="noopener noreferrer">https://swagger.io/</a></p>
<p><strong>Swagger</strong>：</p>
<ul>
<li>号称世界上最流行的 api 框架</li>
<li>Restful Api 文档在线自动生成工具==》api 文档和 api 定义开发</li>
<li>直接运行，可以在线测试 api 接口;</li>
<li>执行多种语言（c#,java,php）</li>
</ul>
<p>在项目中使用 Swagger 需要 Springfox</p>
<ul>
<li>swagger2</li>
<li>ui</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="springboot-集成-swagger">SpringBoot 集成 Swagger<a href="#springboot-集成-swagger" class="hash-link" aria-label="Direct link to SpringBoot 集成 Swagger" title="Direct link to SpringBoot 集成 Swagger">​</a></h2>
<ol>
<li>
<p>新建项目：SpringBoot-Swagger</p>
</li>
<li>
<p>导入相关依赖</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger2 --&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;artifactId&gt;springfox-swagger2&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;version&gt;3.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;!-- https://mvnrepository.com/artifact/io.springfox/springfox-swagger-ui --&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;dependency&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;artifactId&gt;springfox-swagger-ui&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    &lt;version&gt;3.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">&lt;/dependency&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>新版（3.0）的直接加入启动器</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">        &lt;dependency&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            &lt;groupId&gt;io.springfox&lt;/groupId&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            &lt;artifactId&gt;springfox-boot-starter&lt;/artifactId&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            &lt;version&gt;3.0.0&lt;/version&gt;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        &lt;/dependency&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p>创建一个 helloword 的项目</p>
</li>
<li>
<p>配置 Swagger==&gt;就可以启动看看效果了 3.0 版本后不需要在加入@enableopenapi，和@enableswagger2 这两个注解，</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">package com.hyc.springbootswagger.config;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import org.springframework.context.annotation.Configuration;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">import springfox.documentation.swagger2.annotations.EnableSwagger2;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Configuration</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class swaggerconfig {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>路径：<a href="http://localhost:8080/swagger-ui/index.html" target="_blank" rel="noopener noreferrer">http://localhost:8080/swagger-ui/index.html</a></p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/9a33f1b08c99d1b6975e2031111bf5be-16808671270421417.png" alt="image-20210720101545889" class="img_ev3q"></p>
</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="配置-swagger">配置 Swagger<a href="#配置-swagger" class="hash-link" aria-label="Direct link to 配置 Swagger" title="Direct link to 配置 Swagger">​</a></h2>
<p>配置呢，Swagger 有自己的实例</p>
<p>我们使用 docket 来配置 swagger 的基本信息</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Docket docket(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return  new Docket(DocumentationType.SWAGGER_2)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .apiInfo(apiInfo());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    // 配置swagger基本信息</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private ApiInfo apiInfo(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Contact contact = new Contact(&quot;xxx&quot;, &quot;hyc.com&quot;, &quot;3132774018@qq.com&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return new ApiInfo(</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;XXX的swagger&quot;,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;签名&quot;,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;1.0&quot;,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;hyc.com&quot;,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                contact,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;Apache 2.0&quot;,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                &quot;http://www.apache.org/licenses/LICENSE-2.0&quot;,</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                new ArrayList());</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>应为没有 set 方法所以我们只能用构造器，貌似，还有一个什么 biuder 可以使用，有机会去试试</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="swagger-配置扫描接口">swagger 配置扫描接口<a href="#swagger-配置扫描接口" class="hash-link" aria-label="Direct link to swagger 配置扫描接口" title="Direct link to swagger 配置扫描接口">​</a></h2>
<p>select（）来设置扫描</p>
<p>扫描接口配置的方法：</p>
<p>apis：</p>
<ul>
<li>RequestHandlerSelectors 扫描接口的方式</li>
<li>basePackage 指定扫描包</li>
<li>any（）扫描全部</li>
<li>none（）不扫描</li>
<li>withclassannotation 扫描类的注解（里面必须放注解的反射对象）</li>
</ul>
<p>path：过滤哪里什么路径</p>
<ul>
<li>paths(PathSelectors.ant(&quot;/hyc/**&quot;))</li>
</ul>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"> .select()</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//指定我们需要基于什么包扫描</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">       .apis(RequestHandlerSelectors.basePackage(&quot;com.hyc.springbootswagger.controller&quot;))</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .build();</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用了自定义，那么 swagger 就不会去扫描其他的位置，会扫描你指定的这个报下的请求</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/088d9aeb1952ad85118848c8f3655812-16808671270421419.png" alt="image-20210720105603000" class="img_ev3q">可以发现，现在只有 controller 下的请求才会被扫描</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="是否开启-swagger">是否开启 Swagger<a href="#是否开启-swagger" class="hash-link" aria-label="Direct link to 是否开启 Swagger" title="Direct link to 是否开启 Swagger">​</a></h3>
<p><code>.enable(false)//eanble决定了是否启动swagger</code></p>
<p>如果为 false 那我们就无法进入 swagger-ui/index.html 了</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="如何让我在测试的时候用-swagger发布的时候不用-swagger">如何让我在测试的时候用 swagger，发布的时候不用 swagger<a href="#如何让我在测试的时候用-swagger发布的时候不用-swagger" class="hash-link" aria-label="Direct link to 如何让我在测试的时候用 swagger，发布的时候不用 swagger" title="Direct link to 如何让我在测试的时候用 swagger，发布的时候不用 swagger">​</a></h2>
<p><code>environment.acceptsProfiles</code>来判断是否处在环境中</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  //配置swagger要使用的环境</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Profiles profiles = Profiles.of(&quot;dev&quot;, &quot;test&quot;);</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用 profiles 来配置使用环境</p>
<p><code>.enable(flag)//eanble判断是否启动swagger</code></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="api-分组">api 分组<a href="#api-分组" class="hash-link" aria-label="Direct link to api 分组" title="Direct link to api 分组">​</a></h2>
<p>分组，如何分组，</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"> .groupName(&quot;胡宇辰&quot;)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>分组，如何多个分组？，我有多个 docket 就可以有多个.groupName</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Docket docket(Environment environment){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //配置swagger要使用的环境</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        Profiles profiles = Profiles.of(&quot;dev&quot;, &quot;test&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //environment。acceptsProfiles判断自己是否在自己设定的环境中</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        boolean flag = environment.acceptsProfiles(profiles);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return  new Docket(DocumentationType.SWAGGER_2)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .apiInfo(apiInfo())</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .groupName(&quot;胡宇辰&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .enable(flag)//eanble决定了是否启动swagger</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .select()</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                //指定我们需要基于什么包扫描</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                /*apis</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                * RequestHandlerSelectors扫描接口的方式</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                * basePackage指定扫描包</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                * any（）扫描全部</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                * none（）不扫描</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                * withclassannotation 扫描类的注解（里面必须放注解的反射对象）</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                *</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .apis(RequestHandlerSelectors.basePackage(&quot;com.hyc.springbootswagger.controller&quot;))</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                /*path：过滤哪里什么路径</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                *</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                * */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">//                .paths(PathSelectors.ant(&quot;/hyc/**&quot;))</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .build();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Docket docket1(Environment environment){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return  new Docket(DocumentationType.SWAGGER_2)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .apiInfo(apiInfo())</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .groupName(&quot;小刘&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Bean</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public Docket docket2(Environment environment){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return  new Docket(DocumentationType.SWAGGER_2)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .apiInfo(apiInfo())</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                .groupName(&quot;小郑&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>配置多个组</p>
<p>就是有很多个 docket，</p>
<p>效果：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/f2ee1f51d49668218634fd5e7b0ad4fe-16808671270421421.png" alt="image-20210720140340646" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="实体类">实体类<a href="#实体类" class="hash-link" aria-label="Direct link to 实体类" title="Direct link to 实体类">​</a></h2>
<p>只要我们的接口中，有接口返回的是实体类，那么就是会被 swagger 扫描</p>
<p>我们写一个方法</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @PostMapping(&quot;/user&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public User user(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return new User();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>返回的是实体类 user，user 里有两个字段，name 和 age</p>
<p>页面效果图：</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/b64a4de0f61505cc4e1bb356232ab99c-16808671270421423.png" alt="image-20210720141029645" class="img_ev3q"></p>
<p>那我们看到的如@API 这些注解是干什么的呢？</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="swagger-注解">Swagger 注解<a href="#swagger-注解" class="hash-link" aria-label="Direct link to Swagger 注解" title="Direct link to Swagger 注解">​</a></h2>
<p>用来解释类的用<code>@Apimodel</code></p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@ApiModel(&quot;用户信息实体类&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class User{</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>用来解释类中的属性用<code>@ApiModelProperty()</code></p>
<div class="language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">  @ApiModelProperty(&quot;用户名字&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String name;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @ApiModelProperty(&quot;用户年龄&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public int age;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>小疑问：我用 private 修饰的变量这么写就不显示，怎么办？</p>
<p>解决方案：写在 get 方法上就可以有效果了</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="swagger-测试接口">Swagger 测试接口<a href="#swagger-测试接口" class="hash-link" aria-label="Direct link to Swagger 测试接口" title="Direct link to Swagger 测试接口">​</a></h2>
<p>测试接口十分好用，</p>
<p>我们可以测试自己的接口是否有效</p>
<p>小测试：</p>
<p>测试接口：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @PostMapping(&quot;/userJY&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public User user2(String name,int age){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        User user = new User(name,age);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return user;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>测试页面步骤图</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/32efbb7531f19d80cf60802b75a3002c-16808671270421425.png" alt="image-20210720143503693" class="img_ev3q"></p>
<p>查看提交后的接口信息</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/8b6c4147bd5f7c1e4656e6d58178407a-16808671270431427.png" alt="image-20210720143653156" class="img_ev3q"></p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="swagger-总结">Swagger 总结<a href="#swagger-总结" class="hash-link" aria-label="Direct link to Swagger 总结" title="Direct link to Swagger 总结">​</a></h2>
<ol>
<li>Swagger 最重大的使命就是使前后端人员之间的和谐关系有所好转</li>
<li>接口文档可以实时更新</li>
<li>可以在线测试后端接口，这个功能好评，爽的一批</li>
</ol>
<p>Swagger 是一个十分好用的工具，很多公司在使用</p>
<p>PS：处于安全考虑，我们在发布的时候需要关闭 Swagger</p>
<h1>功能</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="文件上传">文件上传<a href="#文件上传" class="hash-link" aria-label="Direct link to 文件上传" title="Direct link to 文件上传">​</a></h2>
<p>配置：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain"># 上传文件总的最大值</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.servlet.multipart.max-request-size=10MB</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain"># 单个文件的最大值</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.servlet.multipart.max-file-size=10MB</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">## jsp</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.mvc.view.prefix=/WEB-INF/jsp/</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.mvc.view.suffix=.jsp</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>单个文件上传的示例</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Controller</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class UploadController {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private static final Logger LOGGER = LoggerFactory.getLogger(UploadController.class);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @GetMapping(&quot;/upload&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String upload() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;upload&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @PostMapping(&quot;/upload&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @ResponseBody</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String upload(@RequestParam(&quot;file&quot;) MultipartFile file) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (file.isEmpty()) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;上传失败，请选择文件&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String fileName = file.getOriginalFilename();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String filePath = &quot;/Users/itinypocket/workspace/temp/&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        File dest = new File(filePath + fileName);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            file.transferTo(dest);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            LOGGER.info(&quot;上传成功&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;上传成功&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            LOGGER.error(e.toString(), e);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;上传失败！&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>多个文件上传的示例</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@GetMapping(&quot;/multiUpload&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public String multiUpload() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return &quot;multiUpload&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@PostMapping(&quot;/multiUpload&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@ResponseBody</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public String multiUpload(HttpServletRequest request) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    List&lt;MultipartFile&gt; files = ((MultipartHttpServletRequest) request).getFiles(&quot;file&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    String filePath = &quot;/Users/itinypocket/workspace/temp/&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    for (int i = 0; i &lt; files.size(); i++) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        MultipartFile file = files.get(i);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        if (file.isEmpty()) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;上传第&quot; + (i++) + &quot;个文件失败&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        String fileName = file.getOriginalFilename();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        File dest = new File(filePath + fileName);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            file.transferTo(dest);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            LOGGER.info(&quot;第&quot; + (i + 1) + &quot;个文件上传成功&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } catch (IOException e) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            LOGGER.error(e.toString(), e);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return &quot;上传第&quot; + (i++) + &quot;个文件失败&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    return &quot;上传成功&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h1>任务</h1>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="异步任务">异步任务<a href="#异步任务" class="hash-link" aria-label="Direct link to 异步任务" title="Direct link to 异步任务">​</a></h2>
<p>小案例：我如何解决假如我访问了一个 hello 页面，页面调用的方法是睡眠 3 秒，再返回 ok，那么再前端页面我就要等待空白页面 3 秒钟。如何解决？</p>
<p>Springboot 中有一个注解叫<code>@async</code>异步任务</p>
<p>我们要使用他需要在主启动类开启注解支持<code>@enableasync</code></p>
<p>代码示例</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class AsyncService {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        @Async</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        public void hello(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                Thread.sleep(3000);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            } catch (InterruptedException e) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">                e.printStackTrace();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            System.out.println(&quot;您好&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>这段代码会让执行方法的时候网页加载三秒。</p>
<p>控制层</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@RestController</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class AsyncController {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    AsyncService asyncService;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @RequestMapping(&quot;/hello&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public String hello(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        asyncService.hello();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        return &quot;ok&quot;;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我们访问 hello 这个请求，就会等待三秒，之后页面返回 ok，</p>
<p>执行顺序是：</p>
<p>​ 发起请求-----》执行方法---》等三秒---》返回 ok</p>
<p>我们启动了异步任务，并且将等待方法上加入注解<code>@Aynsc</code></p>
<p>再次启动的时候，顺序就变成了这样 发起请求-----》执行方法---》等三秒（同时）---》等待完毕</p>
<p>​ ---》返回 ok（同时）</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="定时任务">定时任务<a href="#定时任务" class="hash-link" aria-label="Direct link to 定时任务" title="Direct link to 定时任务">​</a></h2>
<p>gogogo 函数接口</p>
<div class="language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">第一个接口：TaskExecutor // 任务执行者</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">第二个接口：TaskScheduler// 任务调度者</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">注解</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@EnableScheduling//开启定时任务功能注解</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">@Scheduled</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>使用定时任务首先我们要在主启动类上添加注解开启定时任务：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@EnableScheduling//开启定时任务功能注解</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>之后就可以通过<code>@Scheduled</code>来设置 cron 表达式实现定时任务了</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="cron-表达式">cron 表达式<a href="#cron-表达式" class="hash-link" aria-label="Direct link to cron 表达式" title="Direct link to cron 表达式">​</a></h3>
<p>​ 计划任务，是任务在约定的时间执行已经计划好的工作，这是表面的意思。在 Linux 中，我们经常用到 cron 服务器来完成这项工作。cron 服务器可以根据配置文件约定的时间来执行特定的任务。</p>
<p>一个 cron 表达式有至少 6 个（也可能 7 个）有空格分隔的时间元素。
<strong>按顺序依次为</strong></p>
<p>秒（0<del>59）
分钟（0</del>59）
小时（0<del>23）
天（月）（0</del>31，但是你需要考虑你月的天数）
月（0<del>11）
天（星期）（1</del>7 1=SUN 或 SUN，MON，TUE，WED，THU，FRI，SAT）
年份（1970－2099）</p>
<p><strong>字段 允许值 允许的特殊字符</strong></p>
<p>秒 0-59 , - _ /
分 0-59 , - _ /
小时 0-23 , - _ /
日期 1-31 , - _ ? / L W C
月份 1-12 或者 JAN-DEC , - _ /
星期 1-7 或者 SUN-SAT , - _ ? / L C #
年（可选） 留空, 1970-2099 , - * /</p>
<p>PS：</p>
<ol>
<li>？只能用在日期和星期，月上</li>
<li>在使用“L”参数时，不要指定列表或范围，因为这会导致问题</li>
</ol>
<p>测试小例子：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Service</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class ScheduledService {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //需求：在一定的时间执行这个方法 方法千百种</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    //cron表达式</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Scheduled(cron = &quot;0 14 10 * * ?&quot;)</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public void hello(){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        System.out.println(&quot;你被执行了&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>我想在每天的 10 点 14 分的时候，打印你被执行了，</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="邮件任务">邮件任务<a href="#邮件任务" class="hash-link" aria-label="Direct link to 邮件任务" title="Direct link to 邮件任务">​</a></h2>
<p>首先要去 qq 邮箱开启服务</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/055b3f123e313838bd1c30bf0524cab9-16808671270431429.png" alt="image-20210720230503628" class="img_ev3q"></p>
<p>spring 配置文件中的邮件配置</p>
<div class="language-properties codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-properties codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">spring.mail.username=3132774018@qq.com</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.mail.password=vymozuqhwxmadhae</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.mail.host= smtp.qq.com</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">#开启加密验证</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">spring.mail.properties.mail.stmp.ssl.enable=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>spring 中关于邮件的实现类：JavaMailSenderImpl</p>
<p><img decoding="async" loading="lazy" src="http://img.doomwatcher.cn/img/91ca8aa05ed6429b409775a91970f440-16808671270431431.png" alt="image-20210720230822737" class="img_ev3q"></p>
<p>他是一个 bean 所以我们可以拿来使用</p>
<div class="language-XML language-xml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-xml codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    JavaMailSenderImpl sender;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="简单的邮件发送">简单的邮件发送<a href="#简单的邮件发送" class="hash-link" aria-label="Direct link to 简单的邮件发送" title="Direct link to 简单的邮件发送">​</a></h4>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@SpringBootTest</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">class Spring8TestApplicationTests {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    JavaMailSenderImpl sender;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    void contextLoads() {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //一个简单的邮件的发送</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        SimpleMailMessage message = new SimpleMailMessage();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //标题</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        message.setSubject(&quot;你好啊，hyc组内的成员，看到这条消息的时候 hyc还在为了大厂努力&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //内容</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        message.setText(&quot;冲进大厂没有什么是不可以的，好好努力，一切都在掌握之中&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //发送给谁</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        message.setTo(&quot;2549273958@qq.com&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //谁来发送</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        message.setFrom(&quot;3132774018@qq.com&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        sender.send(message);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="复杂邮件带有附件html">复杂邮件，带有附件，html,<a href="#复杂邮件带有附件html" class="hash-link" aria-label="Direct link to 复杂邮件，带有附件，html," title="Direct link to 复杂邮件，带有附件，html,">​</a></h4>
<p>我们这里使用<code>sender.createMimeMessage</code>的方式来创建复杂的邮件发送对象</p>
<p>springboot 给我们提供了一个帮助类，<code>MimeMessageHelper</code>我们用这个 helper 对象来操作<code>MImeMessage</code>,</p>
<p>就可以完成复杂邮件发送了</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">    @Test</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    void contextLoads1() throws MessagingException {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //复杂的邮件的发送</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        MimeMessage mimeMessage = sender.createMimeMessage();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        MimeMessageHelper helper = new MimeMessageHelper(mimeMessage,true);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        helper.setSubject(&quot;hyc-plus&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        helper.setText(&quot;&lt;p style=&#x27;color:red&#x27;&gt;你好&lt;/p&gt;&quot;,true);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //附件</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        helper.addAttachment(&quot;1.jpg&quot;,new File(&quot;D:\\java工程师\\SpringBoot\\spring-8-test\\src\\main\\resources\\public\\1600837482167.jpg&quot;));</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //发送给谁</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        helper.setTo(&quot;3132774018@qq.com&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //谁来发送</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        helper.setFrom(&quot;3132774018@qq.com&quot;);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        sender.send(mimeMessage);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="邮件发送工具类">邮件发送工具类<a href="#邮件发送工具类" class="hash-link" aria-label="Direct link to 邮件发送工具类" title="Direct link to 邮件发送工具类">​</a></h3>
<p>话不多说都在码里面了</p>
<p>MailsenderUtils：</p>
<div class="language-JAVA language-java codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#0f172a;--prism-background-color:#f1f5f9"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-java codeBlock_bY9V thin-scrollbar" style="color:#0f172a;background-color:#f1f5f9"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#0f172a"><span class="token plain">@Component</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">public class MailsenderUtils {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    @Autowired</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    private JavaMailSenderImpl mailSender;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    /**</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     *</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @param subject ：邮件标题</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @param text 邮件内容</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @param html  是否开启html，</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @param to     发送给谁</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @param from    谁来发送</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @param filename  附件名字</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @param acc       附件路径</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * @return</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * 1 :发送成功</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     * -1:发送失败</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">     */</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    public  int MailsenderbyHyc(String subject, String text, boolean html, String to, String from,String filename, File acc){</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        //复杂的邮件的发送</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        MimeMessage mimeMessage = mailSender.createMimeMessage();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        MimeMessageHelper helper = null;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        try {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            helper = new MimeMessageHelper(mimeMessage,true);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            helper.setSubject(subject);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            helper.setText(text,html);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //附件</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            helper.addAttachment(filename,acc);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //发送给谁</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            helper.setTo(to);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            //谁来发送</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            helper.setFrom(from);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            mailSender.send(mimeMessage);</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return 1;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        } catch (MessagingException e) {</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            e.printStackTrace();</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">            return -1;</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">        }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain">}</span><br></span><span class="token-line" style="color:#0f172a"><span class="token plain" style="display:inline-block"></span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Java/SpringBoot 解决企业级复杂性简化开发的神奇.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/Java/Spring5 Webflux 响应式编程"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Spring5 Webflux</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/Java/SpringCloud Alibaba"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">springCloudAlibaba</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#spring-如何简化-java-开发" class="table-of-contents__link toc-highlight">Spring 如何简化 java 开发</a></li><li><a href="#什么是-springboot" class="table-of-contents__link toc-highlight">什么是 SpringBoot？</a></li><li><a href="#java-框架的迭代" class="table-of-contents__link toc-highlight">java 框架的迭代</a></li><li><a href="#微服务" class="table-of-contents__link toc-highlight">微服务</a><ul><li><a href="#什么是微服务" class="table-of-contents__link toc-highlight">什么是微服务？</a></li><li><a href="#单体应用架构" class="table-of-contents__link toc-highlight">单体应用架构</a></li><li><a href="#微服务架构" class="table-of-contents__link toc-highlight">微服务架构</a></li><li><a href="#如何构建微服务" class="table-of-contents__link toc-highlight">如何构建微服务</a></li></ul></li><li><a href="#第一个-springboot-程序" class="table-of-contents__link toc-highlight">第一个 SpringBoot 程序</a></li><li><a href="#原理初探" class="table-of-contents__link toc-highlight">原理初探</a><ul><li><a href="#自动装配" class="table-of-contents__link toc-highlight">自动装配：</a></li><li><a href="#主程序" class="table-of-contents__link toc-highlight">主程序：</a></li><li><a href="#run-执行原理" class="table-of-contents__link toc-highlight">run 执行原理</a></li></ul></li><li><a href="#springboot-配置" class="table-of-contents__link toc-highlight">SpringBoot 配置</a><ul><li><a href="#yml-是什么" class="table-of-contents__link toc-highlight">yml 是什么?</a></li><li><a href="#yml特点" class="table-of-contents__link toc-highlight">yml:特点</a></li><li><a href="#两种赋值方式" class="table-of-contents__link toc-highlight">两种赋值方式</a></li><li><a href="#propertysource" class="table-of-contents__link toc-highlight">@PropertySource</a></li><li><a href="#springboot-推荐我们用-yml" class="table-of-contents__link toc-highlight">SpringBoot 推荐我们用 yml</a></li><li><a href="#jsr303-校验注解" class="table-of-contents__link toc-highlight">jsr303 校验注解：</a></li><li><a href="#springboot-配置文件优先级" class="table-of-contents__link toc-highlight">SpringBoot 配置文件优先级</a></li><li><a href="#多环境配置" class="table-of-contents__link toc-highlight">多环境配置：</a></li><li><a href="#properties" class="table-of-contents__link toc-highlight">properties:</a></li><li><a href="#yml" class="table-of-contents__link toc-highlight">yml：</a></li></ul></li><li><a href="#再理解自动装配" class="table-of-contents__link toc-highlight">再理解自动装配</a><ul><li><a href="#分析自动装配的原理" class="table-of-contents__link toc-highlight">分析自动装配的原理：</a></li><li><a href="#conditionalon" class="table-of-contents__link toc-highlight">@ConditionalOn</a></li><li><a href="#如何配置的" class="table-of-contents__link toc-highlight">如何配置的</a></li><li><a href="#如何看看我们的自动配置类是否生效" class="table-of-contents__link toc-highlight">如何看看我们的自动配置类是否生效</a></li><li><a href="#静态资源" class="table-of-contents__link toc-highlight">静态资源</a></li><li><a href="#什么是-webjars" class="table-of-contents__link toc-highlight">什么是 webjars</a></li><li><a href="#首页如何定制" class="table-of-contents__link toc-highlight">首页如何定制</a></li><li><a href="#springboot-页面跳转" class="table-of-contents__link toc-highlight">SpringBoot 页面跳转：</a></li></ul></li><li><a href="#模版引擎thymeleaf" class="table-of-contents__link toc-highlight">模版引擎：Thymeleaf</a><ul><li><a href="#thymeleaf" class="table-of-contents__link toc-highlight">thymeleaf：</a></li><li><a href="#thymeleaf-基础语法" class="table-of-contents__link toc-highlight">thymeleaf 基础语法：</a></li></ul></li><li><a href="#springboot-装配并且扩展-springmvc" class="table-of-contents__link toc-highlight">SpringBoot 装配并且扩展 SpringMvc</a><ul><li><a href="#官方文档是这样说的" class="table-of-contents__link toc-highlight">官方文档是这样说的：</a></li></ul></li><li><a href="#员工管理系统" class="table-of-contents__link toc-highlight">员工管理系统</a><ul><li><a href="#1首页配置" class="table-of-contents__link toc-highlight">1、首页配置</a></li><li><a href="#页面国际化" class="table-of-contents__link toc-highlight">页面国际化</a></li><li><a href="#2首页实现" class="table-of-contents__link toc-highlight">2、首页实现</a></li><li><a href="#3页面国际化" class="table-of-contents__link toc-highlight">3、页面国际化</a></li><li><a href="#4登录拦截器" class="table-of-contents__link toc-highlight">4、登录+拦截器</a></li><li><a href="#5展示员工列表" class="table-of-contents__link toc-highlight">5、展示员工列表</a></li><li><a href="#6添加员工实现" class="table-of-contents__link toc-highlight">6、添加员工实现</a></li><li><a href="#8删除员工实现与-404-页面处理" class="table-of-contents__link toc-highlight">8、删除员工实现与 404 页面处理</a></li><li><a href="#9404-及注销" class="table-of-contents__link toc-highlight">9、404 及注销</a></li></ul></li><li><a href="#后端人员开发如何开发一个网站" class="table-of-contents__link toc-highlight">后端人员开发如何开发一个网站</a><ul><li><a href="#druid" class="table-of-contents__link toc-highlight">druid</a></li><li><a href="#springboot-整合-mybatis" class="table-of-contents__link toc-highlight">SpringBoot 整合 mybatis</a></li></ul></li><li><a href="#springsecurity-简介" class="table-of-contents__link toc-highlight">Springsecurity 简介</a></li><li><a href="#security-实战" class="table-of-contents__link toc-highlight">Security 实战</a><ul><li><a href="#他能做什么" class="table-of-contents__link toc-highlight">他能做什么？</a></li><li><a href="#shiro-架构" class="table-of-contents__link toc-highlight">shiro 架构</a></li><li><a href="#helloshiro" class="table-of-contents__link toc-highlight">helloshiro</a></li><li><a href="#shiro-整个流程" class="table-of-contents__link toc-highlight">shiro 整个流程</a></li><li><a href="#整合-shiro-和-thymeleaf" class="table-of-contents__link toc-highlight">整合 shiro 和 thymeleaf</a></li><li><a href="#源码" class="table-of-contents__link toc-highlight">源码</a></li></ul></li><li><a href="#swagger-简介" class="table-of-contents__link toc-highlight">Swagger 简介</a></li><li><a href="#springboot-集成-swagger" class="table-of-contents__link toc-highlight">SpringBoot 集成 Swagger</a></li><li><a href="#配置-swagger" class="table-of-contents__link toc-highlight">配置 Swagger</a></li><li><a href="#swagger-配置扫描接口" class="table-of-contents__link toc-highlight">swagger 配置扫描接口</a><ul><li><a href="#是否开启-swagger" class="table-of-contents__link toc-highlight">是否开启 Swagger</a></li></ul></li><li><a href="#如何让我在测试的时候用-swagger发布的时候不用-swagger" class="table-of-contents__link toc-highlight">如何让我在测试的时候用 swagger，发布的时候不用 swagger</a></li><li><a href="#api-分组" class="table-of-contents__link toc-highlight">api 分组</a></li><li><a href="#实体类" class="table-of-contents__link toc-highlight">实体类</a></li><li><a href="#swagger-注解" class="table-of-contents__link toc-highlight">Swagger 注解</a></li><li><a href="#swagger-测试接口" class="table-of-contents__link toc-highlight">Swagger 测试接口</a></li><li><a href="#swagger-总结" class="table-of-contents__link toc-highlight">Swagger 总结</a></li><li><a href="#文件上传" class="table-of-contents__link toc-highlight">文件上传</a></li><li><a href="#异步任务" class="table-of-contents__link toc-highlight">异步任务</a></li><li><a href="#定时任务" class="table-of-contents__link toc-highlight">定时任务</a><ul><li><a href="#cron-表达式" class="table-of-contents__link toc-highlight">cron 表达式</a></li></ul></li><li><a href="#邮件任务" class="table-of-contents__link toc-highlight">邮件任务</a><ul><li><a href="#邮件发送工具类" class="table-of-contents__link toc-highlight">邮件发送工具类</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">  来自冷环渊的技术支持与文档创作 @2025</div></div></div></footer></div>
</body>
</html>